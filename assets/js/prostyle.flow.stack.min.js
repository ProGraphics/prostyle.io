/*!
 * VERSION: 0.20.0
 * DATE: 17-Aug-2015
 * UPDATES AND DOCS AT: https://prostyle.io/plus/
 * 
 * This file is part of ProStyle Plus, a set of premium extensions for ProStyle. It may be
 * used for free for personal projects or licensed per website domain name for commercial use.
 * 
 * @copyright - Copyright (c) 2013-2015, Pro Graphics, Inc. All rights reserved. 
 * @license - This work is subject to the terms at https://prostyle.io/plus/license/
 * @author: Gary Chamberlain, gary@pro.graphics.
 * 
 **/

var __extends=this&&this.__extends||function(b,a){function e(){this.constructor=b}for(var g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);e.prototype=a.prototype;b.prototype=new e},ProStyle;
(function(b){(function(a){(function(a){(function(a){var d=function(b){function c(a,c,k,d,f){b.call(this,a,"stack",c,k,d,"stackedpage");this.stacks=f}__extends(c,b);c.prototype.serialize=function(){return a.serialize(this)};c.prototype.createView=function(b,c){return new a.StackFlowView(this,b,c)};c.defaultStacksJson={current:{position:[0,0,0],rotation:[0,0,0],scale:100,opacity:100},future:{position:[140,0,-200],rotation:[0,-10,5],scale:100,opacity:80,offset:{position:[130,80,-200],rotation:[0,-5,
2],scale:100,opacity:50}},past:{position:[-140,0,-200],rotation:[0,10,-5],scale:100,opacity:80,offset:{position:[-130,80,-200],rotation:[0,5,-2],scale:100,opacity:50}}};return c}(b.Models.Flows.PlacementFlowModel);a.StackFlowModel=d})(a.Stack||(a.Stack={}))})(a.Flows||(a.Flows={}))})(b.Extensions||(b.Extensions={}))})(ProStyle||(ProStyle={}));
(function(b){(function(a){(function(a){(function(a){var d=function(a){function b(c,d,k){a.call(this,c,d,k);this.stackFlow=c}__extends(b,a);b.prototype.initializePages=function(a){var b=this,c=this.camera.size.getContainedSize(this.stackFlow.pageAspectRatio);this.pages.forEach(function(d,f){a.set(b.pages[f].div,{width:c.width,height:c.height,perspective:1E4},"initialize")})};b.prototype.generatePageMovement=function(a,b,c){var d=this.stackFlow.stacks.current,f=this.stackFlow.stacks.future,g=this.stackFlow.stacks.futureOffset,
e=this.stackFlow.stacks.past,m=this.stackFlow.stacks.pastOffset,l=this.camera.size.getContainedSize(this.stackFlow.pageAspectRatio),d=d.renderCss(l);this.applyCss(a,this.pages[c].div,b,1,d,Expo.easeOut);for(var e=e.duplicate(),h=c-1;0<=h;h--)d=e.renderCss(l),this.applyCss(a,this.pages[h].div,b,1,d,Expo.easeOut),e.adjust(m);f=f.duplicate();for(h=c+1;h<this.pages.length;h++)d=f.renderCss(l),this.applyCss(a,this.pages[h].div,b,1,d,Expo.easeOut),f.adjust(g)};b.prototype.applyCss=function(a,b,d,c,e,g){"initialize"===
d?a.set(b,e,d):(e.ease=g,a.to(b,c,e,d))};return b}(b.Views.Flows.PlacementFlowView);a.StackFlowView=d})(a.Stack||(a.Stack={}))})(a.Flows||(a.Flows={}))})(b.Extensions||(b.Extensions={}))})(ProStyle||(ProStyle={}));
(function(b){(function(a){(function(a){(function(a){var d=b.Util;a.deserialize=function(e,c){var n=b.Types.Placement.fromJson(d.getSetup(c,"placement")),p=d.convertToNumber(d.getSetup(c,"pageAspectRatio"),4/3),k=b.Types.Stacks.fromJson(d.getSetup(c,"stacks")||a.StackFlowModel.defaultStacksJson);return new a.StackFlowModel(e,n,d.getSetup(c,"defaultPageClass"),p,k)}})(a.Stack||(a.Stack={}))})(a.Flows||(a.Flows={}))})(b.Extensions||(b.Extensions={}))})(ProStyle||(ProStyle={}));
(function(b){(function(a){(function(a){(function(a){a.serialize=function(a){var b={setup:{}};void 0!==a.defaultPageClass&&(b.setup.defaultPageClass=a.defaultPageClass);return b}})(a.Stack||(a.Stack={}))})(a.Flows||(a.Flows={}))})(b.Extensions||(b.Extensions={}))})(ProStyle||(ProStyle={}));
