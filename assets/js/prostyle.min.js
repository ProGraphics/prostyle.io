/*!
 * VERSION: 0.20.0
 * DATE: 17-Aug-2015
 * UPDATES AND DOCS AT: https://prostyle.io/
 * 
 * @license Copyright (c) 2013-2015, Pro Graphics, Inc. All rights reserved. 
 * This work is subject to the terms at https://prostyle.io/licensing/
 * @author: Gary Chamberlain, gary@pro.graphics.
 * 
 **/

var ProStyle;
(function(f){f.mediaRootUrl=void 0;f.defaultControllers=[{controllerType:"auto"},{controllerType:"resize"}];(function(f){f._empty=!0})(f.Stories||(f.Stories={}));(function(f){(function(f){f.svg='<svg viewBox="0 0 880 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M866 476c9.333 6.667 14 14.667 14 24c0 9.333 -4.667 16.667 -14 22c0 0 -372 248 -372 248c-14.667 9.333 -27 11.333 -37 6c-10 -5.333 -15 -17.333 -15 -36c0 0 0 -482 0 -482c0 -18.667 5 -30.667 15 -36c10 -5.333 22.333 -3.333 37 6c0 0 372 248 372 248m-454 0c9.333 6.667 14 14.667 14 24c0 9.333 -4.667 16.667 -14 22c0 0 -360 248 -360 248c-13.333 9.333 -25.333 11.333 -36 6c-10.667 -5.333 -16 -17.333 -16 -36c0 0 0 -482 0 -482c0 -18.667 5.333 -30.667 16 -36c10.667 -5.333 22.667 -3.333 36 6c0 0 360 248 360 248" />  </g></svg>'})(f.fastForward||(f.fastForward=
{}));(function(f){f.svg='<svg viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M 235.53172,912.14362 C 222.1737,911.65675 192.88213,908.97613 179.7563,907.0393 142.78725,901.5842 111.49908,892.23905 88.608558,879.81533 25.450284,845.53645 -2.363022,754.52992 11.595266,627.82372 25.966799,497.36601 84.182786,347.68421 159.54762,247.41661 197.38417,197.07776 237.03803,160.39415 278.89341,137.01036 374.98294,83.32699 506.9775,80.13258 647.3983,128.09214 c 49.55485,16.92505 104.25567,43.36958 148.76794,71.92026 67.85023,43.51989 124.36319,97.22188 156.87086,149.06805 18.94366,30.21307 31.87969,63.3221 38.06746,97.43144 2.33759,12.88545 2.53863,16.10095 2.59068,41.42752 0.0635,30.88207 -0.93881,40.20361 -6.88779,64.06813 -4.43071,17.77393 -9.49209,31.52197 -18.08915,49.13496 -8.23109,16.86308 -14.88167,27.71 -25.9912,42.39094 C 899.81543,700.24002 812.14549,761.98761 706.85748,809.66081 557.06683,877.48427 374.39035,917.2046 235.53172,912.14362 z m 20.199,-175.08151 c 6.38062,-2.666 6.29534,-1.92178 6.29534,-54.94359 0,-44.83349 0.10257,-47.73586 1.686,-47.70791 0.92731,0.0164 4.93759,0.46167 8.91174,0.9896 31.04792,4.12438 61.94393,2.5304 86.22704,-4.44863 37.74398,-10.8477 65.19426,-39.86566 76.5239,-80.89416 5.21836,-18.89745 5.3677,-20.86694 5.3677,-70.78889 0,-44.41671 -0.10617,-47.267 -2.14793,-57.66335 -10.62749,-54.11369 -43.50561,-87.90953 -95.15856,-97.81468 -34.23802,-6.56561 -88.65352,-3.28975 -141.91157,8.54321 -17.90378,3.97789 -23.30288,6.3891 -24.9484,11.14185 -0.87518,2.52775 -1.1629,48.97756 -1.2043,194.41663 -0.0485,170.42766 0.10664,191.43468 1.43437,194.23266 1.3611,2.86829 3.29589,4.39796 7.18213,5.67829 0.79484,0.26186 16.52472,0.51032 34.95531,0.55216 26.91396,0.0611 34.15522,-0.19347 36.78723,-1.29319 z m 36.16169,-170.6532 c -0.79483,-0.16956 -7.83992,-0.8255 -15.65574,-1.45764 l -14.21061,-1.14936 0,-84.09937 0,-84.09937 2.64944,-0.54561 c 4.32406,-0.89047 29.87188,-2.4793 39.7415,-2.47153 19.88057,0.0156 31.80455,5.28992 40.05624,17.71784 7.62813,11.4888 9.88532,23.73156 10.67225,57.88521 0.94764,41.1288 -1.53911,63.6562 -8.46381,76.6734 -5.72666,10.76513 -16.75587,18.88668 -28.66728,21.10972 -4.72311,0.88147 -22.63346,1.1809 -26.12199,0.43671 z m 525.851,69.28618 c 42.38495,-6.01923 75.22316,-29.25194 92.24766,-65.26424 11.84331,-25.05233 14.87524,-43.63329 14.87524,-91.16232 0,-40.01963 -1.78087,-55.69933 -8.65755,-76.22473 -13.90501,-41.50378 -45.23465,-69.21991 -89.13065,-78.85057 -28.6265,-6.28057 -64.499,-4.3605 -90.6127,4.85004 -45.55567,16.06787 -72.81618,52.13077 -79.95784,105.77608 -1.95361,14.67474 -1.92487,74.08051 0.043,89.09299 5.72313,43.65858 25.18804,75.73978 57.80606,95.27346 26.94864,16.13849 64.15813,22.08028 103.38668,16.50929 z m -38.93145,-72.11263 c -13.50019,-2.93712 -23.06811,-10.72915 -29.29281,-23.85582 -6.58723,-13.89118 -7.22294,-19.21222 -7.22294,-60.45811 0,-41.45888 0.64564,-46.8115 7.29042,-60.44081 8.16765,-16.7529 20.8752,-24.30337 40.94711,-24.32965 17.26097,-0.0226 28.83801,5.77322 37.13719,18.59198 8.46721,13.0783 10.47888,25.78284 10.47888,66.17848 0,38.81099 -1.53158,49.75666 -8.93668,63.86774 -8.79754,16.76446 -29.22827,25.05258 -50.40117,20.44619 z m -221.41931,65.75453 3.2969,-3.59872 0.03,-107.19579 0.03,-107.19581 8.93659,-4.08853 c 20.61319,-9.43061 36.60854,-13.59307 55.5365,-14.45218 11.51659,-0.52274 12.1389,-0.6588 14.69231,-3.2122 l 2.66628,-2.66634 0,-29.49265 c 0,-32.3359 -0.065,-32.73152 -5.87582,-35.73638 -4.84819,-2.50711 -19.8152,-1.095 -36.08282,3.40434 -9.76904,2.70194 -27.10272,11.03633 -34.87766,16.76991 -3.31328,2.44336 -6.2397,4.44247 -6.50316,4.44247 -0.26345,0 -0.47901,-3.43499 -0.47901,-7.63334 0,-7.23931 -0.15301,-7.78635 -2.9644,-10.59774 l -2.96441,-2.96439 -36.03933,0 -36.03934,0 -3.14635,2.81116 -3.14635,2.81117 -0.28573,145.31628 c -0.1992,101.30298 0.027,146.3959 0.74674,148.88076 1.02228,3.52923 4.48752,6.81938 8.20987,7.79506 1.05978,0.27777 17.45985,0.43678 36.44462,0.35334 l 34.51776,-0.1517 3.29689,-3.59872 z" />  </g></svg>'})(f.logo||
(f.logo={}));(function(f){f.svg='<svg viewBox="0 0 530 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M440 150c60 0 90 21.333 90 64c0 0 0 570 0 570c0 44 -30 66 -90 66c-60 0 -90 -22 -90 -66c0 0 0 -570 0 -570c0 -42.667 30 -64 90 -64c0 0 0 0 0 0m-350 0c60 0 90 21.333 90 64c0 0 0 570 0 570c0 44 -30 66 -90 66c-60 0 -90 -22 -90 -66c0 0 0 -570 0 -570c0 -42.667 30 -64 90 -64c0 0 0 0 0 0" />  </g></svg>'})(f.pause||(f.pause={}));(function(f){f.svg='<svg viewBox="0 0 500 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M486 474c9.333 6.667 14 15.333 14 26c0 9.333 -4.667 17.333 -14 24c0 0 -428 266 -428 266c-16 10.667 -29.667 12.667 -41 6c-11.333 -6.667 -17 -20 -17 -40c0 0 0 -514 0 -514c0 -20 5.667 -33.333 17 -40c11.333 -6.667 25 -4.667 41 6c0 0 428 266 428 266" />  </g></svg>'})(f.play||
(f.play={}));(function(f){f.svg='<svg viewBox="0 0 600 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M174 500c0 -9.333 4.667 -17.333 14 -24c0 0 364 -228 364 -228c13.333 -9.333 24.667 -11 34 -5c9.333 6 14 17.667 14 35c0 0 0 442 0 442c0 17.333 -4.667 29 -14 35c-9.333 6 -20.667 4.333 -34 -5c0 0 -364 -228 -364 -228c-9.333 -6.667 -14 -14 -14 -22c0 0 0 0 0 0m-174 -234c0 -38.667 25.333 -58 76 -58c49.333 0 74 19.333 74 58c0 0 0 466 0 466c0 38.667 -24.667 58 -74 58c-50.667 0 -76 -19.333 -76 -58c0 0 0 -466 0 -466c0 0 0 0 0 0" />  </g></svg>'})(f.toStart||
(f.toStart={}))})(f.Svg||(f.Svg={}));(function(f){f.setElementText=function(f,v){f[void 0!==document.body.textContent?"textContent":"innerText"]=v}})(f.Util||(f.Util={}));(function(f){var q=function(){return function(f){this.initPropertyLists=f;this.init=f[0]}}();f.Model=q})(f.Models||(f.Models={}));(function(f){var q=function(){function f(q,r){void 0===q&&(q=f.DEFAULT_WIDTH);void 0===r&&(r=f.DEFAULT_HEIGHT);this.width=q;this.height=r;this.width=Math.max(f.MIN,Math.min(q,f.MAX));this.height=Math.max(f.MIN,
Math.min(r,f.MAX))}f.prototype.aspectRatio=function(){return this.height?this.width/this.height:1};f.prototype.getContainedSize=function(q){var r=this.aspectRatio();return q<r?new f(this.height*q,this.height):q>r?new f(this.width,this.width/q):new f(this.width,this.height)};f.DEFAULT_WIDTH=1024;f.DEFAULT_HEIGHT=768;f.MIN=1;f.MAX=4096;return f}();f.Size=q})(f.Types||(f.Types={}));(function(f){f.splitNoParens=function(f){var v=0,y=0,r=[];f=f.match(/([^()]+)|([()])/g);for(var e=f.length,d,h="",c=0;c<
e;c++)d=f[c],"("===d?v++:")"===d&&y++,0!==v?(h+=d,v===y&&(r[r.length-1]+=h,v=y=0,h="")):r=r.concat(d.match(/([^,]+)/g));return r};f.isAbsoluteUrl=function(f){if(f){f=f.toString().trim();if(0===f.indexOf("//"))return!0;f=f.toLowerCase();if(0===f.indexOf("http://")||0===f.indexOf("https://")||0===f.indexOf("ftp://"))return!0}return!1}})(f.Util||(f.Util={}))})(ProStyle||(ProStyle={}));
var __extends=this&&this.__extends||function(f,y){function q(){this.constructor=f}for(var v in y)y.hasOwnProperty(v)&&(f[v]=y[v]);q.prototype=y.prototype;f.prototype=new q};
(function(f){function y(e){if(void 0!==e.dataset.prostyle){"relative"!==e.style.position&&"absolute"!==e.style.position&&(e.style.position="relative");var d=document.createElement("progress");d.value=1;d.max=2;d.style.position="absolute";d.style.left="50%";d.style.top="50%";d.style.transform="translate(-50%,-50%)";e.innerHTML="";e.appendChild(d)}}function q(){var e=document.body;if(e)if(void 0!==e.dataset.prostyle)y(e);else for(var e=document.getElementsByTagName("div"),d=0;d<e.length;d++)y(e[d])}
function v(e){var d=e.dataset.prostyle;if(void 0!==d){var h=f.Stories[d];void 0===h?e.innerHTML="<strong style='background-color: #FFF;color:#C00'>Missing story at ProStyle.Stories."+d+"</strong>":(e.innerHTML="",d=f.Serialization.StoryReader.read(h),d=new f.Views.CanvasView(d,e),d.startControllers(),e.proStyleCanvas=d)}}function B(){var e=document.body;if(e)if(void 0!==e.dataset.prostyle)v(e);else for(var e=document.getElementsByTagName("div"),d=0;d<e.length;d++)v(e[d])}function r(){q();window.addEventListener("load",
function(){void 0===f.mediaRootUrl&&(f.mediaRootUrl=window.ProStyle_mediaRootUrl);q();B()})}(function(e){var d=function(d){function c(b,a,g){d.call(this,[b]);this.padding=a;this.canvasMediaUrl=g;this.setAdjustedImageRootUrl(g)}__extends(c,d);c.prototype.setAdjustedImageRootUrl=function(b){if(b&&(b=b.toString().trim(),f.Util.isAbsoluteUrl(b))){this.mediaUrl=b;return}var a=f.mediaRootUrl;if(a){var g=a.lastIndexOf("/")===a.length-1;b&&(a=0===b.indexOf("/")?g?a+b.substr(1):a+b:g?a+b:a+("/"+b))}else a=
b;a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");this.mediaUrl=a};c.prototype.adjustBackgroundImage=function(b,a){var g=this,c=[];f.Util.splitNoParens(b).forEach(function(a){a=a.trim();0===a.toLowerCase().indexOf("url(")&&(a="url("+g.adjustImageUrl(a)+")");c.push(a)});return c.join(",")};c.prototype.adjustImageUrl=function(b){0===b.toLowerCase().indexOf("url(")&&(b=b.substr(4,b.length-5).trim());this.mediaUrl&&(f.Util.isAbsoluteUrl(b)||(b=0===b.indexOf("/")?this.mediaUrl+b.substr(1):this.mediaUrl+b));
return b};return c}(e.Model);e.CanvasModel=d;d=function(d){function c(b,a,g){d.call(this,[b]);this.aspectRatio=a;this.padding=g}__extends(c,d);return c}(e.Model);e.FrameModel=d})(f.Models||(f.Models={}));(function(e){var d=function(){function d(c,b){void 0===c&&(c=1);this.x=c;this.y=b;void 0===b&&(this.y=c)}d.fromJson=function(c){if(void 0===c||null===c)return new d;var b=100,a=void 0;return"number"===typeof c?new d(c/100,c/100):"string"===typeof c?(c=c.split(","),0<c.length&&(b=f.Util.convertToNumber(c[0].trim(),
100)/100),1<c.length&&(a=f.Util.convertToNumber(c[1].trim(),100)/100),new d(b,a)):c instanceof Array?(0<c.length&&(b=f.Util.convertToNumber((c[0]||"").toString().trim(),100)/100),1<c.length&&(a=f.Util.convertToNumber((c[1]||"").toString().trim(),100)/100),new d(b,a)):new d(f.Util.convertToNumber(c.x,100)/100,void 0===c.y?void 0:f.Util.convertToNumber(c.y,100)/100)};d.prototype.equals=function(c){return void 0===c?!1:this.x===c.x&&this.y===c.y};return d}();e.Scale=d})(f.Types||(f.Types={}));(function(e){e.convertToNumber=
function(d,h,c){void 0===h&&(h=0);void 0===c&&(c=!1);"string"==typeof d&&c&&(d=parseFloat(d));return isNaN(d)?h:Number(d)};e.convertToNumber2=function(d){return""===d?void 0:isNaN(d)?void 0:Number(d)}})(f.Util||(f.Util={}));(function(e){var d=function(){function d(c,b,a){void 0===c&&(c=0);void 0===b&&(b=0);void 0===a&&(a=0);this.x=c;this.y=b;this.z=a}d.fromJson=function(c){if(void 0===c||null===c)return new d;var b=0,a=0,g=0;return"number"===typeof c?new d(c):"string"===typeof c?(c=c.split(","),0<
c.length&&(b=f.Util.convertToNumber(c[0].trim())),1<c.length&&(a=f.Util.convertToNumber(c[1].trim())),2<c.length&&(g=f.Util.convertToNumber(c[2].trim())),new d(b,a,g)):c instanceof Array?(0<c.length&&(b=f.Util.convertToNumber((c[0]||"").toString().trim())),1<c.length&&(a=f.Util.convertToNumber((c[1]||"").toString().trim())),2<c.length&&(g=f.Util.convertToNumber((c[2]||"").toString().trim())),new d(b,a,g)):new d(f.Util.convertToNumber(c.x),f.Util.convertToNumber(c.y),f.Util.convertToNumber(c.z))};
d.prototype.equals=function(c){return void 0===c?!1:this.x===c.x&&this.y===c.y&&this.z===c.z};return d}();e.Xyz=d;d=function(){function d(c,b,a,g){void 0===g&&(g=1);this.position=c;this.rotation=b;this.scale=a;this.opacity=g;Math.max(0,Math.min(g,1))}d.prototype.duplicate=function(){return new d(new e.Xyz(this.position.x,this.position.y,this.position.z),new e.Xyz(this.rotation.x,this.rotation.y,this.rotation.z),new e.Scale(this.scale.x,this.scale.y),this.opacity)};d.prototype.adjust=function(c){this.position.x+=
c.position.x;this.position.y+=c.position.y;this.position.z+=c.position.z;this.rotation.x+=c.rotation.x;this.rotation.y+=c.rotation.y;this.rotation.z+=c.rotation.z;this.scale.x=Math.max(0,this.scale.x*c.scale.x);this.scale.y=Math.max(0,this.scale.y*c.scale.y);this.opacity=Math.max(0,Math.min(this.opacity*c.opacity,1))};d.prototype.renderCss=function(c,b,a){void 0===b&&(b={});void 0===a&&(a=!0);a&&(b.xPercent=-50,b.yPercent=-50);a=(c.width+c.height)/2;b.x=this.position.x/100*c.width;b.y=this.position.y/
100*c.height;b.z=this.position.z/100*a;b.zIndex=10*this.position.z;b.rotationX=this.rotation.x;b.rotationY=this.rotation.y;b.rotationZ=this.rotation.z;b.scaleX=this.scale.x;b.scaleY=this.scale.y;b.autoAlpha=this.opacity;return b};d.fromJson=function(c){c=c||{};var b=new e.Xyz,a=new e.Xyz,g=new e.Scale,t=1,p;for(p in c)if(c.hasOwnProperty(p)){var k=p.trim().toLowerCase();"position"===k||"pos"===k?b=e.Xyz.fromJson(c[p]):"rotation"===k||"rotate"===k||"rot"===k?a=e.Xyz.fromJson(c[p]):"scale"===k?g=e.Scale.fromJson(c[p]):
"opacity"===k&&(k=c[p],"number"===typeof k?t=k/100:"string"===typeof k?t=f.Util.convertToNumber(k,100)/100:k instanceof Array?0<k.length&&(t=f.Util.convertToNumber(k[0],100)/100):t=f.Util.convertToNumber(k.percent,100)/100)}return new d(b,a,g,Math.max(0,Math.min(t,1)))};d.prototype.equals=function(c){return void 0===c||void 0===c.position||void 0===c.rotation||void 0===c.scale||void 0===c.opacity||!1===this.position.equals(c.position)||!1===this.rotation.equals(c.rotation)||!1===this.scale.equals(c.scale)?
!1:this.opacity===c.opacity};return d}();e.Placement=d})(f.Types||(f.Types={}));(function(e){(function(d){var c=function(){function b(a,g){this.propertyTypes=a;this.properties=g}b.prototype.getPropertyOfType=function(a){for(var g=0;g<this.properties.length;g++){var b=this.properties[g];if(b.type===a)return b}};b.prototype.hasAnythingSet=function(){for(var a=0;a<this.properties.length;a++)for(var g=this.properties[a],b=0;b<g.type.variableTypes.length;b++)if(void 0!==g[g.type.variableTypes[b].jsonNames[0]].getValue())return!0;
return!1};return b}();d.PropertyList=c})(e.Properties||(e.Properties={}));var d=function(d){function c(b,a){d.call(this,[b]);this.flow=a;this.steps=[];this.items=[];this.story=a.story}__extends(c,d);c.prototype.insertStep=function(b){f.Util.insertIntoArray(this.steps,b,new e.Step);this.canvasScriptSet.insertStep(b);this.frameScriptSet.insertStep(b);this.pageScriptSet.insertStep(b);this.items.forEach(function(a){a.scriptSets.forEach(function(a){a.insertStep(b)})})};c.prototype.deleteStep=function(b){this.steps.splice(b,
1);this.canvasScriptSet.deleteStep(b);this.frameScriptSet.deleteStep(b);this.pageScriptSet.deleteStep(b);this.items.forEach(function(a){a.scriptSets.forEach(function(a){a.deleteStep(b)})})};c.prototype.deleteItem=function(b){this.items.splice(b,1)};return c}(e.Model);e.PageModel=d;(function(d){var c=function(b){function a(a,c,p,d,e){void 0===e&&(e=void 0);b.call(this,[]);this.story=a;this.flowType=c;this.placement=p;this.pageAspectRatio=d;this.defaultPageClass=e;this.pages=[]}__extends(a,b);a.prototype.getDefaultPageClassName=
function(){return this.defaultPageClass};a.prototype.getDefaultPageClassValue=function(){};a.prototype.serialize=function(){f.Util.logError("ProStyle.Models.Flows.Flow.serialize","Abstract base method called.")};a.prototype.createView=function(a,b){f.Util.logError("ProStyle.Models.Flows.Flow.createView","Abstract base method called.")};return a}(e.Model);d.FlowModel=c})(e.Flows||(e.Flows={}));d=function(){return function(d,c,b,a,g,t){this.canvas=d;this.frame=c;this.flows=b;this.classes=a;this.controllers=
g;this.usingDefaultControllers=t}}();e.Story=d;(function(d){var c=function(){function b(a){var g=this;this.type=a;a.variableTypes.forEach(function(a){g[a.jsonNames[0]]=a.createVariable()})}b.prototype.getVariable=function(a){return this[a]};b.prototype.renderLabel=function(){return this.type.renderLabel(this)};b.prototype.writeCssBuckets=function(a,g,b,c,d){var e=this;this.type.variableTypes.forEach(function(h){h=e[h.jsonNames[0]];h.type.writeCssBuckets(a,g,b,h,c,d)})};return b}();d.Property=c})(e.Properties||
(e.Properties={}));(function(d){(function(c){c[c.InitEvent=0]="InitEvent";c[c.StepEvent=1]="StepEvent";c[c.SwitchEvent=2]="SwitchEvent";c[c.ActionsOrphan=3]="ActionsOrphan";c[c.PropertyOrphan=4]="PropertyOrphan"})(d.ScriptType||(d.ScriptType={}));(function(c){c.fromString=function(b){b=(b||"step").toString().toLowerCase().trim();if("init"===b)return c.InitEvent;if(0===b.indexOf("step"))return c.StepEvent;if("switch"===b)return c.SwitchEvent;if("actionsorphan"===b)return c.ActionsOrphan;if("propertyorphan"===
b)return c.PropertyOrphan;f.Util.logError("ScriptType.fromString()","Unknown script type: "+b);return c.StepEvent};c.toString=function(b){return b===c.InitEvent?"init":b===c.StepEvent?"step":b===c.SwitchEvent?"switch":b===c.ActionsOrphan?"actionsorphan":b===c.PropertyOrphan?"propertyorphan":"init"}})(d.ScriptType||(d.ScriptType={}))})(e.Scripts||(e.Scripts={}))})(f.Models||(f.Models={}));(function(e){var d=f.Models,h=f.Models.Scripts,c=f.Models.Properties,b=function(){function a(a,b){this.model=a;
this.element=b;this.div=void 0;if(b instanceof HTMLDivElement||b instanceof HTMLBodyElement)this.div=b;b.proCache={}}a.prototype.initializeProperties=function(g,b,p,d,e,h,f,l){var m=this;void 0===f&&(f=void 0);void 0===l&&(l=void 0);TweenMax.set(b,{clearProps:"all"});void 0!==f&&TweenMax.set(b,f);var z=[];for(f=0;f<b.length;f++){var A={force3D:!0,element:b[f],elementIndex:f};h&&(A.xPercent=-50,A.yPercent=-50);z.push(A)}var x=[];e.properties.forEach(function(a){x["prostyle_"+a.type.jsonNames[0]]=a});
e.propertyTypes.forEach(function(a){var b=x["prostyle_"+a.jsonNames[0]];void 0===b&&(b=new c.Property(a));b.writeCssBuckets(g,m,p,z,!0)});a.postProcessCssBuckets(z,l,e.properties,p);for(f=0;f<b.length;f++)d.set(b[f],z[f],"initialize")};a.prototype.generateEventTimeline=function(a,b,c,k,h,f,n){var l=this;void 0===n&&(n=void 0);var m=new TimelineMax;k.actions.forEach(function(k){if(k.actionType===d.Actions.ActionType.SetProperties){var A=m.totalDuration(),x=e.Actions.SetPropertiesAction.generateTimeline(a,
l,b,k,m,c,n);void 0!==x&&(k=m.totalDuration(),(x=0<x?a.items[x-1].div:void 0)&&h.seek(f+"+="+k),k=new TimelineMax,e.Actions.SetPropertiesAction.generateMoveTo(a.div,x,k),m.add(k,A))}});h.add(m,f)};a.prototype.generateActionsForStep=function(a,b,c,d,e,f,n,l){var m=this;void 0===l&&(l=void 0);n.scripts.forEach(function(n){n.type===h.ScriptType.StepEvent&&n.stepIndex===e&&m.generateEventTimeline(a,b,c,n,d,f,l)})};a.postProcessCssBuckets=function(a,b,c,d){for(var e=0;e<a.length;e++){var h=a[e],f=h.element.proCache;
void 0!==f&&(void 0!==h.width&&(f.width=h.width),void 0!==h.height&&(f.height=h.height))}b&&b(c,a,d);a.forEach(function(a){delete a.element;delete a.elementIndex})};return a}();e.View=b})(f.Views||(f.Views={}));(function(e){var d=function(){function d(){}d.read=function(c,b){b.setup=b.setup||{};var a=(b.flowType||"simple").trim().toLowerCase(),g,t=d.lookupExtension(a);t&&t.deserialize?g=t.deserialize(c,b):(f.Util.logError("FlowReader.read()","Unknown Flow Type ("+a+")"),g=f.Extensions.Flows.Unknown.deserialize(c,
b));b.pages instanceof Array?b.pages.forEach(function(a){g.pages.push(e.PageReader.read(g,a))}):g.pages.push(e.PageReader.read(g,b.page||{}));return g};d.lookupExtension=function(c){for(var b in f.Extensions.Flows){var a=b.toLowerCase();if(c===a)return f.Extensions.Flows[b]}};return d}();e.FlowReader=d})(f.Serialization||(f.Serialization={}));(function(e){var d=f.Util,h=function(c){function b(a,g){var b=this;c.call(this,a.frame,d.createChildDivElement(g.div,"prostyle prostyle-camera"));this.story=
a;this.frame=g;this.flows=[];this.resize();a.flows.forEach(function(a,g){b.flows.push(a.createView(b,g))})}__extends(b,c);b.prototype.resize=function(){var a=this.frame.size,g=(100-this.story.frame.padding)/100,a=new f.Types.Size(a.width*g,a.height*g);1>a.width&&(a.width=1);1>a.height&&(a.height=1);this.size=a;TweenLite.set(this.div,{width:this.size.width,height:this.size.height,clearProps:"transform"})};b.prototype.stepStopped=function(a,g){a.pause(g.stopLabel)};return b}(e.View);e.CameraView=h;
d=f.Util;h=function(c){function b(a,g){c.call(this,a.frame,d.createChildDivElement(g.div,"prostyle prostyle-frame"));this.story=a;this.canvas=g;this.resize();this.camera=new e.CameraView(a,this)}__extends(b,c);b.prototype.stepStopped=function(a,g){a.pause(g.stopLabel)};b.prototype.resize=function(){var a=this.canvas.size,g=this.story.frame.aspectRatio,b=(100-this.story.canvas.padding)/100,a=new f.Types.Size(a.width*b,a.height*b);1>a.width&&(a.width=1);1>a.height&&(a.height=1);b=a.aspectRatio();b>
g?a.width=a.height*g:b<g&&(a.height=a.width/g);this.size=a;TweenLite.set(this.div,{width:this.size.width,height:this.size.height,clearProps:"transform"});void 0!==this.camera&&this.camera.resize()};return b}(e.View);e.FrameView=h})(f.Views||(f.Views={}));(function(e){(function(d){var e=function(){function c(){this.handlers=[]}c.prototype.on=function(b){this.handlers.push(b)};c.prototype.off=function(b){this.handlers=this.handlers.filter(function(a){return a!==b})};c.prototype.trigger=function(b){this.handlers&&
this.handlers.slice(0).forEach(function(a){return a(b)})};c.prototype.dispose=function(){this.handlers=[]};return c}();d.LiteEvent=e})(e.Events||(e.Events={}))})(f.Util||(f.Util={}));(function(e){var d=f.Util.Events,h=f.Views,c=function(){function b(a){this.frame=a;this.steps=[];this.animating=!1;this.currentSubStep=0;this.state={progress:0,time:0,step:void 0,subStep:0};this.progressChanged=new d.LiteEvent;this.stateChanged=new d.LiteEvent;this.stepComplete=new d.LiteEvent;this.refreshTimeline(a);
this.currentStep=this.getStepAtTime(0)}b.prototype.refreshTimeline=function(a){var g=this,b=0,c=!0;void 0!==this.timeline&&(b=this.timeline.time(),c=this.isPaused(),this.timeline.kill());this.timeline=(new h.Timeline(a,this.triggerProgressChanged.bind(this))).timeline;this.steps=[];var d=0;a.camera.flows.forEach(function(a){a.pages.forEach(function(a){a.steps.forEach(function(a){a.playerStepIndex=d;d++;g.steps.push(a);g.timeline.addCallback(g.triggerStepComplete.bind(g),a.stopLabel,[a])})})});this.currentStep=
void 0===this.currentStep?this.steps[0]:this.steps[Math.min(this.currentStep.playerStepIndex,this.steps.length-1)];this.moveTo(b,!1,!c)};b.prototype.isAtStoryStart=function(){return.02>this.timeline.time()};b.prototype.isAtStoryEnd=function(){var a=this.timeline.time(),g=this.timeline.duration();return.02>Math.abs(g-a)};b.prototype.isAtStepStart=function(a){void 0===a&&(a=!1);return this.currentStep.isAtStart(this.timeline.time())?(a&&this.timeline.seek(this.currentStep.startLabel),!0):!1};b.prototype.isAtStepEnd=
function(){return this.currentStep.isAtEnd(this.timeline.time())};b.prototype.isPaused=function(){return this.timeline.paused()};b.prototype.isFirstStep=function(){return 0===this.currentStep.playerStepIndex};b.prototype.isLastStep=function(){return this.currentStep.playerStepIndex===this.steps.length-1};b.prototype.triggerStateChanged=function(){this.stateChanged.trigger(this.timeline.paused())};b.prototype.triggerProgressChanged=function(){var a=this.state;a.time=this.timeline.time();a.progress=
this.timeline.progress();if(a.time<this.currentStep.startTime||a.time>this.currentStep.stopTime)this.currentStep=this.getStepAtTime(a.time);a.step=this.currentStep;this.progressChanged.trigger(a)};b.prototype.triggerStepComplete=function(a){this.animating||(this.timeline.pause(a.stopTime),this.stepComplete.trigger(a))};b.prototype.getNextStep=function(a){void 0===a&&(a=!0);var g=this.currentStep.playerStepIndex+1;g>=this.steps.length&&(g=a?0:this.currentStep.playerStepIndex);return this.steps[g]};
b.prototype.getPriorStep=function(){var a=this.currentStep.playerStepIndex-1;0>a&&(a=this.steps.length-1);return this.steps[a]};b.prototype.getStepAtTime=function(a){if(a>=this.currentStep.startTime&&a<=this.currentStep.stopTime)return this.currentStep;for(var g=this.steps[0],b=1;b<this.steps.length;b++){var c=this.steps[b];if(c.startTime>a)break;g=c}return g};b.prototype.moveTo=function(a,g,b){var c=this;.01>a&&(a=.01);var d=this.getStepAtTime(a),e=d.isAtStart(a),h=d.isAtEnd(a),f=Math.abs(this.timeline.time()-
a);0<f&&g?(g=Math.max(.1,Math.min(f/5,1.5)),this.alignSequencedItemsToStep(d,e,h,!0),this.animating=!0,(new TimelineLite).to(this.timeline,g,{time:a,ease:Circ.easeOut,onComplete:function(){c.timeline.pause(a);c.animating=!1;b&&c.thenPlay(h,!0);c.triggerProgressChanged();c.triggerStateChanged()}})):(this.timeline.pause(a),b&&this.thenPlay(h),this.triggerProgressChanged())};b.prototype.thenPlay=function(a,g){void 0===g&&(g=!0);a?0<this.getRemainingSubStepCount()?this.playSubStep(this.currentSubStep+
1):(this.currentStep=this.getNextStep(!0),this.timeline.seek(this.currentStep.startTime,!0),this.isFirstStep()?this.alignSequencedItemsToStep(this.currentStep,!0,!1,!1):this.playSubStep(0,!1),g&&(this.timeline.play(),this.playSubStep(1))):(this.timeline.play(),this.playSubStep(1));this.triggerStateChanged()};b.prototype.seek=function(a,g){void 0===g&&(g=!1);a=Math.max(0,Math.min(a,1));var b=this.timeline.duration()*a;this.moveTo(b,g,!1);this.currentStep=this.getStepAtTime(b);this.alignSequencedItemsToStep(this.currentStep,
this.currentStep.isAtStart(b),this.currentStep.isAtEnd(b),!1)};b.prototype.seekStep=function(a,g){void 0===g&&(g=!1);this.timeline.pause();this.timeline.seek(a.startLabel);this.currentStep=a;this.alignSequencedItemsToStep(a,!0,!1,g);this.triggerProgressChanged();this.triggerStateChanged()};b.prototype.alignSequencedItemsToStep=function(a,g,b,c){var d=this;void 0===c&&(c=!1);var e=!0;this.steps.forEach(function(h){var f=h===a;f&&(e=!1);if(!f||!b){var l=0,l=h===a?g?0:1:e?-1:0;h.sequencedItems.forEach(function(a){a.moveToSubStep(l,
c,d.frame.camera.size)})}})};b.prototype.playSubStep=function(a,g){var b=this;void 0===g&&(g=!0);this.currentSubStep=a;this.currentStep.sequencedItems.forEach(function(c){c.moveToSubStep(a,g,b.frame.camera.size)});this.state.subStep=Math.max(0,this.currentSubStep-1);this.progressChanged.trigger(this.state)};b.prototype.getRemainingSubStepCount=function(){return Math.max(0,this.currentStep.getSubStepCount()-this.currentSubStep)};b.prototype.togglePlay=function(){this.isPaused()?this.isAtStoryEnd()?
this.seekStep(this.steps[0]):this.playCurrentStep():this.pause()};b.prototype.playCurrentStep=function(){this.isAtStepStart(!0)&&this.playSubStep(1);this.timeline.play();this.triggerStateChanged()};b.prototype.playCurrentStepDelayed=function(a){var g=this;clearTimeout(this.timeout);this.timeout=setTimeout(function(){g.playCurrentStep()},a)};b.prototype.playNextStep=function(a){void 0===a&&(a=!1);if(this.isAtStepStart())this.moveTo(this.currentStep.startTime,!1,!0);else{var g=!this.isLastStep()||this.isAtStoryEnd();
this.moveTo(this.currentStep.stopTime,a,g)}};b.prototype.playNextStepDelayed=function(a){var g=this;clearTimeout(this.timeout);this.timeout=setTimeout(function(){g.playNextStep()},a)};b.prototype.backStep=function(a){void 0===a&&(a=!1);this.isAtStepEnd()&&1<this.currentSubStep?this.playSubStep(this.currentSubStep-1):this.isFirstStep()&&(0<this.currentSubStep||this.timeline.time()>this.currentStep.startTime)?this.animating||(this.moveTo(this.currentStep.startTime,!0,!1),this.playSubStep(0)):this.isAtStoryStart()?
this.animating||(this.currentStep=this.steps[this.steps.length-1],this.timeline.pause(this.currentStep.stopTime),this.alignSequencedItemsToStep(this.currentStep,!1,!0,!1),this.playSubStep(this.currentStep.getSubStepCount()),this.triggerProgressChanged()):(this.currentStep=this.getPriorStep(),this.playSubStep(this.currentStep.getSubStepCount()),this.moveTo(this.currentStep.stopTime,a,!1))};b.prototype.getCurrentStep=function(){return this.currentStep};b.prototype.pause=function(){clearTimeout(this.timeout);
this.timeline.pause();this.triggerStateChanged()};return b}();e.Player=c})(f.Play||(f.Play={}));(function(e){var d=null;e.throttle=function(e,c){var b=this,a=arguments;return function(){clearTimeout(d);d=setTimeout(function(){e.apply(b,a)},c)}}})(f.Util||(f.Util={}));(function(e){var d=f.Util,h=function(c){function b(a,g){c.call(this,a.canvas,g);this.story=a;d.setElementText(g,"");this.fullScreen=g instanceof HTMLBodyElement;this.generateStyles();this.setCanvasSize();this.frame=new e.FrameView(this.story,
this);this.player=new f.Play.Player(this.frame);this.hideContextMenu()}__extends(b,c);b.prototype.startControllers=function(){var a=this;this.story.controllers.forEach(function(g){g.start(a,a.player)})};b.prototype.stopControllers=function(){this.story.controllers.forEach(function(a){a.stop()})};b.prototype.resize=function(a){void 0===a&&(a=!1);if(this.setCanvasSize()||a)this.frame.resize(),this.player.refreshTimeline(this.frame),this.story.controllers.forEach(function(a){a.resize()})};b.prototype.setCanvasSize=
function(){if(this.fullScreen)return this.size=new f.Types.Size(this.div.clientWidth,this.div.clientHeight),!0;var a=this.div.clientWidth;if(void 0!==this.size&&a===this.size.width)return!1;var g=this.story.canvas.padding/100*a;this.div.style.height=(a-g)/this.story.frame.aspectRatio+g+"px";TweenLite.set(this.div,{clearProps:"transform"});this.size=new f.Types.Size(this.div.clientWidth,this.div.clientHeight);return!0};b.prototype.generateStyles=function(){var a=d.getStyleElement("prostyle-styles"),
g={selectors:[]};this.fullScreen&&(g.selectors.push("html"),g.html={height:"100%"},g.selectors.push("body"),g.body={height:"100%",margin:0,overflow:"hidden"});g.selectors.push(".prostyle");g[".prostyle"]={position:"absolute",transform:"translate(-50%,-50%) translate3d(0, 0, 0)",top:"50%",left:"50%"};g.selectors.push(".prostyle.prostyle-frame");g[".prostyle.prostyle-frame"]={position:"relative"};g.selectors.push(".prostyle.prostyle-camera");g[".prostyle.prostyle-camera"]={position:"relative",transformStyle:"preserve-3d"};
g.selectors.push(".prostyle.prostyle-flow");g[".prostyle.prostyle-flow"]={width:"100%",height:"100%",transformStyle:"preserve-3d"};g.selectors.push(".prostyle.prostyle-page");g[".prostyle.prostyle-page"]={width:"100%",height:"100%",transformStyle:"preserve-3d"};g.selectors.push(".prostyle.prostyle-item");g[".prostyle.prostyle-item"]={userSelect:"none",whiteSpace:"nowrap"};g.selectors.push(".prostyle.prostyle-item.unknown");g[".prostyle.prostyle-item.unknown"]={fontSize:"24px",fontWeight:"bold",color:"#C00",
padding:"1% 1%",backgroundColor:"#FFF",border:"solid 3px #C00",opacity:.6};g.selectors.push(".prostyle.prostyle-layer");g[".prostyle.prostyle-layer"]={transformStyle:"preserve-3d"};g.selectors.push(".prostyle.prostyle-text");g[".prostyle.prostyle-text"]={userSelect:"none",whiteSpace:"nowrap",transformStyle:"preserve-3d"};g.selectors.push(".prostyle-text-line");g[".prostyle-text-line"]={position:"relative",display:"block",transformStyle:"preserve-3d"};g.selectors.push(".prostyle-text-line-stacked");
g[".prostyle-text-line-stacked"]={position:"absolute",display:"block",transformStyle:"preserve-3d"};g.selectors.push(".prostyle-text-word");g[".prostyle-text-word"]={position:"relative",display:"inline-block",transformStyle:"preserve-3d"};g.selectors.push(".prostyle-text-word-stacked");g[".prostyle-text-word-stacked"]={position:"absolute",display:"inline-block",transformStyle:"preserve-3d"};g.selectors.push(".prostyle-text-char");g[".prostyle-text-char"]={position:"relative",display:"inline-block"};
g.selectors.push(".prostyle-text-char-stacked");g[".prostyle-text-char-stacked"]={position:"absolute",display:"inline-block"};a.innerHTML=d.encodeStyleSheet(g)};b.prototype.hideContextMenu=function(){this.div.oncontextmenu=function(a){}};return b}(e.View);e.CanvasView=h})(f.Views||(f.Views={}));(function(e){var d=function(){function d(c){this.name=c}d.prototype.start=function(c,b){f.Util.logError("ProStyle.Controllers.Controller.start","Abstract base method called")};d.prototype.stop=function(){f.Util.logError("ProStyle.Controllers.Controller.stop",
"Abstract base method called")};d.prototype.resize=function(){};d.prototype.serialize=function(){f.Util.logError("ProStyle.Controllers.Controller.serialize","Abstract base method called")};return d}();e.Controller=d})(f.Controllers||(f.Controllers={}));(function(e){(function(d){(function(d){var c=function(b){function a(a,c,d){void 0===a&&(a=!0);void 0===c&&(c=!1);void 0===d&&(d=!1);b.call(this,"auto");this._start=a;this._stepAdvance=c;this._restart=d;this.autoStart=!0;this.autoStartDelay=0;this.autoStepAdvance=
!1;this.autoStepAdvanceDelay=0;this.autoRestart=!1;this.autoRestartDelay=0;this.player=this.canvas=this.stepCompleteBound=void 0;this.stepCompleteBound=this.stepComplete.bind(this);"boolean"==typeof a?this.autoStart=a:"number"==typeof a&&(this.autoStartDelay=Math.max(0,a));"boolean"==typeof c?this.autoStepAdvance=c:"number"==typeof c&&(this.autoStepAdvance=!0,this.autoStepAdvanceDelay=Math.max(0,c));"boolean"==typeof d?this.autoRestart=d:"number"==typeof d&&(this.autoRestart=!0,this.autoRestartDelay=
Math.max(0,d))}__extends(a,b);a.prototype.start=function(a,b){this.stop();this.canvas=a;this.player=b;b.stepComplete.on(this.stepCompleteBound);b.pause();this.autoStart&&b.playCurrentStepDelayed(this.autoRestartDelay)};a.prototype.stop=function(){void 0!==this.player&&(this.player.stepComplete.off(this.stepCompleteBound),this.player=this.canvas=void 0)};a.prototype.stepComplete=function(a){var b=this.player;b.pause();var c=b.isAtStoryEnd(),d=c?this.autoRestartDelay:this.autoStepAdvanceDelay;(c?this.autoRestart:
this.autoStepAdvance)?(a=void 0==a.step.autoAdvanceDelay?d:f.Util.convertToNumber(a.step.autoAdvanceDelay),b.playNextStepDelayed(Math.max(0,a))):b.timeline.seek(a.stopTime,!0)};a.prototype.resize=function(){};a.prototype.serialize=function(){return d.serialize(this)};return a}(f.Controllers.Controller);d.AutoController=c})(d.Auto||(d.Auto={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.deserialize=function(c){return new d.AutoController(c.start,c.stepAdvance,c.restart)}})(d.Auto||
(d.Auto={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.serialize=function(c){var b={};b.start=c._start;b.stepAdvance=c._stepAdvance;b.restart=c._restart;return b}})(d.Auto||(d.Auto={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){var c=function(b){function a(a){void 0===a&&(a="");b.call(this,"track");this.cssClass=a;this.div=this.player=this.canvas=this.progressBound=void 0;this.progressBound=this.progress.bind(this)}__extends(a,b);a.prototype.start=function(a,
b){this.stop();this.canvas=a;this.player=b;this.div=f.Util.createChildDivElement(a.div);this.cssClass?this.div.classList.add(this.cssClass):TweenLite.set(this.div,{position:"absolute",backgroundColor:"black",color:"white",fontSize:14,padding:3,top:0,left:0});this.player.progressChanged.on(this.progressBound)};a.prototype.stop=function(){void 0!==this.player&&(this.player.progressChanged.off(this.progressBound),this.canvas.div.removeChild(this.div),this.player=this.canvas=this.div=void 0)};a.prototype.progress=
function(a){this.div.innerHTML=a.time.toFixed(3)+" ("+Math.round(100*a.progress)+"%) "+a.step.label+a.subStep};a.prototype.resize=function(){};a.prototype.serialize=function(){return d.serialize(this)};return a}(f.Controllers.Controller);d.DebugController=c})(d.Debug||(d.Debug={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.deserialize=function(c){return new d.DebugController(c.cssClass)}})(d.Debug||(d.Debug={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.serialize=
function(c){var b={};c.cssClass&&(b.cssClass=c.cssClass);return b}})(d.Debug||(d.Debug={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){var c=f.Util,b=function(){function a(a,b){this.player=a;this.controller=b;this.keyupBound=this.keydownBound=void 0;this.map={};this.keydownBound=this.keydown.bind(this);this.keyupBound=this.keyup.bind(this);var c=b.keyMap||{},d=this.getDefaultKeys(),e={},h;h=0+this.mapKeys(e,c.end||d.end,this.end.bind(this));h+=this.mapKeys(e,c.start||d.start,this.start.bind(this));
h+=this.mapKeys(e,c.back||d.back,this.back.bind(this));h+=this.mapKeys(e,c.pause||d.pause,this.pause.bind(this));h+=this.mapKeys(e,c.play||d.play,this.play.bind(this));h+=this.mapKeys(e,c.togglePlay||d.togglePlay,this.togglePlay.bind(this));h+=this.mapKeys(e,c.playNext||d.playNext,this.playNext.bind(this));this.map=e;0<h&&this.listenForKeyPresses()}a.prototype.getDefaultKeys=function(){return{play:[13,116],pause:[19,27],togglePlay:[32],back:[8,33,37,38,188],playNext:[34,39,40,9],start:[36,190],end:[35]}};
a.prototype.listenForKeyPresses=function(){document.addEventListener("keydown",this.keydownBound,!1);document.addEventListener("keyup",this.keyupBound,!1)};a.prototype.keydown=function(a){if(!a.ctrlKey){var b=a.keyCode;(this.map[b]instanceof Function||9===b)&&a.preventDefault()}};a.prototype.keyup=function(a){if(!a.ctrlKey){var b=a.keyCode,c=this.map[b];if(c instanceof Function||9===b)c instanceof Function&&c(),a.preventDefault()}};a.prototype.stop=function(){document.removeEventListener("keydown",
this.keydownBound,!1);document.removeEventListener("keyup",this.keyupBound,!1)};a.prototype.mapKeys=function(a,b,d){var e=0;b instanceof Array&&b.forEach(function(b){b=c.convertToNumber(b);0<b&&(a[b]=d,e++)});return e};a.prototype.play=function(){this.player.playCurrentStep()};a.prototype.pause=function(){this.player.pause()};a.prototype.togglePlay=function(){this.player.togglePlay()};a.prototype.back=function(){this.player.backStep(!0)};a.prototype.playNext=function(){this.player.playNextStep(!0)};
a.prototype.start=function(){this.player.seekStep(this.player.steps[0],!1)};a.prototype.end=function(){this.player.seekStep(this.player.steps[0],!1);this.player.backStep(!1)};return a}();d.KeyboardListener=b})(d.Keyboard||(d.Keyboard={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){var c=function(b){function a(a){b.call(this,"keyboard");this.keyMap=a;this.listener=this.player=this.canvas=void 0}__extends(a,b);a.prototype.start=function(a,b){this.stop();this.canvas=a;this.player=
b;this.listener=new d.KeyboardListener(this.player,this)};a.prototype.stop=function(){void 0!==this.player&&(this.listener.stop(),this.player=this.canvas=this.listener=void 0)};a.prototype.serialize=function(){return d.serialize(this)};return a}(f.Controllers.Controller);d.KeyboardController=c})(d.Keyboard||(d.Keyboard={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.deserialize=function(c){return new d.KeyboardController(c.keys)}})(d.Keyboard||(d.Keyboard={}))})(e.Controllers||
(e.Controllers={}));(function(d){(function(d){d.serialize=function(c){return{}}})(d.Keyboard||(d.Keyboard={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){var c=function(b){function a(a){void 0===a&&(a=.01);b.call(this,"resize");this.throttleDelay=a;this.canvasResize=void 0}__extends(a,b);a.prototype.start=function(a,b){this.stop();this.canvasResize=a.resize.bind(a);0<this.throttleDelay?window.addEventListener("resize",f.Util.throttle(this.canvasResize,1E3*this.throttleDelay),!1):
window.addEventListener("resize",this.canvasResize,!1)};a.prototype.stop=function(){void 0!==this.canvasResize&&(window.removeEventListener("resize",this.canvasResize,!1),this.canvasResize=void 0)};a.prototype.resize=function(){};a.prototype.serialize=function(){return d.serialize(this)};return a}(f.Controllers.Controller);d.ResizeController=c})(d.Resize||(d.Resize={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.deserialize=function(c){c=f.Util.convertToNumber(c.throttleDelay);
return new d.ResizeController(c)}})(d.Resize||(d.Resize={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.serialize=function(c){return{}}})(d.Resize||(d.Resize={}))})(e.Controllers||(e.Controllers={}))})(f.Extensions||(f.Extensions={}));(function(e){e.logError=function(d,e){console.log("ProStyle Error: "+d+" - "+e)};e.querySelector=function(d,f){void 0===f&&(f=document);try{return f.querySelector(d)}catch(c){e.logError("Util.querySelector",c.message)}};e.createChildDivElement=
function(d,e){void 0===e&&(e=void 0);var c=document.createElement("div");e&&(c.className=e);d.appendChild(c);return c}})(f.Util||(f.Util={}));(function(e){(function(d){(function(d){var c=f.Util,b=f.Svg,a=function(){function a(g,b,c){this.canvas=g;this.player=b;this.controller=c;this.COLOR="#BBB";this.HIGHLIGHT_COLOR="#FFF";this.BACK_COLOR="rgba(0,0,0,0.5)";this.STEP_COLOR_1="#222";this.STEP_COLOR_2="#000";this.divScrubberStep=[];this.progress=0;this.generateStyles();this.setupButtons();this.setupScrubber();
this.setupPlayerEvents();this.setupMenuOnMouseMove();this.resize()}a.prototype.setupButtons=function(){var a=this.canvas.player;this.bgDiv=c.createChildDivElement(this.canvas.div,this.bgClass);this.logoDiv=this.addButton("ProStyle",b.logo.svg,function(){window.open("http://prostyle.io/","_blank")});this.backDiv=this.addButton("Back",b.toStart.svg,function(){a.backStep(!0)});this.playDiv=this.addButton("Play",b.play.svg,function(){a.togglePlay()});this.nextDiv=this.addButton("Play Next",b.fastForward.svg,
function(){a.playNextStep(!0)})};a.prototype.setupScrubber=function(){var a=this.canvas.player;this.divScrubber=c.createChildDivElement(this.bgDiv,this.scrubberClass);this.divScrubberBar=c.createChildDivElement(this.divScrubber,this.scrubberBarClass);for(a=a.steps.length-1;0<=a;a--)this.divScrubberStep.push(c.createChildDivElement(this.divScrubberBar,this.scrubberStepClass));this.divScrubberProgress=c.createChildDivElement(this.divScrubberBar,this.scrubberProgressClass);this.divScrubberHoverPoint=
c.createChildDivElement(this.divScrubberBar,this.scrubberHoverPointClass);this.divScrubberHoverText=c.createChildDivElement(this.divScrubber,this.scrubberHoverTextClass);this.divScrubber.onmousemove=this.scrubberMouseMove.bind(this);this.divScrubber.onclick=this.scrubberMouseClick.bind(this)};a.prototype.scrubberMouseMove=function(a){var g=this.canvas.div.getBoundingClientRect(),b=this.canvas.player,d=this.scrubberSize,e=d.width-d.barHeight,f=d.barHeight/2;a=Math.max(f,Math.min(a.clientX-g.left-d.left,
d.width-f))-d.barHeight;this.divScrubberHoverPoint.style.left=(a+f+f/2-1).toString()+"px";b=b.timeline.duration()*(a+f)/e;this.divScrubberHoverText.style.left=a.toString()+"px";c.setElementText(this.divScrubberHoverText,b.toFixed(2))};a.prototype.scrubberMouseClick=function(a){var g=this.canvas.div.getBoundingClientRect(),b=this.canvas.player,c=this.scrubberSize,d=c.width-c.barHeight,e=c.barHeight/2;a=Math.max(e,Math.min(a.clientX-g.left-c.left,c.width-e))-c.barHeight;b.seek((a+e)/d,!0)};a.prototype.setupPlayerEvents=
function(){var a=this.canvas.player;a.progressChanged.on(this.progressChanged.bind(this));a.stateChanged.on(this.stateChanged.bind(this))};a.prototype.setupMenuOnMouseMove=function(){var a=this.canvas.div,g=this.canvas.fullScreen,b=c.throttle(function(){a.classList.remove("mouseMovement");g&&(a.style.cursor="none")},1500);a.onmousemove=function(c){a.classList.add("mouseMovement");g&&(a.style.cursor="auto");b()}};a.prototype.progressChanged=function(a){this.progress=a.progress;this.updateScrubberProgress()};
a.prototype.stateChanged=function(a){this.playDiv.innerHTML=a?b.play.svg:b.pause.svg};a.prototype.resize=function(){var a=this.canvas.div.clientWidth,g=this.canvas.div.clientHeight,b=Math.min(Math.max(40,Math.min(a/12,200)),Math.max(40,Math.min(g/12,200))),c=Math.max(5,b/3);TweenMax.set(this.bgDiv,{left:0,top:g-b,width:a,height:b});var g=.9*b,d=.88*b,e=.53*b,f=.6*b,h=a-d-e-f-3.2*c;TweenMax.set(this.logoDiv,{left:c/2,top:0,height:b,width:g});TweenMax.set(this.nextDiv,{left:a-d-c,top:0,height:b,width:d});
TweenMax.set(this.playDiv,{left:a-d-e-2*c,top:0,height:b,width:e});TweenMax.set(this.backDiv,{left:h,top:0,height:b,width:f});this.scrubberSize={left:g+c,width:h-g-2*c,height:b,barHeight:b/3};this.resizeScrubber();this.updateScrubberProgress()};a.prototype.resizeScrubber=function(){var a=this,g=this.scrubberSize,b=this.canvas.player,c=b.steps.length-1,d=b.timeline.duration(),e=g.barHeight/2,f=g.width-g.barHeight;this.divScrubber.style.left=g.left+"px";this.divScrubber.style.width=g.width+"px";this.divScrubber.style.height=
g.height+"px";this.divScrubberBar.style.width=g.width+"px";this.divScrubberBar.style.top=(g.height-g.barHeight)/2+"px";this.divScrubberBar.style.height=g.barHeight+"px";this.divScrubberBar.style.borderRadius=e+"px";b.steps.forEach(function(b,h){var k=a.divScrubberStep[c-h];k.style.left=(f*b.startTime/d).toString()+"px";k.style.width=(f*b.time/d+g.barHeight).toString()+"px";k.style.height=g.barHeight+"px";k.style.borderRadius=e+"px"});this.divScrubberHoverPoint.style.height=e+"px";this.divScrubberHoverPoint.style.width=
e+"px";this.divScrubberHoverPoint.style.top=(g.barHeight/4-1).toString()+"px";this.divScrubberHoverPoint.style.borderRadius=e+"px";this.divScrubberHoverText.style.fontSize=.9*g.barHeight+"px";this.divScrubberProgress.style.height=g.barHeight+"px";this.divScrubberProgress.style.borderRadius=e+"px";this.updateScrubberProgress()};a.prototype.updateScrubberProgress=function(){var a=this.scrubberSize;this.divScrubberProgress.style.width=((a.width-a.barHeight+2)*this.progress+a.barHeight).toString()+"px"};
a.prototype.generateStyles=function(){var a=(new Date).getTime().toString();this.bgClass="controls-bg-"+a;this.btnClass="controls-btn-"+a;this.scrubberClass="scrubber-"+a;this.scrubberBarClass="scrubber-back-"+a;this.scrubberStepClass="scrubber-step-"+a;this.scrubberProgressClass="scrubber-progress-"+a;this.scrubberHoverPointClass="scrubber-point-"+a;this.scrubberHoverTextClass="scrubber-text-"+a;var a=c.getStyleElement("prostyle-track-controls-"+a),g={selectors:[]};g.selectors.push("."+this.bgClass);
g["."+this.bgClass]={transition:"opacity 300ms ease-in-out, transform 300ms ease-in-out",backgroundColor:this.controller.backColor||this.BACK_COLOR,position:"absolute",display:"inline-block",opacity:0,transform:"translate3d(0, 0, 20px)"};g.selectors.push(".mouseMovement ."+this.bgClass);g[".mouseMovement ."+this.bgClass]={opacity:.3,transform:"translate3d(0, 0, 0)"};g.selectors.push("."+this.bgClass+":hover");g["."+this.bgClass+":hover"]={opacity:1};g.selectors.push(".prostyle:hover + ."+this.bgClass);
g[".prostyle:hover + ."+this.bgClass]={opacity:.5};g.selectors.push("."+this.bgClass+" div");g["."+this.bgClass+" div"]={position:"absolute"};g.selectors.push("."+this.btnClass);g["."+this.btnClass]={cursor:"pointer"};g.selectors.push("."+this.btnClass+" svg");g["."+this.btnClass+" svg"]={fill:this.controller.color||this.COLOR,width:"100%",height:"100%"};g.selectors.push("."+this.btnClass+":hover svg");g["."+this.btnClass+":hover svg"]={fill:this.controller.highlightColor||this.HIGHLIGHT_COLOR};g.selectors.push("."+
this.scrubberClass);g["."+this.scrubberClass]={cursor:"none"};g.selectors.push("."+this.scrubberBarClass);g["."+this.scrubberBarClass]={};g.selectors.push("."+this.scrubberStepClass);g["."+this.scrubberStepClass]={borderRight:"solid 2px "+(this.controller.backColor||this.BACK_COLOR),backgroundColor:this.controller.stepColor1||this.STEP_COLOR_1,background:"linear-gradient(to right, "+(this.controller.stepColor1||this.STEP_COLOR_1)+", "+(this.controller.stepColor2||this.STEP_COLOR_2)+")"};g.selectors.push("."+
this.scrubberProgressClass);g["."+this.scrubberProgressClass]={backgroundColor:this.controller.color||this.COLOR};g.selectors.push("."+this.scrubberClass+":hover ."+this.scrubberProgressClass);g["."+this.scrubberClass+":hover ."+this.scrubberProgressClass]={backgroundColor:this.controller.highlightColor||this.HIGHLIGHT_COLOR};g.selectors.push("."+this.scrubberHoverPointClass);g["."+this.scrubberHoverPointClass]={border:"solid 1px "+(this.controller.backColor||this.BACK_COLOR),backgroundColor:this.controller.highlightColor||
this.HIGHLIGHT_COLOR,display:"none"};g.selectors.push("."+this.scrubberClass+":hover ."+this.scrubberHoverPointClass);g["."+this.scrubberClass+":hover ."+this.scrubberHoverPointClass]={display:"block"};g.selectors.push("."+this.scrubberHoverTextClass);g["."+this.scrubberHoverTextClass]={color:this.controller.color||this.COLOR,fontFamily:"font-family: arial, helvetica, sans-serif",display:"none"};g.selectors.push("."+this.scrubberClass+":hover ."+this.scrubberHoverTextClass);g["."+this.scrubberClass+
":hover ."+this.scrubberHoverTextClass]={display:"block"};a.innerHTML=c.encodeStyleSheet(g)};a.prototype.addButton=function(a,g,b){var d=c.createChildDivElement(this.bgDiv,this.btnClass);d.className=this.btnClass;d.innerHTML=g;d.title=a;d.addEventListener("mousedown",function(a){b();a.preventDefault();a.stopPropagation();return!1});return d};return a}();d.TrackBar=a})(d.Track||(d.Track={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){var c=function(b){function a(a,c,d,e,f,h){void 0===
a&&(a=!0);void 0===c&&(c=void 0);void 0===d&&(d=void 0);void 0===e&&(e=void 0);void 0===f&&(f=void 0);void 0===h&&(h=void 0);b.call(this,"track");this.autoHide=a;this.color=c;this.highlightColor=d;this.backColor=e;this.stepColor1=f;this.stepColor2=h;this.trackBar=this.player=this.canvas=void 0}__extends(a,b);a.prototype.start=function(a,b){this.stop();this.canvas=a;this.player=b;this.trackBar=new d.TrackBar(a,b,this)};a.prototype.stop=function(){void 0!==this.player&&(this.player=this.canvas=this.trackBar=
void 0)};a.prototype.resize=function(){void 0!==this.trackBar&&this.trackBar.resize()};a.prototype.serialize=function(){return d.serialize(this)};return a}(f.Controllers.Controller);d.TrackController=c})(d.Track||(d.Track={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.deserialize=function(c){return new d.TrackController(c.autoHide,c.color,c.highlightColor,c.backColor,c.stepColor1,c.stepColor2)}})(d.Track||(d.Track={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.serialize=
function(c){var b={};b.autoHide=c.autoHide;c.color&&(b.color=c.color);c.highlightColor&&(b.highlightColor=c.highlightColor);c.backColor&&(b.backColor=c.backColor);c.stepColor1&&(b.stepColor1=c.stepColor1);c.stepColor2&&(b.stepColor2=c.stepColor2);return b}})(d.Track||(d.Track={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){var c=function(b){function a(a){b.call(this,a.controllerType);this.originalJson=a}__extends(a,b);a.prototype.start=function(a,b){};a.prototype.stop=function(){};
a.prototype.resize=function(){};a.prototype.serialize=function(){return d.serialize(this)};return a}(f.Controllers.Controller);d.UnknownController=c})(d.Unknown||(d.Unknown={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.deserialize=function(c){return new d.UnknownController(c)}})(d.Unknown||(d.Unknown={}))})(e.Controllers||(e.Controllers={}));(function(d){(function(d){d.serialize=function(c){return c.originalJson}})(d.Unknown||(d.Unknown={}))})(e.Controllers||(e.Controllers=
{}));(function(d){(function(d){var c=function(b){function a(a,c,d,e){b.call(this,a,"simple",c,e,d)}__extends(a,b);a.prototype.getDefaultPageClassName=function(){return this.defaultPageClass||"page"};a.prototype.serialize=function(){return d.serialize(this)};a.prototype.createView=function(a,b){return new d.SimpleFlowView(this,a,b)};return a}(f.Models.Flows.FlowModel);d.SimpleFlowModel=c})(d.Simple||(d.Simple={}))})(e.Flows||(e.Flows={}))})(f.Extensions||(f.Extensions={}));(function(e){(function(d){var h=
f.Util,c=function(b){function a(a,c,d){void 0===d&&(d=void 0);b.call(this,a,d||h.createChildDivElement(c.div,"prostyle prostyle-item"));this.model=a;this.itemViewSet=c}__extends(a,b);a.prototype.initializeItem=function(a,b){var c=b.getContainedSize(this.model.itemModelSet.flow.pageAspectRatio);this.initializeProperties(this.model.itemModelSet.flow.story,[this.element],c,a,this.model.init,!1)};a.prototype.generateStepActions=function(a,b,c,d,e){this.generateActionsForStep(a,[this.element],b,c,d,e,
this.model.scriptSet)};return a}(e.View);d.ItemView=c})(e.Items||(e.Items={}))})(f.Views||(f.Views={}));(function(e){e.logWarning=function(d,e){console.log("ProStyle Warning: "+d+" - "+e)}})(f.Util||(f.Util={}));(function(e){(function(d){(function(d){var c=function(){function b(a,g,b,c,d,e){this.label=a;this.jsonNames=g;this.cssName=b;this.text=c;this.defaultValue=d;this.alwaysInitializeCss=e;void 0===d&&f.Util.logWarning("VariableType<T>",b+" has a default value of undefined.")}b.prototype.createVariable=
function(){return new d.Variable(this)};b.prototype.scrubValue=function(a){return a};b.prototype.writeCssBuckets=function(a,g,b,c,d,e){var f=this;if(void 0!==this.cssName){var h=c.getValue(e);void 0!==h&&(e&&h===this.defaultValue&&!this.alwaysInitializeCss||d.forEach(function(c){f.writeCssBucket(a,g,b,c,h)}))}};b.prototype.writeCssBucket=function(a,g,b,c,d){c[this.cssName]=d};return b}();d.VariableType=c;c=function(b){function a(a,c,d,e,f){b.call(this,a,c,d,"",e,f)}__extends(a,b);a.prototype.scrubValue=
function(a){return void 0===a?"":a.toString()};return a}(d.VariableType);d.StringVariableType=c;c=function(b){function a(a,c,d,e,f){b.call(this,a,c,d,e,f)}__extends(a,b);a.prototype.writeCssBucket=function(a,b,c,d,e){d[this.cssName]=a.canvas.adjustBackgroundImage(e,c)};return a}(d.StringVariableType);d.BackgroundImageVariableType=c;c=function(b){function a(a,c,d,e,f,h){void 0===h&&(h=!1);b.call(this,a,c,d,"",!1,h);this.falseValue=e;this.trueValue=f}__extends(a,b);a.prototype.scrubValue=function(a){return!!a};
a.prototype.writeCssBucket=function(a,b,c,d,e){d[this.cssName]=e?this.trueValue:this.falseValue};return a}(d.VariableType);d.BooleanVariableType=c;c=function(b){function a(a,c,d,e,f,h){b.call(this,a,c,d,e,h);this.enumValues=f}__extends(a,b);a.prototype.scrubValue=function(a){if(void 0===a)return this.defaultValue;a=a.toString().trim().toLocaleLowerCase();for(var b=0;b<this.enumValues.length;b++)if(a===this.enumValues[b])return a;for(b=0;b<this.enumValues.length;b++)if(0===this.enumValues[b].indexOf(a))return this.enumValues[b];
return this.defaultValue};a.prototype.getValueByIndex=function(a){return 0>a||a>=this.enumValues.length?void 0:this.enumValues[a]};return a}(d.StringVariableType);d.EnumVariableType=c;c=function(b){function a(){b.call(this,"bullets",["style"],"listStyleType","none","arabic-indic armenian bengali cambodian circle cjk-ideographic decimal decimal-leading-zero devanagari disc georgian gujarati gurmukhi hebrew hiragana hiragana-iroha kannada katakana katakana-iroha khmer lao lower-alpha lower-armenian lower-greek lower-latin lower-roman malayalam mongolian myanmar oriya persian telugu thai tibetan square upper-alpha upper-latin upper-roman".split(" "),
!1)}__extends(a,b);a.prototype.writeCssBucket=function(a,b,c,d,e){d[this.cssName]=e;d.display="none"==e?"block":"list-item"};return a}(d.EnumVariableType);d.BulletsVariableType=c;c=function(b){function a(a,c,d,e,f){b.call(this,a,c,d,e,f)}__extends(a,b);a.prototype.scrubValue=function(a){return"boolean"===typeof a?a?"white":this.defaultValue:"number"===typeof a?"hsl("+Math.abs(a%360).toString()+", 50%, 50%)":"string"===typeof a?a:"black"};return a}(d.StringVariableType);d.ColorVariableType=c;c=function(b){function a(a,
c,d,e,f,h,n,l,m){b.call(this,a,c,d,l,h,m);this._minValue=e;this._maxNumber=f;this._decimalPlaces=n}__extends(a,b);a.prototype.scrubValue=function(a){a=f.Util.convertToNumber(a,this.defaultValue);var b=Math.pow(10,this._decimalPlaces);a=Math.round(a*b)/b;return a=Math.max(this._minValue,Math.min(a,this._maxNumber))};return a}(d.VariableType);d.NumberVariableType=c;c=function(b){function a(a,c,d,e,f,h,n,l,m){b.call(this,a,c,d,e,f,h,n,l,m)}__extends(a,b);a.prototype.writeCssBucket=function(a,b,c,d,e){d[this.cssName]=
e/100*((c.height+c.width)/2)+1;"z"===this.cssName&&(d.zIndex=e+1)};return a}(d.NumberVariableType);d.ContainerDepthPctVariableType=c;c=function(b){function a(a,c,d,e,f,h,n,l,m){b.call(this,a,c,d,e,f,h,n,l,m)}__extends(a,b);a.prototype.writeCssBucket=function(a,b,c,d,e){a=e/100*c.height;0<e&&1>a&&(a=1);d[this.cssName]=a};return a}(d.NumberVariableType);d.ContainerHeightPctVariableType=c;c=function(b){function a(a,c,d,e,f,h,n,l,m){b.call(this,a,c,d,e,f,h,n,l,m)}__extends(a,b);a.prototype.writeCssBucket=
function(a,b,c,d,e){d[this.cssName]=e/100*c.width};return a}(d.NumberVariableType);d.ContainerWidthPctVariableType=c})(d.Variables||(d.Variables={}))})(e.Properties||(e.Properties={}))})(f.Models||(f.Models={}));(function(e){(function(d){d[d.Back=0]="Back";d[d.Bounce=1]="Bounce";d[d.Circle=2]="Circle";d[d.Curve=3]="Curve";d[d.Elastic=4]="Elastic";d[d.Expo=5]="Expo";d[d.Linear=6]="Linear";d[d.Sine=7]="Sine";d[d.SlowMo=8]="SlowMo";d[d.SlowMoBack=9]="SlowMoBack";d[d.Stepped=10]="Stepped";d[d.Stop=11]=
"Stop";d[d.StopAndReturn=12]="StopAndReturn"})(e.EazeEffect||(e.EazeEffect={}));(function(d){d[d.Less=0]="Less";d[d.Normal=1]="Normal";d[d.More=2]="More";d[d.Extra=3]="Extra"})(e.EazeAmount||(e.EazeAmount={}));(function(d){d[d.In=0]="In";d[d.Out=1]="Out";d[d.InOut=2]="InOut"})(e.EazeEnding||(e.EazeEnding={}));var d=function(){function d(c,b,a){void 0===c&&(c=void 0);void 0===b&&(b=void 0);void 0===a&&(a=void 0);this.ease=this.ending=this.amount=this.effect=void 0;this.effect=void 0==c?d.DEFAULT_EFFECT:
c;this.amount=void 0==b?d.DEFAULT_AMOUNT:b;this.ending=void 0==a?d.DEFAULT_ENDING:a;b="easeOut";this.ending==e.EazeEnding.InOut?b="easeInOut":this.ending==e.EazeEnding.In&&(b="easeIn");c==e.EazeEffect.Linear?this.ease=Linear.easeNone:c==e.EazeEffect.Back?this.setBackEase(b):c==e.EazeEffect.Bounce?this.ease=Bounce[b]:c==e.EazeEffect.Circle?this.ease=Circ[b]:c==e.EazeEffect.Curve?this.setCurveEase(b):c==e.EazeEffect.Elastic?this.setElasticEase(b):c==e.EazeEffect.Expo?this.ease=Expo[b]:c==e.EazeEffect.Sine?
this.ease=Sine[b]:c==e.EazeEffect.SlowMo?this.setSlowMoEase(0):c==e.EazeEffect.SlowMoBack?this.setSlowMoEase(1):c==e.EazeEffect.Stepped?this.setSteppedEase():c==e.EazeEffect.Stop?this.setSlowMoEase(2):c==e.EazeEffect.StopAndReturn&&this.setSlowMoEase(2,!0)}d.prototype.setBackEase=function(c){this.ease=Back[c].config([1,1.9,3,4.1][this.amount])};d.prototype.setCurveEase=function(c){this.ease=[Power1,Power2,Power3,Power4][this.amount][c]};d.prototype.setElasticEase=function(c){this.ease=Elastic[c].config([.8,
1.1,1.25,1.75][this.amount],[.3,.26,.2,.15][this.amount])};d.prototype.setSlowMoEase=function(c,b){void 0===b&&(b=!1);var a=[.05,.5,.7,.9][this.amount],g=[.7,.6,.5,.4][this.amount];1==c?g=1/[.7,.682,.655,.64][this.amount]:2==c&&(g=1);this.ease=SlowMo.ease.config(a,g,b)};d.prototype.setSteppedEase=function(){this.ease=SteppedEase.config([3,6,12,24][this.amount])};d.getByText=function(c){c=c.trim().toLowerCase().split(" ");var b=d.DEFAULT_EFFECT,a=d.DEFAULT_AMOUNT,g=d.DEFAULT_ENDING;c.forEach(function(c){c=
c.trim();"back"==c&&(b=e.EazeEffect.Back);"bounce"==c&&(b=e.EazeEffect.Bounce);"circle"==c&&(b=e.EazeEffect.Circle);"curve"==c&&(b=e.EazeEffect.Curve);"elastic"==c&&(b=e.EazeEffect.Elastic);"expo"==c&&(b=e.EazeEffect.Expo);"linear"==c&&(b=e.EazeEffect.Linear);"sine"==c&&(b=e.EazeEffect.Sine);"slowmo"==c&&(b=e.EazeEffect.SlowMo);"slowmoback"==c&&(b=e.EazeEffect.SlowMoBack);"stepped"==c&&(b=e.EazeEffect.Stepped);"stop"==c&&(b=e.EazeEffect.Stop);"stopandreturn"==c&&(b=e.EazeEffect.StopAndReturn);"less"==
c&&(a=e.EazeAmount.Less);"normal"==c&&(a=e.EazeAmount.Normal);"more"==c&&(a=e.EazeAmount.More);"extra"==c&&(a=e.EazeAmount.Extra);"in"==c&&(g=e.EazeEnding.In);"out"==c&&(g=e.EazeEnding.Out);"inout"==c&&(g=e.EazeEnding.InOut)});return new d(b,a,g)};d.DEFAULT_EFFECT=e.EazeEffect.Expo;d.DEFAULT_AMOUNT=e.EazeAmount.Normal;d.DEFAULT_ENDING=e.EazeEnding.Out;d.DEFAULT=new d;return d}();e.Eaze=d})(f.Types||(f.Types={}));(function(e){(function(d){(function(d){var c=f.Types,b=function(a){function b(){a.call(this,
"ease",["ease"],"ease","",c.Eaze.DEFAULT,!1)}__extends(b,a);b.prototype.scrubValue=function(a){if("string"===typeof a)return c.Eaze.getByText(a)};b.prototype.writeCssBucket=function(a,b,g,c,d){c[this.cssName]=d.ease};return b}(d.VariableType);d.EaseVariableType=b;b=function(a){function b(g,c,d,e,f,h,l,m,z,A,x){a.call(this,g,c,d,e,f,h,l,A,x);this.inverted=z;this.offset=m}__extends(b,a);b.prototype.writeCssBucket=function(a,b,g,c,d){d+=this.offset;this.inverted&&(d=-d);c[this.cssName]=d};return b}(d.NumberVariableType);
d.NumberOffsetVariableType=b;c=f.Types;b=function(a){function b(g){a.call(this,g?"transform origin":"perspective origin",g?["transformOrigin","origin"]:["perspectiveOrigin","origin"],g?"transformOrigin":"perspectiveOrigin","",new c.Xyz(0,0,0),!1);this.transform=g}__extends(b,a);b.prototype.scrubValue=function(a){return"boolean"==typeof a?this.defaultValue:"number"==typeof a?this.scrubArray([a],!1):"string"==typeof a?this.scrubArray(a.split(" "),!1):a instanceof Array?this.scrubArray(a,!1):this.scrubArray([a.x,
a.y,a.z],!!(a.expand|a.expanded))};b.prototype.scrubArray=function(a,b){var g=new c.Xyz(this.defaultValue.x,this.defaultValue.y,this.defaultValue.z);g.useContainer=b;0<a.length&&(g.x=this.scrubString(a[0]));1<a.length&&(g.y=this.scrubString(a[1]));this.transform&&2<a.length&&(g.z=f.Util.convertToNumber(a[2],0,!0));return g};b.prototype.scrubString=function(a){a=(a||"").toString().trim().toLocaleLowerCase();return"left"===a?0:"right"===a?100:"top"===a?0:"bottom"===a?100:"center"===a?50:f.Util.convertToNumber(a,
0,!0)};b.prototype.writeCssBuckets=function(a,b,g,c,d,e){var f=this;a=c.getValue(e);if(void 0!==a&&(b=a.useContainer,!e||!a.equals(this.defaultValue)||this.alwaysInitializeCss)){var h;h=b?Math.round(a.x/100*g.width)+"px "+Math.round(a.y/100*g.height)+"px":Math.round(100*a.x)/100+50+"% "+(Math.round(100*a.y)/100+50)+"%";this.transform&&(h+=" "+Math.round((g.height+g.width)/2*a.z/100)+"px");d.forEach(function(a){a[f.cssName]=h})}};return b}(d.VariableType);d.OriginVariableType=b;b=function(a){function b(g,
c,d,e,f,h,l){a.call(this,g,c,d,e,f,h,0,"%",l)}__extends(b,a);b.prototype.writeCssBucket=function(a,b,g,c,d){c[this.cssName]=d/100};return b}(d.NumberVariableType);d.PercentVariableType=b})(d.Variables||(d.Variables={}))})(e.Properties||(e.Properties={}))})(f.Models||(f.Models={}));(function(e){e.getSign=function(d){return d?0>d?-1:1:0}})(f.Util||(f.Util={}));(function(e){var d=function(){function d(c,b,a,g,e,f){void 0===c&&(c=0);void 0===b&&(b=0);void 0===a&&(a=0);void 0===g&&(g="rgba(0,0,0,0.7)");
void 0===e&&(e=0);void 0===f&&(f=!1);this.x=c;this.y=b;this.blur=a;this.color=g;this.spread=e;this.inset=f}d.prototype.render=function(c,b,a){var g=(c+b)/2;c=Math.round(this.x/10*g)/10;b=Math.round(this.y/10*g)/10;var d=Math.round(this.blur/10*g)/10,g=Math.round(this.spread/10*g)/10;0===c&&0!==this.x&&(c=f.Util.getSign(this.x));0===b&&0!==this.y&&(b=f.Util.getSign(this.y));0===d&&0!==this.blur&&(d=f.Util.getSign(this.blur));0===g&&0!==this.spread&&(g=f.Util.getSign(this.spread));var d=Math.abs(d),
e=[];a&&this.inset&&e.push("inset");e.push(c.toString()+"px");e.push(b.toString()+"px");e.push(d.toString()+"px");a&&e.push(g.toString()+"px");"number"===typeof this.color?e.push("hsl("+Math.abs(this.color%360)+", 50%, 50%)"):e.push(this.color);return e.join(" ")};d.fromJson=function(c){c=c||[];if(!(c instanceof Array))return new d;var b=void 0,a=void 0,g=void 0,e=void 0,p=void 0,k=void 0;0<c.length&&void 0!==c[0]&&(b=f.Util.convertToNumber(c[0],0));1<c.length&&void 0!==c[1]&&(a=f.Util.convertToNumber(c[1],
0));2<c.length&&void 0!==c[2]&&(g=Math.max(0,f.Util.convertToNumber(c[2],0)));3<c.length&&void 0!==c[3]&&(e=c[3]);4<c.length&&void 0!==c[4]&&(p=f.Util.convertToNumber(c[4],0));5<c.length&&void 0!==c[5]&&(k=!!c[5]);return new d(b,a,g,e,p,k)};d.prototype.toJson=function(){var c=6;!0!==this.inset&&(c--,"rgba(0,0,0,0.5)"!==this.color&&(c--,0!==this.spread&&(c--,0!==this.blur&&c--)));var b=[];b.push(this.x);b.push(this.y);3<=c&&b.push(this.blur);4<=c&&b.push(this.spread);5<=c&&b.push(this.color.toString());
6<=c&&b.push(!!this.inset);return b};d.prototype.equals=function(c){return void 0===c||c.x!==this.x||c.y!==this.y||c.blur!==this.blur||c.color!==this.color||c.spread!==this.spread||c.inset!==this.inset?!1:!0};return d}();e.Shadow=d})(f.Types||(f.Types={}));(function(e){(function(d){(function(c){var b=function(a){function b(g,c){a.call(this,"shadow",["value"],g,"",[],!1);this.isBoxShadow=c}__extends(b,a);b.prototype.scrubValue=function(a){if(void 0===a||!(a instanceof Array)||0===a.length)return[];
var b=[];a[0]instanceof Array?a.forEach(function(a){b.push(f.Types.Shadow.fromJson(a))}):b.push(f.Types.Shadow.fromJson(a));return b};b.prototype.writeCssBucket=function(a,b,g,c,d){var e=this,f=[];d.forEach(function(a){f.push(a.render(g.width,g.height,e.isBoxShadow))});c[this.cssName]=0===f.length?"none":f.join(", ")};return b}(c.VariableType);c.ShadowVariableType=b;b=function(a){function b(){a.call(this,"align",["align"],"textAlign","inherit",["left","center","right","justify"],!1)}__extends(b,a);
return b}(c.EnumVariableType);c.TextAlignVariableType=b;b=function(a){function b(){a.call(this,"width",["width"],"width",0,Number.MAX_VALUE,Number.MAX_VALUE,2,"",!1)}__extends(b,a);b.prototype.writeCssBucket=function(a,b,g,c,d){d===Number.MAX_VALUE?c.clearProps="whiteSpace,width":(c.width=d/100*g.width,c.whiteSpace="normal")};return b}(c.NumberVariableType);c.TextWidthVariableType=b})(d.Variables||(d.Variables={}));var e=function(){function c(b,a,g){this.label=b;this.jsonNames=a;this.variableTypes=
g}c.prototype.createPropertyFromArray=function(b){f.Util.logWarning("PropertyType.createPropertyFromArray()","Abstract method called");return new d.Property(this)};c.prototype.createPropertyFromNumber=function(b){f.Util.logWarning("PropertyType.createPropertyFromNumber()","Abstract method called");return new d.Property(this)};c.prototype.createPropertyFromString=function(b){f.Util.logWarning("PropertyType.createPropertyFromString()","Abstract method called");return new d.Property(this)};c.prototype.createPropertyFromBoolean=
function(b){var a=new d.Property(this);!1===b&&this.variableTypes.forEach(function(b){a[b.jsonNames[0]].setValue(b.defaultValue)});return a};c.prototype.createPropertyFromObject=function(b){var a=new d.Property(this);if(void 0===b)return a;var g=f.Util.lowercaseProperties(b);this.variableTypes.forEach(function(b){for(var c=0;c<b.jsonNames.length;c++){var d=b.jsonNames[c];if(g.hasOwnProperty(d)){a[b.jsonNames[0]].setValue(g[d]);break}}});return a};c.prototype.renderLabel=function(b){f.Util.logWarning("PropertyType.renderLabel()",
"Abstract method called");return"xxx"};c.prototype.countOfValues=function(b){var a=0;this.variableTypes.forEach(function(g){void 0!==b[g.jsonNames[0]].getValue()&&a++});return a};c.prototype.renderVariables=function(b,a,g){var c=[];this.variableTypes.forEach(function(d){d=b[d.jsonNames[0]].render(a,g);void 0!==d&&c.push(d)});var d=c.join(", ");0<d.length&&(d=(a?" ":": ")+d);return this.label+d};return c}();d.PropertyType=e})(e.Properties||(e.Properties={}));(function(d){var h=function(c){function b(a,
b,d,e,f){c.call(this,e);this.itemModelSet=a;this.itemType=b;this.typeLabel=d;this.scriptSets=f;this.scriptSet=f[0]}__extends(b,c);b.prototype.getScriptSet=function(a){var b=this.scriptSets;if(0>a||a>=b.length)a=0;return b[a]};b.prototype.getCountOfStepsUsed=function(){var a=1;this.scriptSets.forEach(function(b){a=Math.max(a,b.getCountOfStepsUsed())});return a};b.prototype.serialize=function(){f.Util.logError("ProStyle.Models.Items.Item.serialize","Abstract base method called.")};b.prototype.createView=
function(a){f.Util.logError("ProStyle.Models.Items.Item.createView","Abstract base method called.")};return b}(e.Model);d.ItemModel=h})(e.Items||(e.Items={}))})(f.Models||(f.Models={}));(function(e){(function(d){var e=function(c){function b(a,b){c.call(this,a,b);this.model=a}__extends(b,c);b.prototype.moveToSubStep=function(a,b,c){};b.prototype.getCountOfSubSteps=function(){return 0};return b}(d.ItemView);d.SequencedItemView=e})(e.Items||(e.Items={}))})(f.Views||(f.Views={}));(function(e){(function(d){var e=
function(){return function(c,b){this.scriptSet=c;this.type=b;this.y=this.x=0}}();d.Script=e;e=function(){function c(b,a,g){this.itemModelSet=b;this.name=a;this.itemProperties=g;this.scripts=[]}c.prototype.getCountOfStepsUsed=function(){var b=0;this.scripts.forEach(function(a){a.type===d.ScriptType.StepEvent&&(b=Math.max(b,a.stepIndex))});return b+1};c.prototype.insertStep=function(b){};c.prototype.deleteStep=function(b){var a=this,g=[];this.scripts.forEach(function(a){a.type===d.ScriptType.StepEvent&&
a.stepIndex===b&&g.push(a)});g.forEach(function(b){b=a.scripts.indexOf(b);a.scripts.splice(b,1)})};return c}();d.ScriptSet=e})(e.Scripts||(e.Scripts={}))})(f.Models||(f.Models={}));(function(e){(function(d){(function(d){var c=f.Models,b=c.Properties,a=c.Scripts,c=function(g){function c(d,e){g.call(this,d,"unknown","Unknown",[new b.PropertyList([],[])],[new a.ScriptSet(d,"unknown",[])]);this.unknownType=e}__extends(c,g);c.prototype.serialize=function(){return d.serialize(this)};return c}(c.Items.ItemModel);
d.UnknownItemModel=c})(d.Unknown||(d.Unknown={}))})(e.Items||(e.Items={}));(function(d){(function(d){d.deserialize=function(c,b){console.log(b);return new d.UnknownItemModel(c,b.itemType)}})(d.Unknown||(d.Unknown={}))})(e.Items||(e.Items={}))})(f.Extensions||(f.Extensions={}));(function(e){var d=f.Util,h=function(){function c(){}c.read=function(b,a){a=a||{};var g=(a.itemType||"text").trim().toLowerCase();if((g=c.lookupExtension(g))&&g.deserialize)return g.deserialize(b,a);d.logError("ItemReader.read()",
"Unknown Item Type ("+a.itemType+")");return f.Extensions.Items.Unknown.deserialize(b,a)};c.lookupExtension=function(b){for(var a in f.Extensions.Items){var g=a.toLowerCase();if(b===g)return f.Extensions.Items[a]}};return c}();e.ItemReader=h})(f.Serialization||(f.Serialization={}));(function(e){var d=f.Util,h=function(c){function b(a,g,f,p){var k=this;c.call(this,a,d.createChildDivElement(g.div,"prostyle prostyle-page"));this.model=a;this.flow=g;this.flowIndex=f;this.pageIndex=p;this.steps=[];this.items=
[];b.createItems(this,a.items);a.steps.forEach(function(a,b){var g=[];k.items.forEach(function(a){a instanceof e.Items.SequencedItemView&&a.model.sequenceOnStepIndex===b&&g.push(a)});k.steps.push(new e.Step(a,f,p,b,g))})}__extends(b,c);b.createItems=function(a,b){b instanceof Array&&b.forEach(function(b){a.items.push(b.createView(a))})};b.prototype.generateStepsActions=function(a,b){var c=this;this.steps.forEach(function(d,e){d.startTime=(void 0===b?0:b.stopTime)+.01;b=d;0<e&&a.addLabel(d.startLabel,
d.startTime);var f=c.flow.camera.size,h=c.flow.camera.frame.canvas;h.generateActionsForStep(c,[h.div],f,a,e,d.startLabel,c.model.canvasScriptSet);h=c.flow.camera.frame;h.generateActionsForStep(c,[h.div],f,a,e,d.startLabel,c.model.frameScriptSet);h=c;h.generateActionsForStep(c,[h.div],f,a,e,d.startLabel,c.model.pageScriptSet);var n=c.flow.camera.size.getContainedSize(c.model.flow.pageAspectRatio);c.items.forEach(function(b){b.generateStepActions(c,n,a,e,d.startLabel)});d.stopTime=a.duration();d.stopTime<
d.startTime&&(d.stopTime=d.startTime);a.addLabel(d.stopLabel,d.stopTime);d.time=d.stopTime-d.startTime});return b};return b}(e.View);e.PageView=h;(function(c){var b=f.Util,a=function(a){function c(d,f,t){var h=this;a.call(this,f.model,b.createChildDivElement(f.div,"prostyle prostyle-flow"));this.model=d;this.camera=f;this.flowIndex=t;this.pages=[];d.pages.forEach(function(a,b){h.pages.push(new e.PageView(a,h,t,b))})}__extends(c,a);c.prototype.initializePlacement=function(a){this.initializePerspective();
this.initializeFlowPlacement(a);this.initializePages(a)};c.prototype.initializePerspective=function(){var a=this.camera.size;TweenLite.set(this.div,{perspective:(a.width+a.height)/2})};c.prototype.initializeFlowPlacement=function(a){var b={},c=this.model.placement.position,g=this.camera.frame.canvas.size;b.xPercent=-50;b.yPercent=-50;b.x=c.x/100*g.width;b.y=c.y/100*g.height;a.set(this.div,b,"initialize")};c.prototype.generateCameraMovement=function(a,b){var c={},g=this.model.placement.position,d=
this.camera.frame.canvas.size;c.xPercent=-50;c.yPercent=-50;c.x=g.x/100*-d.width;c.y=g.y/100*-d.height;c.ease=Expo.easeOut;a.to(this.camera.div,1,c,b)};c.prototype.initializePages=function(a){b.logWarning("Views.Flows.Flow.initializePages()","Abstract method called")};c.prototype.generatePageMovement=function(a,c,g){b.logWarning("Views.Flows.Flow.generatePageMovement()","Abstract method called")};c.prototype.generateStepsActions=function(a,b){var c=this;this.pages.forEach(function(g,d){var e=g.steps[0].startLabel;
a.addLabel(e,"+=0.01");0===d&&(c.generateCameraMovement(a,e),e="initialize");c.generatePageMovement(a,e,d);b=g.generateStepsActions(a,b)});return b};c.prototype.pageAspectRatio=function(){return this.model.pageAspectRatio};return c}(e.View);c.FlowView=a})(e.Flows||(e.Flows={}))})(f.Views||(f.Views={}));(function(e){(function(d){(function(d){var c=function(b){function a(a,c,d){b.call(this,a,c,d);this.model=a}__extends(a,b);a.prototype.initializePages=function(a){var b=this.camera.size.getContainedSize(this.model.pageAspectRatio),
c=new f.Types.Placement(new f.Types.Xyz,new f.Types.Xyz,new f.Types.Scale,1);this.pages.forEach(function(d,e){c.position.z=-e;c.opacity=0===e?1:0;var f=c.renderCss(b);f.width=b.width;f.height=b.height;a.set(d.div,f,"initialize")})};a.prototype.generatePageMovement=function(a,b,c){var d=this,e=this.camera.size.getContainedSize(this.model.pageAspectRatio),h=new f.Types.Placement(new f.Types.Xyz,new f.Types.Xyz,new f.Types.Scale,1);this.pages.forEach(function(f,l){h.position.z=c-l;h.opacity=l===c?1:
0;var m=h.renderCss(e);m.width=e.width;m.height=e.height;d.applyCss(a,f.div,b,1,m,Expo.easeOut)})};a.prototype.applyCss=function(a,b,c,d,e,f){"initialize"===c?a.set(b,e,c):(e.ease=f,a.to(b,d,e,c))};return a}(f.Views.Flows.FlowView);d.SimpleFlowView=c})(d.Simple||(d.Simple={}))})(e.Flows||(e.Flows={}));(function(d){(function(d){var c=f.Util;d.deserialize=function(b,a){var g=a.setup||{},e=f.Types.Placement.fromJson(g.placement),p=c.convertToNumber(g.pageAspectRatio,b.frame.aspectRatio);return new d.SimpleFlowModel(b,
e,g.defaultPageClass,p)}})(d.Simple||(d.Simple={}))})(e.Flows||(e.Flows={}));(function(d){(function(d){d.serialize=function(c){return{}}})(d.Simple||(d.Simple={}))})(e.Flows||(e.Flows={}));(function(d){(function(e){var c=function(b){function a(a,c,d,e){b.call(this,a,c,d,e);this.flowType="unknown"}__extends(a,b);a.prototype.serialize=function(){return e.serialize(this)};return a}(d.Simple.SimpleFlowModel);e.UnknownFlowModel=c})(d.Unknown||(d.Unknown={}))})(e.Flows||(e.Flows={}));(function(d){(function(e){var c=
function(b){function a(a,c,d){b.call(this,a,c,d)}__extends(a,b);return a}(d.Simple.SimpleFlowView);e.UnknownFlowView=c})(d.Unknown||(d.Unknown={}))})(e.Flows||(e.Flows={}));(function(d){(function(d){var c=f.Util;d.deserialize=function(b,a){var g=a.setup||{},e=f.Types.Placement.fromJson(g.placement),p=c.convertToNumber(g.pageAspectRatio,b.frame.aspectRatio);return new d.UnknownFlowModel(b,e,g.defaultPageClass,p)}})(d.Unknown||(d.Unknown={}))})(e.Flows||(e.Flows={}));(function(d){(function(d){d.serialize=
function(c){return{}}})(d.Unknown||(d.Unknown={}))})(e.Flows||(e.Flows={}))})(f.Extensions||(f.Extensions={}));(function(e){(function(d){var e=function(c){function b(){var a=[];a.push(new d.Variables.NumberOffsetVariableType("x",["x"],"xPercent",Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,0,2,50,!0,"%",!0));a.push(new d.Variables.NumberOffsetVariableType("y",["y"],"yPercent",Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,0,2,50,!0,"%",!0));c.call(this,"anchor",["anchor"],a)}__extends(b,c);
b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.x.setValue(-50);return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.x.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);a=a.split(",");b.x.setValue(this.parseString(a[0]));1<a.length&&b.y.setValue(this.parseString(a[1]));return b};b.prototype.parseString=function(a){a=
a.trim().toLowerCase();return"left"===a?-50:"center"===a?0:"right"===a?50:"top"===a?-50:"middle"===a?0:"bottom"===a?50:"l"===a?-50:"c"===a?0:"r"===a?50:"t"===a?-50:"m"===a?0:"b"===a?50:f.Util.convertToNumber(a,0,!0)};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.x.setValue(f.Util.convertToNumber(a[0],0,!0));1<a.length&&b.y.setValue(f.Util.convertToNumber(a[1],0,!0));return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,
!1,!0)};return b}(d.PropertyType);d.AnchorPropertyType=e;e=function(c){function b(a){a=[];a.push(new d.Variables.NumberVariableType("duration",["duration","dur"],void 0,0,Number.POSITIVE_INFINITY,0,2," secs",!1));a.push(new d.Variables.EaseVariableType);a.push(new d.Variables.NumberVariableType("repeat",["repeat","rep"],"repeat",0,Number.POSITIVE_INFINITY,0,0," times",!1));a.push(new d.Variables.NumberVariableType("repeat delay",["repeatdelay","delay"],"repeatDelay",0,Number.POSITIVE_INFINITY,0,0,
" secs",!1));a.push(new d.Variables.BooleanVariableType("yoyo",["yoyo"],"yoyo",!1,!0));a.push(new d.Variables.NumberVariableType("stagger",["stagger","stag"],void 0,0,Number.POSITIVE_INFINITY,0,2," secs",!1));c.call(this,"animation",["animation","anim"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=new d.Property(this);a&&b.duration.setValue(1);return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.duration.setValue(a);return b};b.prototype.createPropertyFromString=
function(a){var b=new d.Property(this);b.duration.setValue(1);b.ease.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=new d.Property(this);0<a.length&&b.duration.setValue(null===a[0]?void 0:a[0]);1<a.length&&b.ease.setValue(null===a[1]?void 0:a[1]);2<a.length&&b.repeat.setValue(null===a[2]?void 0:a[2]);3<a.length&&b.repeatdelay.setValue(null===a[3]?void 0:a[3]);4<a.length&&b.yoyo.setValue(null===a[4]?void 0:a[4]);5<a.length&&b.stagger.setValue(null===a[5]?void 0:a[5]);return b};
b.prototype.renderLabel=function(a){var b=1===this.countOfValues(a);return this.renderVariables(a,!0,b)};return b}(d.PropertyType);d.AnimationPropertyType=e;e=function(c){function b(a){void 0===a&&(a="transparent");var b=[];b.push(new d.Variables.ColorVariableType("color",["color"],"backgroundColor",a,"transparent"!==a));b.push(new d.Variables.BackgroundImageVariableType("image",["image"],"backgroundImage","none",!1));b.push(new d.Variables.StringVariableType("repeat",["repeat","rep"],"backgroundRepeat",
"repeat",!1));b.push(new d.Variables.StringVariableType("position",["position","pos"],"backgroundPosition","0% 0%",!1));b.push(new d.Variables.StringVariableType("size",["size"],"backgroundSize","auto",!1));c.call(this,"background",["background","back","bg"],b)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.color.setValue("#F7F7F7");return b};b.prototype.createPropertyFromNumber=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,
!1);b.color.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.trim();if(0===a.length||"none"===a)return c.prototype.createPropertyFromBoolean.call(this,!1);var b;0===a.toLowerCase().indexOf("url(")?(b=new d.Property(this),b.image.setValue(a)):(b=c.prototype.createPropertyFromBoolean.call(this,!1),b.color.setValue(a));return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.color.setValue(null===a[0]?
void 0:a[0]);1<a.length&&b.image.setValue(null===a[1]?void 0:a[1]);2<a.length&&b.repeat.setValue(null===a[2]?void 0:a[2]);3<a.length&&b.position.setValue(null===a[3]?void 0:a[3]);4<a.length&&b.size.setValue(null===a[4]?void 0:a[4]);return b};b.prototype.renderLabel=function(a){var b=[];void 0!==a.color.getValue()&&b.push("color");return 0===b.length?this.label:this.label+": "+b.join(", ")};return b}(d.PropertyType);d.BackgroundPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.StringVariableType("style",
["style"],"borderStyle","none",!1));a.push(new d.Variables.ContainerHeightPctVariableType("size",["size"],"borderWidth",0,100,0,2,"%",!1));a.push(new d.Variables.ColorVariableType("color",["color"],"borderColor","transparent",!1));c.call(this,"border",["border"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&(b.style.setValue("solid"),b.size.setValue(.5),b.color.setValue("black"));return b};b.prototype.createPropertyFromNumber=
function(a){var b=this.createPropertyFromBoolean(!0);b.size.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=this.createPropertyFromBoolean(!0);b.color.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&(b.size.setValue(null===a[0]?void 0:a[0]),b.color.setValue("black"),b.style.setValue("solid"));1<a.length&&b.color.setValue(null===a[1]?void 0:a[1]);2<a.length&&b.style.setValue(null===
a[2]?void 0:a[2]);return b};b.prototype.renderLabel=function(a){var b=[],c=a.style.getValue(),d=a.size.getValue();a=a.color.getValue();void 0!==c&&b.push(c);void 0!==d&&b.push(d.toString()+"px");void 0!==a&&b.push("color");return 0===b.length?this.label:this.label+": "+b.join(" ")};return b}(d.PropertyType);d.BorderPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.BulletsVariableType);c.call(this,"bullets",["bullets"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=
function(a){var b=c.prototype.createPropertyFromBoolean.call(this,a);a&&b.style.setValue("disc");return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this),c=b.style;a=c.type.getValueByIndex(a-1);c.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);b.style.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=new d.Property(this),c=this.variableTypes[0].defaultValue;0<a.length&&(c=a[0]);b.style.setValue(c);
return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(d.PropertyType);d.BulletsPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.StringVariableType("name",["name"],void 0,"",!1));c.call(this,"class",["class"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return c.prototype.createPropertyFromBoolean.call(this,!1)};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.name.setValue(a.toString());
return b};b.prototype.createPropertyFromString=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);b.name.setValue(a.trim());return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.name.setValue(a[0].toString());return b};return b}(d.PropertyType);d.ClassPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.ColorVariableType("color",["color"],"color","black",!1));c.call(this,"color",["textcolor",
"color"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.color.setValue("white");return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.color.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);b.color.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=new d.Property(this);0<a.length&&b.color.setValue(null===
a[0]?void 0:a[0]);return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(d.PropertyType);d.ColorPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.ContainerHeightPctVariableType("tl",["topleft","tl"],"borderTopLeftRadius",0,100,0,2,"",!1));a.push(new d.Variables.ContainerHeightPctVariableType("tr",["topright","tr"],"borderTopRightRadius",0,100,0,2,"",!1));a.push(new d.Variables.ContainerHeightPctVariableType("bl",["bottomleft","bl"],"borderBottomLeftRadius",
0,100,0,2,"",!1));a.push(new d.Variables.ContainerHeightPctVariableType("br",["bottomright","br"],"borderBottomRightRadius",0,100,0,2,"",!1));c.call(this,"corners",["corners"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(3)};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.topleft.setValue(a);b.topright.setValue(a);b.bottomleft.setValue(a);b.bottomright.setValue(a);
return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=0<a.length&&void 0!==a[0]?f.Util.convertToNumber(a[0]):void 0,c=1<a.length&&void 0!==a[1]?f.Util.convertToNumber(a[1]):b,e=2<a.length&&void 0!==a[2]?f.Util.convertToNumber(a[2]):b;a=3<a.length&&void 0!==a[3]?f.Util.convertToNumber(a[3]):c;var k=new d.Property(this);k.topleft.setValue(b);k.topright.setValue(c);
k.bottomright.setValue(e);k.bottomleft.setValue(a);return k};b.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return b}(d.PropertyType);d.CornersPropertyType=e;e=function(c){function b(a){void 0===a&&(a=!1);var b=[];b.push(new d.Variables.BooleanVariableType("crop",["crop"],"overflow","visible","hidden",a));c.call(this,"crop",["crop"],b)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=new d.Property(this);b.crop.setValue(a);return b};b.prototype.createPropertyFromNumber=
function(a){var b=new d.Property(this);b.crop.setValue(!!a);return b};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);a=a.trim().toLocaleLowerCase();b.crop.setValue(0<a.length&&"false"!==a&&"0"!==a);return b};b.prototype.createPropertyFromArray=function(a){var b=new d.Property(this),c=!1;0<a.length&&(a=a[0],c=""!==a&&"false"!==a&&"0"!==a&&!!a);b.crop.setValue(c);return b};b.prototype.renderLabel=function(a){var b=1===this.countOfValues(a);return this.renderVariables(a,
!0,b)};return b}(d.PropertyType);d.CropPropertyType=e;e=function(c){function b(a){void 0===a&&(a=!1);var b=[];b.push(new d.Variables.StringVariableType("name",["family","face"],"font-family","Arial, Helvetica, sans-serif",!1));b.push(new d.Variables.ContainerHeightPctVariableType("size",["size"],"fontSize",0,Number.MAX_VALUE,12,1," pixels",a));b.push(new d.Variables.PercentVariableType("line height",["lineheight","lh"],"lineHeight",0,Number.MAX_VALUE,120,!0));c.call(this,"font",["font"],b)}__extends(b,
c);b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.size.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);b.family.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.family.setValue(null===a[0]?void 0:a[0]);1<a.length&&b.size.setValue(null===a[1]?void 0:a[1]);2<a.length&&b.lineheight.setValue(null===a[2]?void 0:a[2]);return b};b.prototype.renderLabel=
function(a){var b=1===this.countOfValues(a);return this.renderVariables(a,!0,b)};return b}(d.PropertyType);d.FontPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.NumberVariableType("item",["item"],void 0,0,Number.POSITIVE_INFINITY,0,0,"",!1));c.call(this,"move to",["moveto","move"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=new d.Property(this);b.item.setValue(a?1:0);return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);
b.item.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);b.item.setValue(f.Util.convertToNumber(a));return b};b.prototype.createPropertyFromArray=function(a){var b=new d.Property(this);0<a.length&&b.item.setValue(null===a[0]?void 0:f.Util.convertToNumber(a[0]));return b};return b}(d.PropertyType);d.MoveToPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.PercentVariableType("percent",["percent","pct"],"autoAlpha",0,100,100,!1));
c.call(this,"opacity",["opacity","opac"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.percent.setValue(100);return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.percent.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);b.percent.setValue(f.Util.convertToNumber(a,100));return b};b.prototype.createPropertyFromArray=
function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.percent.setValue(f.Util.convertToNumber(a[0],100));return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return b}(d.PropertyType);d.OpacityPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.ContainerWidthPctVariableType("left",["left","l"],"paddingLeft",0,50,0,2,"%",!1));a.push(new d.Variables.ContainerHeightPctVariableType("top",["top","t"],"paddingTop",0,50,0,
2,"%",!1));a.push(new d.Variables.ContainerWidthPctVariableType("right",["right","r"],"paddingRight",0,50,0,2,"%",!1));a.push(new d.Variables.ContainerHeightPctVariableType("bottom",["bottom","b"],"paddingBottom",0,50,0,2,"%",!1));c.call(this,"padding",["padding","pad"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(2)};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);
b.left.setValue(a);b.top.setValue(a);b.right.setValue(a);b.bottom.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=0<a.length&&void 0!==a[0]?f.Util.convertToNumber(a[0]):void 0,c=1<a.length&&void 0!==a[1]?f.Util.convertToNumber(a[1]):b,e=2<a.length&&void 0!==a[2]?f.Util.convertToNumber(a[2]):b;a=3<a.length&&void 0!==a[3]?f.Util.convertToNumber(a[3]):
c;var k=new d.Property(this);k.left.setValue(a);k.top.setValue(b);k.right.setValue(c);k.bottom.setValue(e);return k};b.prototype.renderLabel=function(a){var b=a.all.getValue(),c=a.left.getValue()||b,d=a.top.getValue()||b,e=a.right.getValue()||b;a=a.bottom.getValue()||b;return void 0===c&&void 0===d&&void 0===e&&void 0===a?this.label:c===d&&d===e&&e===a&&a===c?this.label+": "+c.toString()+"%":void 0===c||void 0===d||void 0===e||void 0===a?this.label+": "+(void 0===c?"":"left "+c.toString()+"% ")+(void 0===
d?"":"top "+d.toString()+"% ")+(void 0===e?"":"right "+e.toString()+"% ")+(void 0===a?"":"bottom "+a.toString()+"% "):this.label+": "+c.toString()+"% "+d.toString()+"% "+e.toString()+"% "+a.toString()+"%"};return b}(d.PropertyType);d.PaddingPropertyType=e;e=function(c){function b(){var a=Number.NEGATIVE_INFINITY,b=Number.POSITIVE_INFINITY,e=[];e.push(new d.Variables.ContainerWidthPctVariableType("X",["x"],"x",a,b,0,2," pixels",!0));e.push(new d.Variables.ContainerHeightPctVariableType("Y",["y"],"y",
a,b,0,2," pixels",!0));e.push(new d.Variables.ContainerDepthPctVariableType("Z",["z"],"z",a,b,0,2," pixels",!0));c.call(this,"position",["position","pos"],e)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return c.prototype.createPropertyFromBoolean.call(this,!1)};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.x.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};
b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.x.setValue(f.Util.convertToNumber(a[0]));1<a.length&&b.y.setValue(f.Util.convertToNumber(a[1]));2<a.length&&b.z.setValue(f.Util.convertToNumber(a[2]));return b};b.prototype.renderLabel=function(a){var b=this.countOfValues(a),c=1===b,d=1===b;2===b&&void 0!==a.z.getValue()&&(c=!0);return this.renderVariables(a,c,d)};return b}(d.PropertyType);d.PositionPropertyType=e;e=function(c){function b(){var a=
[],b=String.fromCharCode(176);a.push(new d.Variables.NumberVariableType("X",["x"],"rotationX",-36E3,36E3,0,2,b,!1));a.push(new d.Variables.NumberVariableType("Y",["y"],"rotationY",-36E3,36E3,0,2,b,!1));a.push(new d.Variables.NumberVariableType("Z",["z"],"rotationZ",-36E3,36E3,0,2,b,!0));c.call(this,"rotation",["rotation","rotate","rot"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.z.setValue(360);return b};
b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.z.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.x.setValue(f.Util.convertToNumber(a[0]));1<a.length&&b.y.setValue(f.Util.convertToNumber(a[1]));2<a.length&&b.z.setValue(f.Util.convertToNumber(a[2]));
return b};b.prototype.renderLabel=function(a){var b=this.countOfValues(a),c=3>b;1===b&&void 0!==a.z.getValue()&&(c=!1);return this.renderVariables(a,c,!0)};return b}(d.PropertyType);d.RotationPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.PercentVariableType("X",["x"],"scaleX",0,1E3,100,!1));a.push(new d.Variables.PercentVariableType("Y",["y"],"scaleY",0,1E3,100,!1));c.call(this,"scale",["scale"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===
a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(200)};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.x.setValue(a);b.y.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.x.setValue(f.Util.convertToNumber(a[0]));
1<a.length&&b.y.setValue(f.Util.convertToNumber(a[1]));return b};b.prototype.renderLabel=function(a){var b=this.countOfValues(a),c=1===b;if(1<b){var b=a.x.getValue(),d=a.y.getValue();if(b===d)return this.label+": "+b.toString()+"%"}return this.renderVariables(a,c,!0)};return b}(d.PropertyType);d.ScalePropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.ContainerWidthPctVariableType("Width",["width","w"],"width",0,Number.POSITIVE_INFINITY,0,2,"",!1));a.push(new d.Variables.ContainerHeightPctVariableType("Height",
["height","h"],"height",0,Number.POSITIVE_INFINITY,0,2,"",!1));c.call(this,"size",["size"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(100)};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.width.setValue(a);b.height.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};
b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.width.setValue(f.Util.convertToNumber(a[0]));1<a.length&&b.height.setValue(f.Util.convertToNumber(a[1]));return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return b}(d.PropertyType);d.SizePropertyType=e;e=function(c){function b(){var a=[],b=String.fromCharCode(176);a.push(new d.Variables.NumberVariableType("X",["degrees","deg"],"skewX",Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,0,2,b,!1));c.call(this,"skew",["skew"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(-30)};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.degrees.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);b.degrees.setValue(f.Util.convertToNumber(a));return b};
b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.degrees.setValue(null===a[0]?void 0:f.Util.convertToNumber(a[0]));return b};b.prototype.renderLabel=function(a){this.countOfValues(a);return this.renderVariables(a,!0,!0)};return b}(d.PropertyType);d.SkewPropertyType=e;e=function(c){function b(a,b,e){void 0===a&&(a="shadow");void 0===b&&(b=["shadow","shadows"]);void 0===e&&(e="boxShadow");var f=[];f.push(new d.Variables.ShadowVariableType(e,
"boxShadow"===e));c.call(this,a,b,f)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b[this.variableTypes[0].jsonNames[0]].setValue([.5,.5,2]);return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b[this.variableTypes[0].jsonNames[0]].setValue([a,a,2]);return b};b.prototype.parseString=function(a){var b=[],c=[],d=0;a.split(",").forEach(function(a){0<d?b[b.length-1]+=","+a:b.push(a);-1<
a.indexOf("(")&&d++;-1<a.indexOf(")")&&d--});b.forEach(function(a,b){a=a.trim().toLowerCase();3===b?c.push(isNaN(a)?a:Number(a)):5===b?c.push("1"===a||"true"===a):c.push(f.Util.convertToNumber(a))});return c};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);b[this.variableTypes[0].jsonNames[0]].setValue(this.parseString(a));return b};b.prototype.createPropertyFromArray=function(a){var b=this,c=new d.Property(this);if(0===a.length)return c;if(a[0]instanceof Array||"number"===
typeof a[0])c[this.variableTypes[0].jsonNames[0]].setValue(a);else{var e=[];a.forEach(function(c){"string"===typeof c?e.push(b.parseString(c)):"object"===typeof a[0]&&e.push(b.parseObject(c))});c[this.variableTypes[0].jsonNames[0]].setValue(e)}return c};b.prototype.parseObject=function(a){return[a.x,a.y,a.blur,a.color,a.spread,a.inset]};b.prototype.createPropertyFromObject=function(a){var b=new d.Property(this);if(void 0===a)return b;b[this.variableTypes[0].jsonNames[0]].setValue(this.parseObject(a));
return b};b.prototype.renderLabel=function(a){return this.label};return b}(d.PropertyType);d.ShadowPropertyType=e;e=function(c){function b(a){void 0===a&&(a="transparent");var b=[];b.push(new d.Variables.ColorVariableType("color",["color"],"fill",a,"transparent"!==a));c.call(this,"fill",["fill"],b)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.color.setValue("#F7F7F7");return b};b.prototype.createPropertyFromNumber=
function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);b.color.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.trim();if(0===a.length||"none"===a)return c.prototype.createPropertyFromBoolean.call(this,!1);var b;b=c.prototype.createPropertyFromBoolean.call(this,!1);b.color.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.color.setValue(null===a[0]?void 0:a[0]);return b};
return b}(d.PropertyType);d.SvgFillPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.TextAlignVariableType);c.call(this,"textAlign",["textalign","align"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,a);a&&b.align.setValue("justify");return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);0===a&&b.align.setValue("inherit");1===a&&b.align.setValue("left");2===a&&b.align.setValue("center");
3===a&&b.align.setValue("right");4===a&&b.align.setValue("justify");return b};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);b.align.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=new d.Property(this),c=this.variableTypes[0].defaultValue;0<a.length&&(c=a[0]);b.align.setValue(c);return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(d.PropertyType);d.TextAlignPropertyType=e;e=function(c){function b(){c.call(this,
"text shadow",["textshadow","textshadows"],"textShadow")}__extends(b,c);return b}(d.ShadowPropertyType);d.TextShadowPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.BooleanVariableType("bold",["bold"],"font-weight","normal","bold"));a.push(new d.Variables.BooleanVariableType("italic",["italic"],"font-style","normal","italic"));a.push(new d.Variables.StringVariableType("line",["line","lines"],"text-decoration","none",!1));a.push(new d.Variables.BooleanVariableType("smallCaps",
["smallcaps","caps"],"font-variant","normal","small-caps"));c.call(this,"style",["textstyle","textstyles","styles","style"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&(b.bold.setValue(!0),b.italic.setValue(!0));return b};b.prototype.createPropertyFromNumber=function(a){var b=new d.Property(this);b.bold.setValue(0<(a&1));b.italic.setValue(0<(a&2));b.smallcaps.setValue(0<(a&4));var c=[];0<(a&8)&&c.push("underline");
0<(a&16)&&c.push("line-through");0<(a&32)&&c.push("overline");0===c.length&&c.push("none");b.line.setValue(c.join(" "));return b};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);a=a.toLocaleLowerCase();b.bold.setValue(-1<a.indexOf("bold"));b.italic.setValue(-1<a.indexOf("italic"));b.smallcaps.setValue(-1<a.indexOf("caps"));var c=[];-1<a.indexOf("under")&&c.push("underline");-1<a.indexOf("through")&&c.push("line-through");-1<a.indexOf("over")&&c.push("overline");0===c.length&&
c.push("none");b.line.setValue(c.join(" "));return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1),d=[];a.forEach(function(a){a=(a||"").toString().trim().toLocaleLowerCase();0===a.indexOf("b")&&b.bold.setValue(!0);0===a.indexOf("i")&&b.italic.setValue(!0);0===a.indexOf("c")&&b.smallCaps.setValue(!0);0===a.indexOf("u")&&d.push("underline");0===a.indexOf("t")&&d.push("line-through");0===a.indexOf("o")&&d.push("overline")});0===d.length&&d.push("none");
b.line.setValue(d.join(" "));return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(d.PropertyType);d.TextStylePropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.TextWidthVariableType);c.call(this,"width",["textwidth","width"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,a);a&&b.width.setValue(100);return b};b.prototype.createPropertyFromNumber=function(a){var b=
new d.Property(this);b.width.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new d.Property(this);b.width.setValue(f.Util.convertToNumber(a,this.variableTypes[0].defaultValue));return b};b.prototype.createPropertyFromArray=function(a){var b=new d.Property(this),c=this.variableTypes[0].defaultValue;0<a.length&&(c=f.Util.convertToNumber(a[0],c));b.width.setValue(c);return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(d.PropertyType);
d.TextWidthPropertyType=e;e=function(c){function b(){var a=[];a.push(new d.Variables.OriginVariableType(!0));c.call(this,"transformOrigin",["transformorigin","origin"],a)}__extends(b,c);b.prototype.createProperty=function(a){var b=new d.Property(this);b.transformOrigin.setValue(a);return b};b.prototype.createPropertyFromBoolean=function(a){return this.createProperty(a)};b.prototype.createPropertyFromNumber=function(a){return this.createProperty(a)};b.prototype.createPropertyFromString=function(a){return this.createProperty(a)};
b.prototype.createPropertyFromArray=function(a){return this.createProperty(a)};b.prototype.createPropertyFromObject=function(a){void 0==a.x&&void 0!==a.X&&(a.x=a.X);void 0==a.y&&void 0!==a.Y&&(a.y=a.Y);void 0==a.z&&void 0!==a.Z&&(a.z=a.Z);return this.createProperty(a)};b.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return b}(d.PropertyType);d.TransformOriginPropertyType=e;e=function(){function c(){}c.ANCHOR=new d.AnchorPropertyType;c.ANIMATION=new d.AnimationPropertyType;
c.BACKGROUND=new d.BackgroundPropertyType;c.BORDER=new d.BorderPropertyType;c.BULLET=new d.BulletsPropertyType;c.CLASS=new d.ClassPropertyType;c.CORNERS=new d.CornersPropertyType;c.CROP=new d.CropPropertyType;c.CROP_SVG=new d.CropPropertyType(!0);c.FILL_SVG=new d.SvgFillPropertyType;c.FONT=new d.FontPropertyType;c.MOVE_TO=new d.MoveToPropertyType;c.OPACITY=new d.OpacityPropertyType;c.PADDING=new d.PaddingPropertyType;c.POSITION=new d.PositionPropertyType;c.ROTATION=new d.RotationPropertyType;c.SCALE=
new d.ScalePropertyType;c.SIZE=new d.SizePropertyType;c.SKEW=new d.SkewPropertyType;c.SHADOW=new d.ShadowPropertyType;c.TEXT_ALIGN=new d.TextAlignPropertyType;c.TEXT_COLOR=new d.ColorPropertyType;c.TEXT_SHADOW=new d.TextShadowPropertyType;c.TEXT_STYLE=new d.TextStylePropertyType;c.TEXT_WIDTH=new d.TextWidthPropertyType;c.TRANSFORM_ORIGIN=new d.TransformOriginPropertyType;return c}();d.Cache=e})(e.Properties||(e.Properties={}))})(f.Models||(f.Models={}));(function(e){(function(d){(function(d){var c=
function(b){function a(a,c,d,e,f,h){b.call(this,a,"image","Image",[f],[h]);this.src=c;this.width=d;this.height=e}__extends(a,b);a.prototype.serialize=function(){return d.serialize(this)};a.prototype.createView=function(a){return new d.ImageItemView(this,a)};return a}(f.Models.Items.ItemModel);d.ImageItemModel=c})(d.Image||(d.Image={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=f.Util,b=function(a){function b(d,e){a.call(this,d,e,c.createChildImageElement(e.div,"prostyle prostyle-item",
d.itemModelSet.flow.story.canvas.adjustImageUrl(d.src),d.width,d.height));this.model=d}__extends(b,a);b.prototype.initializeItem=function(a,b){var c=this.model,d=b.getContainedSize(c.itemModelSet.flow.pageAspectRatio),e={};void 0!==c.width&&(e.width=c.width.toString()+"%");void 0!==c.height&&(e.height=c.height.toString()+"%");this.initializeProperties(c.itemModelSet.flow.story,[this.element],d,a,c.init,!1,e)};return b}(f.Views.Items.ItemView);d.ImageItemView=b})(d.Image||(d.Image={}))})(e.Items||
(e.Items={}));(function(d){(function(d){var c=f.Models.Properties,b=function(){function a(){}a.get=function(){if(void 0===a._propertyTypes){var b=[];b.push(c.Cache.ANCHOR);b.push(c.Cache.ANIMATION);b.push(c.Cache.CLASS);b.push(c.Cache.CORNERS);b.push(c.Cache.OPACITY);b.push(c.Cache.POSITION);b.push(c.Cache.ROTATION);b.push(c.Cache.SCALE);b.push(c.Cache.SHADOW);b.push(c.Cache.SKEW);b.push(c.Cache.TRANSFORM_ORIGIN);a._propertyTypes=b}return a._propertyTypes};a._propertyTypes=void 0;return a}();d.ImagePropertyTypes=
b})(d.Image||(d.Image={}))})(e.Items||(e.Items={}))})(f.Extensions||(f.Extensions={}));(function(e){var d=function(){function b(){}b.read=function(a,b){return"boolean"===typeof b?a.createPropertyFromBoolean(b):"number"===typeof b?a.createPropertyFromNumber(b):"string"===typeof b?a.createPropertyFromString(b):b instanceof Array?a.createPropertyFromArray(b):a.createPropertyFromObject(b)};return b}();e.PropertyReader=d;var h=f.Models.Properties,d=function(){function b(){}b.read=function(a,c,d,p,k,u){void 0===
p&&(p=void 0);void 0===k&&(k=void 0);void 0===u&&(u=[]);c=c||{};var w=f.Util.lowercaseProperties(c),n=[];p&&(n=p.split(","));void 0!==c["class"]&&n.push.apply(n,c["class"].split(","));var l=void 0;void 0!==k&&(l=b.read(a,k||{},d));n.forEach(function(c){if((c=c.trim().toLowerCase())&&-1===u.indexOf(c)){var e=u.slice();e.push(c);if(c=(a.classes||{})[c]||void 0)e=b.read(a,c,d,void 0,void 0,e),void 0===l?l=e:e.properties.forEach(function(a){var b=l.getPropertyOfType(a.type);void 0==b?l.properties.push(a):
a.type.variableTypes.forEach(function(c){var d=a[c.jsonNames[0]];c=b[c.jsonNames[0]];void 0!==d&&void 0!==c&&(d=d.getValue(!1),void 0!==d&&c.setValue(d))})})}});var m=[];d.forEach(function(a){for(var b=void 0,c=void 0,d=0;d<a.jsonNames.length;d++){var g=a.jsonNames[d];if(w.hasOwnProperty(g)){b=e.PropertyReader.read(a,w[g]);break}}void 0!==l&&(c=l.getPropertyOfType(a));void 0!==c&&(void 0===b&&(b=new h.Property(a)),a.variableTypes.forEach(function(a){var d=b[a.jsonNames[0]];a=c[a.jsonNames[0]];if(void 0!==
a){var e=a.getValue(!1);void 0===e&&(e=a.defaultValueOverride);void 0!==e&&(d.defaultValueOverride=e)}}));void 0!==b&&m.push(b)});return new h.PropertyList(d,m)};return b}();e.PropertyListReader=d;var c=f.Models.Scripts,d=function(){function b(){}b.read=function(a,b,d,f){var k=new c.ScriptSet(a,b,f);if(!(d instanceof Array))return k;d.forEach(function(a){k.scripts.push(e.ScriptReader.read(k,a))});return k};b.readJson=function(a,d,h,p,k){h=f.Util.lowercaseProperties(h);for(var u=new c.ScriptSet(a,
d,k),w=0;w<p.length;w++){var n=p[w];if(h[n+"scripts"]instanceof Array)return b.read(a,d,h[n+"scripts"],k);if(void 0!==h[n+"script"])u.scripts.push(e.ScriptReader.read(u,h[n+"script"]));else{var l=new c.StepEvent(u,0);if(h[n+"actions"]instanceof Array)l.actions=e.ActionReader.readArray(l,h[n+"actions"]);else if(void 0!==h[n+"action"])l.actions=e.ActionReader.readArray(l,[h[n+"action"]]);else continue;u.scripts.push(l)}return u}u=new c.ScriptSet(a,d,k);if(!(h instanceof Array))return u;h.forEach(function(a){u.scripts.push(e.ScriptReader.read(u,
a))});return u};return b}();e.ScriptSetReader=d})(f.Serialization||(f.Serialization={}));(function(e){(function(d){(function(d){var c=f.Util;d.deserialize=function(b,a){var e=(c.getSetup(a,"src")||"").trim(),t=c.getSetup(a,"width"),p=c.getSetup(a,"height"),t=isNaN(t)?void 0:Number(t),p=isNaN(p)?void 0:Number(p),k=d.ImagePropertyTypes.get(),u=f.Serialization.PropertyListReader.read(b.story,a.init,k,"image"),k=f.Serialization.ScriptSetReader.readJson(b,"Image",a,[""],k);return new d.ImageItemModel(b,
e,t,p,u,k)}})(d.Image||(d.Image={}))})(e.Items||(e.Items={}))})(f.Extensions||(f.Extensions={}));(function(e){var d=function(){function c(){}c.writeSet=function(b,a){a.forEach(function(a){b[a.type.jsonNames[a.type.jsonNames.length-1]]=c.write(a)})};c.write=function(b){var a={};b.type.variableTypes.forEach(function(c){c=c.jsonNames[c.jsonNames.length-1];var d=b[c].getValue();void 0!==d&&(a[c]=d)});return a};return c}();e.PropertyWriter=d;d=function(){function c(){}c.write=function(b){return{}};return c}();
e.PropertyListWriter=d;var h=f.Models.Scripts.ScriptType,d=function(){function c(){}c.write=function(b){var a=b.type,d=void 0,d=a===h.InitEvent?c.writeInitEvent(b):a===h.StepEvent?c.writeStepEvent(b):a===h.SwitchEvent?c.writeSwitchEvent(b):a===h.ActionsOrphan?c.writeActionsOrphan(b):a===h.PropertyOrphan?c.writePropertyOrphan(b):{};d.type=h.toString(b.type);d.editor={};d.editor.x=b.x;d.editor.y=b.y;return d};c.writeInitEvent=function(b){var a={};e.PropertyWriter.writeSet(a,b.properties);return a};
c.writeStepEvent=function(b){var a={scriptType:"step"};0<b.stepIndex&&(a.scriptType+=b.stepIndex+1);a.actions=e.ActionWriter.writeArray(b.actions);return a};c.writeSwitchEvent=function(b){var a={};a.switch=b.switchName;a.actions=e.ActionWriter.writeArray(b.actions);return a};c.writeActionsOrphan=function(b){var a={};a.actions=e.ActionWriter.writeArray(b.actions);return a};c.writePropertyOrphan=function(b){var a={};e.PropertyWriter.writeSet(a,b.properties);return a};return c}();e.ScriptWriter=d})(f.Serialization||
(f.Serialization={}));(function(e){(function(d){(function(d){d.serialize=function(c){var b={};b.setup=b.setup||{};b.setup.src=c.src;c.width&&(b.setup.class=c.width);c.height&&(b.setup.class=c.height);b.init=f.Serialization.PropertyListWriter.write(c.init);b.scripts=f.Serialization.ScriptSetWriter.write(c.scriptSet);return b}})(d.Image||(d.Image={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=function(b){function a(a,c,d){b.call(this,a,"layer","Layer",[c],[d]);this.items=[];this.flow=
a.flow;this.story=a.flow.story}__extends(a,b);a.prototype.getCountOfStepsUsed=function(){var a=1;this.scriptSets.forEach(function(b){a=Math.max(a,b.getCountOfStepsUsed())});this.items.forEach(function(b){a=Math.max(a,b.getCountOfStepsUsed())});return a};a.prototype.serialize=function(){return d.serialize(this)};a.prototype.createView=function(a){return new d.LayerItemView(this,a)};return a}(f.Models.Items.ItemModel);d.LayerItemModel=c})(d.Layer||(d.Layer={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=
f.Util,b=function(a){function b(d,e){a.call(this,d,e,c.createChildDivElement(e.div,"prostyle prostyle-layer"));this.model=d;this.items=[];f.Views.PageView.createItems(this,d.items)}__extends(b,a);b.prototype.initializeItem=function(b,c){a.prototype.initializeItem.call(this,b,c);this.items.forEach(function(a){a.initializeItem(b,c)})};b.prototype.generateStepActions=function(b,c,d,e,g){var f=this;this.items.forEach(function(a){a.generateStepActions(f,c,d,e,g)});a.prototype.generateStepActions.call(this,
this,c,d,e,g)};return b}(f.Views.Items.ItemView);d.LayerItemView=b})(d.Layer||(d.Layer={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=f.Models.Properties,b=function(){function a(){}a.get=function(){if(void 0===a._propertyTypes){var b=[];b.push(c.Cache.ANCHOR);b.push(c.Cache.ANIMATION);b.push(c.Cache.BACKGROUND);b.push(c.Cache.BORDER);b.push(c.Cache.CLASS);b.push(c.Cache.CORNERS);b.push(c.Cache.CROP);b.push(c.Cache.MOVE_TO);b.push(c.Cache.OPACITY);b.push(c.Cache.POSITION);b.push(c.Cache.ROTATION);
b.push(c.Cache.SCALE);b.push(c.Cache.SHADOW);b.push(c.Cache.SIZE);b.push(c.Cache.SKEW);b.push(c.Cache.TRANSFORM_ORIGIN);a._propertyTypes=b}return a._propertyTypes};a._propertyTypes=void 0;return a}();d.LayerPropertyTypes=b})(d.Layer||(d.Layer={}))})(e.Items||(e.Items={}))})(f.Extensions||(f.Extensions={}));(function(e){var d=f.Models,h=f.Models.Items,c=function(){function b(){}b.read=function(a,c){c=c||{};c.init=c.init||{};var f=d.CanvasPropertyTypes.get(),p=d.FramePropertyTypes.get(),k=d.PagePropertyTypes.get(),
h=e.PropertyListReader.read(a.story,c.init,k,a.getDefaultPageClassName(),a.getDefaultPageClassValue()),h=new d.PageModel(h,a);h.canvasScriptSet=e.ScriptSetReader.readJson(h,"Canvas",c,["canvas"],f);h.frameScriptSet=e.ScriptSetReader.readJson(h,"Frame",c,["frame"],p);h.pageScriptSet=e.ScriptSetReader.readJson(h,"Page",c,["page"],k);h.items=b.readItems(h,c);h.steps=b.readSteps(h,c,h.items);return h};b.readSteps=function(a,b,c){b=b.steps||[];var d=[];b instanceof Array&&b.forEach(function(b){d.push(e.StepReader.read(a,
b))});var f=1;c.forEach(function(a){f=Math.max(f,a.getCountOfStepsUsed());a instanceof h.SequencedItemModel&&(f=Math.max(f,a.sequenceOnStepIndex+1))});f=Math.max(f,a.canvasScriptSet.getCountOfStepsUsed());f=Math.max(f,a.frameScriptSet.getCountOfStepsUsed());f=Math.max(f,a.pageScriptSet.getCountOfStepsUsed());if(d.length<f)for(b=f-d.length,c=0;c<b;c++)d.push(e.StepReader.read(a,{}));return d};b.readItems=function(a,b){var c=b.items;void 0===c&&void 0!==b.item&&(c=[b.item]);var c=c||[],d=[];c instanceof
Array&&c.forEach(function(b){d.push(e.ItemReader.read(a,b))});return d};return b}();e.PageReader=c})(f.Serialization||(f.Serialization={}));(function(e){(function(d){(function(d){d.deserialize=function(c,b){var a=d.LayerPropertyTypes.get(),e=f.Serialization.PropertyListReader.read(c.story,b.init,a,"layer"),a=f.Serialization.ScriptSetReader.readJson(c,"Layer",b,[""],a),e=new d.LayerItemModel(c,e,a);e.items=f.Serialization.PageReader.readItems(e,b);return e}})(d.Layer||(d.Layer={}))})(e.Items||(e.Items=
{}));(function(d){(function(d){d.serialize=function(c){var b={};b.init=f.Serialization.PropertyListWriter.write(c.init);b.scripts=f.Serialization.ScriptSetWriter.write(c.scriptSet);f.Serialization.PageWriter.writeItems(c,b);return b}})(d.Layer||(d.Layer={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=function(b){function a(a,c,d,e,f,h,n,l,m,z,A,x,q){b.call(this,a,"text","Text",[h,l,z,x],[n,m,A,q]);this.text=c;this.stackedLines=d;this.stackedWords=e;this.stackedChars=f;this.linesInit=
l;this.linesScriptSet=m;this.wordsInit=z;this.wordsScriptSet=A;this.charsInit=x;this.charsScriptSet=q}__extends(a,b);a.prototype.serialize=function(){return d.serialize(this)};a.prototype.createView=function(a){return new d.TextItemView(this,a)};return a}(f.Models.Items.ItemModel);d.TextItemModel=c})(d.Text||(d.Text={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=f.Util,b=function(a){function b(d,e){a.call(this,d,e,c.createChildDivElement(e.div,"prostyle prostyle-text"));this.model=
d;this.splitText=void 0;this.chars=this.words=this.lines=!1;this.div.innerHTML=d.text;this.lines=d.stackedLines||0<d.linesScriptSet.scripts.length||d.linesInit.hasAnythingSet();this.words=d.stackedWords||0<d.wordsScriptSet.scripts.length||d.wordsInit.hasAnythingSet();this.chars=d.stackedChars||0<d.charsScriptSet.scripts.length||d.charsInit.hasAnythingSet();if(this.lines||this.words||this.chars){var f=[];this.lines&&f.push("lines");this.words&&f.push("words");this.chars&&f.push("chars");f={type:f.join(",")};
this.lines&&(f.linesClass=d.stackedLines?"prostyle-text-line-stacked":"prostyle-text-line");this.words&&(f.wordsClass=d.stackedWords?"prostyle-text-word-stacked":"prostyle-text-word");this.chars&&(f.charsClass=d.stackedChars?"prostyle-text-char-stacked":"prostyle-text-char");this.splitText=new window.SplitText(this.div,f)}}__extends(b,a);b.prototype.initializeItem=function(a,b){var c=this.model.itemModelSet.flow.story,d=b.getContainedSize(this.model.itemModelSet.flow.pageAspectRatio),e=this.initializeProperties.bind(this);
e(c,[this.div],d,a,this.model.init,!1);void 0!==this.splitText&&(this.lines&&e(c,this.splitText.lines,d,a,this.model.linesInit,!1),this.words&&e(c,this.splitText.words,d,a,this.model.wordsInit,!1),this.chars&&e(c,this.splitText.chars,d,a,this.model.charsInit,!1))};b.prototype.generateStepActions=function(a,b,c,d,e){var f=this.generateActionsForStep.bind(this);f(a,[this.div],b,c,d,e,this.model.scriptSet);void 0!==this.splitText&&(this.lines&&f(a,this.splitText.lines,b,c,d,e,this.model.linesScriptSet),
this.words&&f(a,this.splitText.words,b,c,d,e,this.model.wordsScriptSet),this.chars&&f(a,this.splitText.chars,b,c,d,e,this.model.charsScriptSet))};return b}(f.Views.Items.ItemView);d.TextItemView=b})(d.Text||(d.Text={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=f.Models.Properties,b=function(){function a(){}a.cacheProperties=function(){a._propertyTypes=[];a._linePropertyTypes=[];a._wordPropertyTypes=[];a._charPropertyTypes=[];var b=[a._propertyTypes],d=[a._linePropertyTypes],e=[a._propertyTypes,
a._linePropertyTypes,a._wordPropertyTypes,a._charPropertyTypes];a.addPropertyType(b,c.Cache.ANCHOR);a.addPropertyType(e,c.Cache.ANIMATION);a.addPropertyType(e,c.Cache.BACKGROUND);a.addPropertyType(e,c.Cache.BORDER);a.addPropertyType(d,c.Cache.BULLET);a.addPropertyType(e,c.Cache.CLASS);a.addPropertyType(e,c.Cache.CORNERS);a.addPropertyType(b,c.Cache.CROP);a.addPropertyType(b,c.Cache.FONT);a.addPropertyType(e,c.Cache.OPACITY);a.addPropertyType(e,c.Cache.PADDING);a.addPropertyType(e,c.Cache.POSITION);
a.addPropertyType(e,c.Cache.ROTATION);a.addPropertyType(e,c.Cache.SCALE);a.addPropertyType(e,c.Cache.SHADOW);a.addPropertyType(e,c.Cache.SKEW);a.addPropertyType(b,c.Cache.TEXT_ALIGN);a.addPropertyType(e,c.Cache.TEXT_COLOR);a.addPropertyType(e,c.Cache.TEXT_SHADOW);a.addPropertyType(e,c.Cache.TEXT_STYLE);a.addPropertyType(b,c.Cache.TEXT_WIDTH);a.addPropertyType(e,c.Cache.TRANSFORM_ORIGIN)};a.addPropertyType=function(a,b){a.forEach(function(a){a.push(b)})};a.get=function(){void 0===a._propertyTypes&&
a.cacheProperties();return a._propertyTypes};a.getForLines=function(){void 0===a._linePropertyTypes&&a.cacheProperties();return a._linePropertyTypes};a.getForWords=function(){void 0===a._wordPropertyTypes&&a.cacheProperties();return a._wordPropertyTypes};a.getForChars=function(){void 0===a._charPropertyTypes&&a.cacheProperties();return a._charPropertyTypes};a._propertyTypes=void 0;a._linePropertyTypes=void 0;a._wordPropertyTypes=void 0;a._charPropertyTypes=void 0;return a}();d.TextPropertyTypes=b})(d.Text||
(d.Text={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=f.Util;d.deserialize=function(b,a){var e=c.getSetup(a,"text"),t="";if(e instanceof Array){var p=[];e.forEach(function(a){p.push(a.toString())});t=p.join("<br>")}else t=(e||"").toString();var e=!!c.getSetup(a,"stackedLines"),k=!!c.getSetup(a,"stackedWords"),u=!!c.getSetup(a,"stackedChars"),w=d.TextPropertyTypes.get(),n=d.TextPropertyTypes.getForLines(),l=d.TextPropertyTypes.getForWords(),m=d.TextPropertyTypes.getForChars(),z=f.Serialization.PropertyListReader.read(b.story,
a.init,w,"text"),q=f.Serialization.PropertyListReader.read(b.story,a.lineInit||a.linesInit,n),x=f.Serialization.PropertyListReader.read(b.story,a.wordInit||a.wordsInit,l),r=f.Serialization.PropertyListReader.read(b.story,a.charInit||a.charsInit,m),w=f.Serialization.ScriptSetReader.readJson(b,"Text",a,[""],w),n=f.Serialization.ScriptSetReader.readJson(b,"Lines",a,["line","lines"],n),l=f.Serialization.ScriptSetReader.readJson(b,"Words",a,["word","words"],l),m=f.Serialization.ScriptSetReader.readJson(b,
"Characters",a,["char","chars"],m);return new d.TextItemModel(b,t,e,k,u,z,w,q,n,x,l,r,m)}})(d.Text||(d.Text={}))})(e.Items||(e.Items={}));(function(d){(function(d){d.serialize=function(c){var b={setup:{}},a=c.text.split("<br>");b.setup.text=1<a.length?a:c.text;c.stackedLines&&(b.setup.stackedLines=!0);c.stackedWords&&(b.setup.stackedWords=!0);c.stackedChars&&(b.setup.stackedChars=!0);b.init=f.Serialization.PropertyListWriter.write(c.init);b.scripts=f.Serialization.ScriptSetWriter.write(c.scriptSet);
b.lineInit=f.Serialization.PropertyListWriter.write(c.linesInit);b.lineScripts=f.Serialization.ScriptSetWriter.write(c.linesScriptSet);b.wordInit=f.Serialization.PropertyListWriter.write(c.wordsInit);b.wordScripts=f.Serialization.ScriptSetWriter.write(c.wordsScriptSet);b.charInit=f.Serialization.PropertyListWriter.write(c.charsInit);b.charScripts=f.Serialization.ScriptSetWriter.write(c.charsScriptSet);return b}})(d.Text||(d.Text={}))})(e.Items||(e.Items={}));(function(d){(function(d){var c=function(b){function a(a,
c){b.call(this,a,c);this.model=a;this.divs=[];this.div.innerText=a.unknownType+"?";this.div.classList.add("unknown")}__extends(a,b);return a}(f.Views.Items.ItemView);d.UnknownItemView=c})(d.Unknown||(d.Unknown={}))})(e.Items||(e.Items={}));(function(d){(function(d){d.serialize=function(c){return{}}})(d.Unknown||(d.Unknown={}))})(e.Items||(e.Items={}))})(f.Extensions||(f.Extensions={}));(function(e){(function(d){var c=function(b){function a(a,c){b.call(this,a,c);this.actions=[]}__extends(a,b);a.prototype.removeAction=
function(a){a=this.actions.indexOf(a);this.actions.splice(a,1)};return a}(d.Script);d.ActionsScript=c})(e.Scripts||(e.Scripts={}));(function(d){(function(b){b[b.SetProperties=0]="SetProperties"})(d.ActionType||(d.ActionType={}));(function(b){b.fromString=function(a){a=(a||"properties").toString().trim();if("properties"===a)return b.SetProperties;f.Util.logError("ActionType.fromString()","Unknown action type: "+a);return b.SetProperties};b.toString=function(a){return"properties"}})(d.ActionType||(d.ActionType=
{}));var c=function(){function b(a,b,c){this.script=a;this.actionType=b;this.delay=c;Math.max(0,c)}b.prototype.saveJson=function(){f.Util.logWarning("Action.saveJson()","Abstract method called");return{}};return b}();d.Action=c;c=function(b){function a(a,c,e){b.call(this,a,d.ActionType.SetProperties,c);this.properties=e}__extends(a,b);return a}(d.Action);d.SetPropertiesAction=c})(e.Actions||(e.Actions={}));var d=function(){function d(){}d.get=function(){if(void 0===d._propertyTypes){var c=[];c.push(e.Properties.Cache.ANIMATION);
c.push(e.Properties.Cache.BACKGROUND);c.push(e.Properties.Cache.BORDER);c.push(e.Properties.Cache.CORNERS);c.push(e.Properties.Cache.CROP);c.push(e.Properties.Cache.FONT);c.push(e.Properties.Cache.OPACITY);c.push(e.Properties.Cache.SHADOW);c.push(e.Properties.Cache.TEXT_COLOR);d._propertyTypes=c}return d._propertyTypes};d._propertyTypes=void 0;return d}();e.CanvasPropertyTypes=d;(function(d){var c=function(b){function a(a,c,d,e,f,h){b.call(this,a,c,d,f,e);this.defaultPageClassIfNotGiven=h}__extends(a,
b);a.prototype.getDefaultPageClassName=function(){return this.defaultPageClass||this.defaultPageClassIfNotGiven};a.prototype.getDefaultPageClassValue=function(){return{background:"#FFF",corners:{topLeft:2,bottomRight:2,bottomLeft:2,topRight:2},shadow:[0,0,1.5,"rgba(0,0,0,0.5)",.1]}};return a}(d.FlowModel);d.PlacementFlowModel=c})(e.Flows||(e.Flows={}));d=function(){function d(){}d.get=function(){if(void 0===d._propertyTypes){var c=[];c.push(e.Properties.Cache.ANIMATION);c.push(e.Properties.Cache.BACKGROUND);
c.push(e.Properties.Cache.BORDER);c.push(e.Properties.Cache.CORNERS);c.push(e.Properties.Cache.CROP);c.push(e.Properties.Cache.OPACITY);c.push(e.Properties.Cache.SCALE);c.push(e.Properties.Cache.SHADOW);d._propertyTypes=c}return d._propertyTypes};d._propertyTypes=void 0;return d}();e.FramePropertyTypes=d})(f.Models||(f.Models={}));(function(e){var d=function(){function d(c,b,a,e,f){this.current=c;this.future=b;this.futureOffset=a;this.past=e;this.pastOffset=f}d.fromJson=function(c){c=c||{};c.future=
c.future||{};c.past=c.past||{};return new d(e.Placement.fromJson(c.current),e.Placement.fromJson(c.future),e.Placement.fromJson(c.future.offset),e.Placement.fromJson(c.past),e.Placement.fromJson(c.past.offset))};return d}();e.Stacks=d})(f.Types||(f.Types={}));(function(e){(function(d){var c=function(b){function a(a,c,d,e,f,h){b.call(this,a,c,d,[f],[h]);this.sequenceOnStepIndex=e}__extends(a,b);return a}(d.ItemModel);d.SequencedItemModel=c})(e.Items||(e.Items={}));var d=function(){function d(){}d.get=
function(){if(void 0===d._propertyTypes){var c=[];c.push(e.Properties.Cache.ANIMATION);c.push(e.Properties.Cache.BACKGROUND);c.push(e.Properties.Cache.BORDER);c.push(e.Properties.Cache.CORNERS);c.push(e.Properties.Cache.CROP);c.push(e.Properties.Cache.FONT);c.push(e.Properties.Cache.OPACITY);c.push(new e.Properties.FontPropertyType(!0));c.push(e.Properties.Cache.SHADOW);c.push(e.Properties.Cache.TEXT_COLOR);c.push(e.Properties.Cache.TEXT_SHADOW);d._propertyTypes=c}return d._propertyTypes};d._propertyTypes=
void 0;return d}();e.PagePropertyTypes=d;(function(d){(function(c){var b=function(){function a(a){this.type=a}a.prototype.getValue=function(a){void 0===a&&(a=!1);if(void 0!==this._value)return this._value;if(void 0!==this.defaultValueOverride)return this.defaultValueOverride;if(a)return this.type.defaultValue};a.prototype.setValue=function(a){this._value=void 0===a?void 0:this.type.scrubValue(a)};a.prototype.render=function(a,b){var c=this.getValue();if(void 0!==c){var d=[];a&&(d.push(this.type.label),
d.push(": "));d.push(c.toString());b&&d.push(this.type.text);return d.join("")}};return a}();c.Variable=b})(d.Variables||(d.Variables={}))})(e.Properties||(e.Properties={}));(function(d){var c=function(b){function a(a){b.call(this,a,d.ScriptType.ActionsOrphan);this.scriptSet=a;this.actions=[]}__extends(a,b);return a}(d.ActionsScript);d.ActionsOrphan=c;c=function(b){function a(a,c){b.call(this,a,c);this.properties=[]}__extends(a,b);return a}(d.Script);d.PropertiesScript=c;c=function(b){function a(a){b.call(this,
a,d.ScriptType.InitEvent);this.scriptSet=a}__extends(a,b);return a}(d.PropertiesScript);d.InitEvent=c;c=function(b){function a(a){b.call(this,a,d.ScriptType.PropertyOrphan);this.scriptSet=a}__extends(a,b);return a}(d.PropertiesScript);d.PropertyOrphan=c;c=function(b){function a(a,c){b.call(this,a,d.ScriptType.StepEvent);this.stepIndex=c}__extends(a,b);return a}(d.ActionsScript);d.StepEvent=c;c=function(b){function a(a,c){b.call(this,a,d.ScriptType.SwitchEvent);this.switchName=c}__extends(a,b);return a}(d.ActionsScript);
d.SwitchEvent=c})(e.Scripts||(e.Scripts={}));d=function(){return function(d){void 0===d&&(d=void 0);this.autoAdvanceDelay=d;this.stopLabel=this.startLabel="";this.time=0}}();e.Step=d})(f.Models||(f.Models={}));(function(e){var d=f.Models.Actions,h=f.Util,c=function(){function a(){}a.readArray=function(b,c){var d=[];c instanceof Array&&c.forEach(function(c){d.push(a.read(b,c))});return d};a.read=function(b,c){c=c||{};d.ActionType.fromString(c.actionType);return a.readPropertiesAction(b,c)};a.readPropertiesAction=
function(a,b){var c=e.PropertyListReader.read(a.scriptSet.itemModelSet.story,b,a.scriptSet.itemProperties).properties;return new d.SetPropertiesAction(a,h.convertToNumber(b.delay),c)};return a}();e.ActionReader=c;d=f.Models.Actions;c=function(){function a(){}a.writeArray=function(a){var b=[];a.forEach(function(a){b.push(a.saveJson())});return b};a.write=function(b){return a.writePropertiesAction(b)};a.writePropertiesAction=function(a){var b={actionType:d.ActionType.toString(a.actionType)};e.PropertyWriter.writeSet(b,
a.properties);a.delay&&(b.delay=a.delay);return b};return a}();e.ActionWriter=c;c=function(){function a(){}a.read=function(a){a=a||{};a.init=a.init||{};a.init.crop=void 0===a.init.crop?!0:a.init.crop;var b=e.PropertyListReader.read(void 0,a.init,f.Models.CanvasPropertyTypes.get()),c=Math.max(0,Math.min(f.Util.convertToNumber(f.Util.getSetup(a,"padding"),0),50));return new f.Models.CanvasModel(b,c,f.Util.getSetup(a,"mediaUrl"))};return a}();e.CanvasReader=c;c=function(){function a(){}a.write=function(a){var b=
{setup:{}};a.padding&&(b.setup.padding=a.padding);a.canvasMediaUrl&&(b.setup.mediaUrl=a.canvasMediaUrl);return b};return a}();e.CanvasWriter=c;c=function(){function a(){}a.read=function(b){var c=(b.controllerType||"auto").trim().toLowerCase(),d=a.lookupExtension(c);d&&d.deserialize?b=d.deserialize(b):(f.Util.logError("ControllerReader.read()","Unknown Controller Type ("+c+")"),b=f.Extensions.Controllers.Unknown.deserialize(b));return b};a.lookupExtension=function(a){for(var b in f.Extensions.Controllers){var c=
b.toLowerCase();if(a===c)return f.Extensions.Controllers[b]}};return a}();e.ControllerReader=c;c=function(){function a(){}a.write=function(a){var b=a.serialize();b.flowType=a.flowType;b.pages=[];a.pages.forEach(function(a){b.pages.push(e.PageWriter.write(a))});return b};return a}();e.FlowWriter=c;c=function(){function a(){}a.read=function(b){b=b||{};b.init=b.init||{};var c=e.PropertyListReader.read(void 0,b.init,f.Models.FramePropertyTypes.get()),d=f.Util.convertToNumber(f.Util.getSetup(b,"aspectRatio")||
a.DEFAULT_ASPECT_RATIO,a.DEFAULT_ASPECT_RATIO);b=Math.max(0,Math.min(f.Util.convertToNumber(f.Util.getSetup(b,"padding"),0),50));return new f.Models.FrameModel(c,d,b)};a.DEFAULT_ASPECT_RATIO=16/9;return a}();e.FrameReader=c;c=function(){function a(){}a.write=function(a){var b={setup:{}};b.setup.aspectRatio=a.aspectRatio;b.setup.padding=a.padding;return b};return a}();e.FrameWriter=c;c=function(){function a(){}a.write=function(a){var b,c=f.Extensions.Items[a.itemType];c&&c.serialize?b=c.serialize(a):
(f.Util.logError("ItemWriter.write()","Unknown Item Type ("+b.itemType+")"),b={});b.itemType=a.itemType;b.scripts=e.ScriptSetWriter.write(a.scriptSet);return b};return a}();e.ItemWriter=c;c=function(){function a(){}a.write=function(b){var c={steps:[]};b.steps.forEach(function(a){c.steps.push(e.StepWriter.write(a))});c.items=[];a.writeItems(b,c);return c};a.writeItems=function(a,b){a.items.forEach(function(a){b.items.push(e.ItemWriter.write(a))})};return a}();e.PageWriter=c;var b=f.Models.Scripts,
a=f.Models.Scripts.ScriptType,h=f.Util,c=function(){function c(){}c.read=function(b,d){d=d||{};d.scriptType=d.scriptType||a.toString(a.StepEvent);var e=a.fromString(d.scriptType),f=void 0,f=e===a.StepEvent?c.readStepEvent(b,d):e===a.SwitchEvent?c.readSwitchEvent(b,d):e===a.ActionsOrphan?c.readActionsOrphan(b,d):e===a.PropertyOrphan?c.readPropertyOrphan(b,d):c.readInitEvent(b,d);d.editor=d.editor||{};f.x=h.convertToNumber(d.editor.x);f.y=h.convertToNumber(d.editor.y);return f};c.readInitEvent=function(a,
c){var d=new b.InitEvent(a);d.properties=e.PropertyListReader.read(a.itemModelSet.story,c,a.itemProperties).properties;return d};c.readStepEvent=function(a,c){var d=c.scriptType.slice(4),d=Math.max(0,h.convertToNumber(d,1)-1),d=new b.StepEvent(a,d),f=void 0;void 0!==c.actions?f=c.actions:void 0!==c.action&&(f=[c.action]);d.actions=e.ActionReader.readArray(d,f);return d};c.readSwitchEvent=function(a,c){var d=new b.SwitchEvent(a,c.switch||"");d.actions=e.ActionReader.readArray(d,c.actions);return d};
c.readActionsOrphan=function(a,c){var d=new b.ActionsOrphan(a);d.actions=e.ActionReader.readArray(d,c.actions);return d};c.readPropertyOrphan=function(a,c){var d=new b.PropertyOrphan(a);d.properties=e.PropertyListReader.read(a.itemModelSet.story,c,a.itemProperties).properties;return d};return c}();e.ScriptReader=c;c=function(){function a(){}a.write=function(a){var b=[];a.scripts.forEach(function(a){b.push(e.ScriptWriter.write(a))});return b};return a}();e.ScriptSetWriter=c;var g=f.Models,c=function(){function a(){}
a.read=function(a,b){return new g.Step(b.autoAdvanceDelay)};return a}();e.StepReader=c;c=function(){function a(){}a.write=function(a){var b={};void 0!==a.autoAdvanceDelay&&(b.autoAdvanceDelay=a.autoAdvanceDelay);return b};return a}();e.StepWriter=c;g=f.Models;c=function(){function a(){}a.read=function(a){a=a||{};var b=e.CanvasReader.read(a.canvas||{}),c=e.FrameReader.read(a.frame||{}),d=[],h=[],l=new g.Story(b,c,d,f.Util.lowercaseProperties(a.classes),h,!1);a.flows instanceof Array?a.flows.forEach(function(a){d.push(e.FlowReader.read(l,
a))}):void 0!==a.flow?d.push(e.FlowReader.read(l,a.flow)):a.pages instanceof Array?d.push(e.FlowReader.read(l,{pages:a.pages})):void 0!==a.page?d.push(e.FlowReader.read(l,{pages:[a.page]})):a.items instanceof Array?d.push(e.FlowReader.read(l,{pages:[{items:a.items}]})):void 0!==a.item&&d.push(e.FlowReader.read(l,{pages:[{items:[a.item]}]}));0===d.length&&d.push(e.FlowReader.read(l,{}));a.controllers instanceof Array?a.controllers.forEach(function(a){h.push(e.ControllerReader.read(a))}):void 0!==a.controller?
h.push(e.ControllerReader.read(a.controller)):f.defaultControllers instanceof Array&&(l.usingDefaultControllers=!0,f.defaultControllers.forEach(function(a){h.push(e.ControllerReader.read(a))}));return l};return a}();e.StoryReader=c;c=function(){function a(){}a.write=function(a){var b={};b.canvas=e.CanvasWriter.write(a.canvas);b.frame=e.FrameWriter.write(a.frame);b.flows=[];a.flows.forEach(function(a){b.flows.push(e.FlowWriter.write(a))});return b};a.stringify=function(b){return JSON.stringify(a.write(b))};
return a}();e.StoryWriter=c})(f.Serialization||(f.Serialization={}));(function(e){e.autoButton=function(b,a,c,d){void 0===c&&(c=1E3);void 0===d&&(d=2);var e,f=c,h=function(){a(!1);e=setTimeout(h,f);f/=d},w=function(){void 0!==e&&(clearTimeout(e),e=void 0,a(!0))};b.onmousedown=function(){f=c;h()};b.onmouseup=function(){w()};b.onmouseout=function(){w()}};e.checkBrowserSupport=function(){var b=document.body;return b.classList&&b.dataset&&null!==e.prefixCssStyleIfNeeded("perspective")};e.configureMetaViewport=
function(){var b=e.querySelector("meta[name='viewport']")||document.createElement("meta");b.content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no";b.parentNode!==document.head&&(b.name="viewport",document.head.appendChild(b))};e.contentLoaded=function(b,a){var c=!1,d=!0,e=b.document,f=e.documentElement,h=e.addEventListener,w=h?"addEventListener":"attachEvent",n=h?"removeEventListener":"detachEvent",l=h?"":"on",m=function(d){if("readystatechange"!=d.type||"complete"==e.readyState)("load"==
d.type?b:e)[n](l+d.type,m,!1),!c&&(c=!0)&&a.call(b,d.type||d)},q=function(){try{f.doScroll("left")}catch(a){setTimeout(q,50);return}m("poll")};if("complete"==e.readyState)a.call(b,"lazy");else{if(!h&&f.doScroll){try{d=!b.frameElement}catch(r){}d&&q()}e[w](l+"DOMContentLoaded",m,!1);e[w](l+"readystatechange",m,!1);b[w](l+"load",m,!1)}};e.createChildImageElement=function(b,a,c,d,e){void 0===d&&(d=void 0);void 0===e&&(e=void 0);var f=document.createElement("img");f.setAttribute("class",a);f.setAttribute("src",
c);void 0===d&&void 0===e&&(e=100);void 0!==d&&f.setAttribute("width",d.toString()+"%");void 0!==e&&f.setAttribute("height",e.toString()+"%");b.appendChild(f);return f};e.createStyleElement=function(b){var a=document.createElement("style");a.type="text/css";a.id=b;e.querySelector("head").appendChild(a);return a};e.createSvgElement=function(b,a,c){b=document.createElementNS("http://www.w3.org/2000/svg",b);for(var d in a)b.setAttribute(d,a[d]);c&&c.appendChild(b);return b};var d=document.createElement("dummy").style,
f=["Webkit","Moz","O","ms","Khtml"],c={};e.prefixCssStyleIfNeeded=function(b){if("undefined"===typeof c[b]){var a=b.charAt(0).toUpperCase()+b.substr(1),a=(b+" "+f.join(a+" ")+a).split(" ");c[b]=null;for(var e in a)if(void 0!==d[a[e]]){c[b]=a[e];break}}return c[b]};d=document.createElement("dummy").style;e.encodeStyle=function(b,a){d.cssText="";b=e.prefixCssStyleIfNeeded(b);d[b]=a;return d.cssText};d=document.createElement("dummy").style;e.encodeStyles=function(b){d.cssText="";var a,c;for(a in b)b.hasOwnProperty(a)&&
(c=e.prefixCssStyleIfNeeded(a),null!==c&&(d[c]=b[a]));return d.cssText};d=document.createElement("dummy").style;e.encodeStyleSheet=function(b){var a=[];b.selectors.forEach(function(c){b.hasOwnProperty(c)&&("string"===typeof b[c]?a.push(c+" { "+b[c]+" }\n"):a.push(c+" { "+e.encodeStyles(b[c])+" }\n"))});return a.join("")};e.getElementText=function(b){return b[document.body.textContent?"textContent":"innerText"]};e.lowercaseProperties=function(b){var a={},c;for(c in b)b.hasOwnProperty(c)&&(a[c.toString().trim().toLowerCase()]=
b[c]);return a};e.getSetup=function(b,a){if(void 0!==b){a=a.toLowerCase();b=e.lowercaseProperties(b);var c=b.setup;return void 0!==c&&(c=e.lowercaseProperties(c),void 0!==c[a])?c[a]:b[a]}};e.getGSTransform=function(b){var a={x:0,y:0,z:0,xPercent:0,yPercent:0,rotationX:0,rotationY:0,rotation:0,scaleX:1,scaleY:1,skewX:0};b&&(b=b._gsTransform)&&(void 0!==b.x&&(a.x=b.x),void 0!==b.y&&(a.y=b.y),void 0!==b.z&&(a.z=b.z),void 0!==b.xPercent&&(a.xPercent=b.xPercent),void 0!==b.yPercent&&(a.yPercent=b.yPercent),
void 0!==b.rotationX&&(a.rotationX=b.rotationX),void 0!==b.rotationY&&(a.rotationY=b.rotationY),void 0!==b.rotation&&(a.rotation=b.rotation),void 0!==b.scaleX&&(a.scaleX=b.scaleX),void 0!==b.scaleY&&(a.scaleY=b.scaleY),void 0!==b.skewX&&(a.skewX=b.skewX));return a};e.getStyleElement=function(b){return e.querySelector("#"+b)||e.createStyleElement(b)};e.insertIntoArray=function(b,a,c){b.splice(a,0,c)};e.logStepValues=function(b,a,c,d,e){var f=[];f.push("f");f.push(b.toString());f.push("p");f.push(a.toString());
f.push("i");f.push(c.toString());f.push("s");f.push(d.toString());f.push(" ");f.push(JSON.stringify(e));console.log(f.join(""))};e.makeArray=function(b){return[].slice.call(b)};e.querySelectorAll=function(b,a){void 0===a&&(a=document);try{return e.makeArray(a.querySelectorAll(b))}catch(c){e.logError("Util.querySelector",c.message)}};e.svgAddClass=function(b,a){e.svgRemoveClass(b,a);var c=b.getAttribute("class")||"",c=c+(0===c.length?"":" ")+a;b.setAttribute("class",c)};e.svgGetBounds=function(b){try{var a=
b.getBBox()}catch(c){console.error(c)}0===a.width&&e.logWarning("svgGetBounds","getBBox returned an empty rect");return a};e.svgRemoveClass=function(b,a){var c=b.getAttribute("class")||"",c=c.replace(new RegExp("\\s?"+a),"");b.setAttribute("class",c)};e.createChildSvgElement=function(b,a,c){void 0===c&&(c=void 0);a=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in c)a.setAttribute(d,c[d]);b.appendChild(a);return a};e.getOffset=function(b){b=b.getBoundingClientRect();var a=document.body,
c=document.documentElement,d=b.left+(window.pageXOffset||c.scrollLeft||a.scrollLeft)-(c.clientLeft||a.clientLeft||0);return{top:Math.round(b.top+(window.pageYOffset||c.scrollTop||a.scrollTop)-(c.clientTop||a.clientTop||0)),left:Math.round(d)}}})(f.Util||(f.Util={}));(function(e){(function(c){var b=f.Util,a=f.Models.Properties,d=function(){function c(){}c.generateTimeline=function(b,d,f,g,h,l,m){void 0===m&&(m=void 0);var q=c.getMoveTo(g.properties,b.items),r=[];for(b=0;b<f.length;b++)r.push({force3D:!0,
immediateRender:!1,delay:g.delay,element:f[b],elementIndex:b});var x=0,v=0,y=g.script.scriptSet.itemModelSet.flow.story;g.properties.forEach(function(b){b.type instanceof a.AnimationPropertyType?(v=b.duration.getValue()||0,x=b.stagger.getValue()||0,0<v&&b.writeCssBuckets(y,d.model,l,r,!1)):void 0!==q&&(b.type instanceof a.MoveToPropertyType||b.type instanceof a.PositionPropertyType||b.type instanceof a.RotationPropertyType||b.type instanceof a.ScalePropertyType||b.type instanceof a.SkewPropertyType)||
b.writeCssBuckets(y,d.model,l,r,!1)});e.View.postProcessCssBuckets(r,m,g.properties,l);g=h.totalDuration();for(b=0;b<f.length;b++)0<v?h.to(f[b],v,r[b],g):h.set(f[b],r[b],g),g+=x;return q};c.getMoveTo=function(b,c){var d=void 0;b.forEach(function(b){b.type instanceof a.MoveToPropertyType&&(d=b.getVariable("item").getValue(),void 0!==d&&(0>d||d>c.length)&&(d=void 0))});return d};c.generateMoveTo=function(a,c,d){if(c){var e=b.getGSTransform(c),f=[];(e.x||e.y||e.z)&&f.push("translate3d("+-e.x+"px,"+-e.y+
"px,"+-e.z+"px)");e.rotationX&&f.push("rotateX("+-e.rotationX+"deg)");e.rotationY&&f.push("rotateY("+-e.rotationY+"deg)");e.rotation&&f.push("rotate("+-e.rotation+"deg)");var g=Math.max(0,Math.min(0===e.scaleX?1:1/e.scaleX,10)),h=Math.max(0,Math.min(0===e.scaleY?1:1/e.scaleY,10));1!==e.scaleX&&f.push("scaleX("+g+")");1!==e.scaleY&&f.push("scaleY("+h+")");e.skewX&&f.push("skewX("+-e.skewX+"deg)");console.log(f.join(" "));console.log(c._gsTransform);c={transform:f.join(" "),xPercent:-50,yPercent:-50};
d.to(a,1.2,c)}};return c}();c.SetPropertiesAction=d})(e.Actions||(e.Actions={}));(function(c){var b=function(a){function b(c,d,e){a.call(this,c,d,e);this.model=c}__extends(b,a);return b}(c.FlowView);c.PlacementFlowView=b})(e.Flows||(e.Flows={}));var d=function(){function c(b,a,c,d,e){this.step=b;this.flowIndex=a;this.pageIndex=c;this.stepIndex=d;this.sequencedItems=e;this.playerStepIndex=this.time=0;this.label=a.toString()+"-"+c.toString()+"-"+d.toString()+"-";this.startLabel=this.label+"start";this.stopLabel=
this.label+"stop";b.startLabel=this.startLabel;b.stopLabel=this.stopLabel}c.prototype.isAtStart=function(b){return.02>Math.abs(b-this.startTime)};c.prototype.isAtEnd=function(b){return.02>Math.abs(b-this.stopTime)};c.prototype.getSubStepCount=function(){var b=0;this.sequencedItems.forEach(function(a){b=Math.max(b,a.getCountOfSubSteps())});return b};return c}();e.Step=d;var h=f.Types,d=function(){function c(b,a){this.generateTimeline(b,a)}c.prototype.generateTimeline=function(b,a){var c=this;TweenMax.defaultOverwrite=
"none";TweenMax.defaultEase=h.Eaze.DEFAULT.ease;void 0!==this.timeline&&this.timeline.kill();this.timeline=new TimelineMax({autoRemoveChildren:!1,onUpdate:a});this.timeline.addLabel("initialize",0);var d=b.story,e=b.canvas,f=e.size,q=b.size,r=b.camera,n=r.size,l={fontFamily:"arial"};e.fullScreen||(l.height=f.height);e.initializeProperties(d,[e.div],n,this.timeline,d.canvas.init,!1,l);l={width:q.width,height:q.height};b.initializeProperties(d,[b.div],n,this.timeline,d.frame.init,!1,l);r.flows.forEach(function(a){var e=
n.getContainedSize(a.pageAspectRatio());a.pages.forEach(function(a){a.initializeProperties(d,[a.div],e,c.timeline,a.model.init,!1);a.items.forEach(function(a){a.initializeItem(c.timeline,b.camera.size)})});a.initializePlacement(c.timeline)});var m=void 0;r.flows.forEach(function(a){m=a.generateStepsActions(c.timeline,m)});return this.timeline};return c}();e.Timeline=d})(f.Views||(f.Views={}));f.reload=B;f.bootstrap=r;r()})(ProStyle||(ProStyle={}));
