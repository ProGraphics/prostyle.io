/*!
 * VERSION: 1.2.0
 * DATE: 29-Sep-2015
 * UPDATES AND DOCS AT: https://prostyle.io/
 * 
 * @copyright Copyright (c) 2013-2015, Pro Graphics, Inc. All rights reserved. 
 * @license This work is subject to the terms at https://prostyle.io/
 * @author: Gary Chamberlain, gary@pro.graphics.
 * @note: This work contains an embedded copy of SplitText used with permission under license.
          SplitText is Copyright (c) 2008-2015,  Greensock.
 * 
 **/

var ProStyle;
(function(g){g.mediaRootUrl=void 0;g.defaultControllers=[{controllerType:"auto"},{controllerType:"resize"}];(function(g){g._empty=!0})(g.Stories||(g.Stories={}));(function(g){(function(g){g.svg='<svg viewBox="0 0 880 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M866 476c9.333 6.667 14 14.667 14 24c0 9.333 -4.667 16.667 -14 22c0 0 -372 248 -372 248c-14.667 9.333 -27 11.333 -37 6c-10 -5.333 -15 -17.333 -15 -36c0 0 0 -482 0 -482c0 -18.667 5 -30.667 15 -36c10 -5.333 22.333 -3.333 37 6c0 0 372 248 372 248m-454 0c9.333 6.667 14 14.667 14 24c0 9.333 -4.667 16.667 -14 22c0 0 -360 248 -360 248c-13.333 9.333 -25.333 11.333 -36 6c-10.667 -5.333 -16 -17.333 -16 -36c0 0 0 -482 0 -482c0 -18.667 5.333 -30.667 16 -36c10.667 -5.333 22.667 -3.333 36 6c0 0 360 248 360 248" />  </g></svg>'})(g.fastForward||(g.fastForward=
{}));(function(g){g.svg='<svg viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M 235.53172,912.14362 C 222.1737,911.65675 192.88213,908.97613 179.7563,907.0393 142.78725,901.5842 111.49908,892.23905 88.608558,879.81533 25.450284,845.53645 -2.363022,754.52992 11.595266,627.82372 25.966799,497.36601 84.182786,347.68421 159.54762,247.41661 197.38417,197.07776 237.03803,160.39415 278.89341,137.01036 374.98294,83.32699 506.9775,80.13258 647.3983,128.09214 c 49.55485,16.92505 104.25567,43.36958 148.76794,71.92026 67.85023,43.51989 124.36319,97.22188 156.87086,149.06805 18.94366,30.21307 31.87969,63.3221 38.06746,97.43144 2.33759,12.88545 2.53863,16.10095 2.59068,41.42752 0.0635,30.88207 -0.93881,40.20361 -6.88779,64.06813 -4.43071,17.77393 -9.49209,31.52197 -18.08915,49.13496 -8.23109,16.86308 -14.88167,27.71 -25.9912,42.39094 C 899.81543,700.24002 812.14549,761.98761 706.85748,809.66081 557.06683,877.48427 374.39035,917.2046 235.53172,912.14362 z m 20.199,-175.08151 c 6.38062,-2.666 6.29534,-1.92178 6.29534,-54.94359 0,-44.83349 0.10257,-47.73586 1.686,-47.70791 0.92731,0.0164 4.93759,0.46167 8.91174,0.9896 31.04792,4.12438 61.94393,2.5304 86.22704,-4.44863 37.74398,-10.8477 65.19426,-39.86566 76.5239,-80.89416 5.21836,-18.89745 5.3677,-20.86694 5.3677,-70.78889 0,-44.41671 -0.10617,-47.267 -2.14793,-57.66335 -10.62749,-54.11369 -43.50561,-87.90953 -95.15856,-97.81468 -34.23802,-6.56561 -88.65352,-3.28975 -141.91157,8.54321 -17.90378,3.97789 -23.30288,6.3891 -24.9484,11.14185 -0.87518,2.52775 -1.1629,48.97756 -1.2043,194.41663 -0.0485,170.42766 0.10664,191.43468 1.43437,194.23266 1.3611,2.86829 3.29589,4.39796 7.18213,5.67829 0.79484,0.26186 16.52472,0.51032 34.95531,0.55216 26.91396,0.0611 34.15522,-0.19347 36.78723,-1.29319 z m 36.16169,-170.6532 c -0.79483,-0.16956 -7.83992,-0.8255 -15.65574,-1.45764 l -14.21061,-1.14936 0,-84.09937 0,-84.09937 2.64944,-0.54561 c 4.32406,-0.89047 29.87188,-2.4793 39.7415,-2.47153 19.88057,0.0156 31.80455,5.28992 40.05624,17.71784 7.62813,11.4888 9.88532,23.73156 10.67225,57.88521 0.94764,41.1288 -1.53911,63.6562 -8.46381,76.6734 -5.72666,10.76513 -16.75587,18.88668 -28.66728,21.10972 -4.72311,0.88147 -22.63346,1.1809 -26.12199,0.43671 z m 525.851,69.28618 c 42.38495,-6.01923 75.22316,-29.25194 92.24766,-65.26424 11.84331,-25.05233 14.87524,-43.63329 14.87524,-91.16232 0,-40.01963 -1.78087,-55.69933 -8.65755,-76.22473 -13.90501,-41.50378 -45.23465,-69.21991 -89.13065,-78.85057 -28.6265,-6.28057 -64.499,-4.3605 -90.6127,4.85004 -45.55567,16.06787 -72.81618,52.13077 -79.95784,105.77608 -1.95361,14.67474 -1.92487,74.08051 0.043,89.09299 5.72313,43.65858 25.18804,75.73978 57.80606,95.27346 26.94864,16.13849 64.15813,22.08028 103.38668,16.50929 z m -38.93145,-72.11263 c -13.50019,-2.93712 -23.06811,-10.72915 -29.29281,-23.85582 -6.58723,-13.89118 -7.22294,-19.21222 -7.22294,-60.45811 0,-41.45888 0.64564,-46.8115 7.29042,-60.44081 8.16765,-16.7529 20.8752,-24.30337 40.94711,-24.32965 17.26097,-0.0226 28.83801,5.77322 37.13719,18.59198 8.46721,13.0783 10.47888,25.78284 10.47888,66.17848 0,38.81099 -1.53158,49.75666 -8.93668,63.86774 -8.79754,16.76446 -29.22827,25.05258 -50.40117,20.44619 z m -221.41931,65.75453 3.2969,-3.59872 0.03,-107.19579 0.03,-107.19581 8.93659,-4.08853 c 20.61319,-9.43061 36.60854,-13.59307 55.5365,-14.45218 11.51659,-0.52274 12.1389,-0.6588 14.69231,-3.2122 l 2.66628,-2.66634 0,-29.49265 c 0,-32.3359 -0.065,-32.73152 -5.87582,-35.73638 -4.84819,-2.50711 -19.8152,-1.095 -36.08282,3.40434 -9.76904,2.70194 -27.10272,11.03633 -34.87766,16.76991 -3.31328,2.44336 -6.2397,4.44247 -6.50316,4.44247 -0.26345,0 -0.47901,-3.43499 -0.47901,-7.63334 0,-7.23931 -0.15301,-7.78635 -2.9644,-10.59774 l -2.96441,-2.96439 -36.03933,0 -36.03934,0 -3.14635,2.81116 -3.14635,2.81117 -0.28573,145.31628 c -0.1992,101.30298 0.027,146.3959 0.74674,148.88076 1.02228,3.52923 4.48752,6.81938 8.20987,7.79506 1.05978,0.27777 17.45985,0.43678 36.44462,0.35334 l 34.51776,-0.1517 3.29689,-3.59872 z" />  </g></svg>'})(g.logo||
(g.logo={}));(function(g){g.svg='<svg viewBox="0 0 530 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M440 150c60 0 90 21.333 90 64c0 0 0 570 0 570c0 44 -30 66 -90 66c-60 0 -90 -22 -90 -66c0 0 0 -570 0 -570c0 -42.667 30 -64 90 -64c0 0 0 0 0 0m-350 0c60 0 90 21.333 90 64c0 0 0 570 0 570c0 44 -30 66 -90 66c-60 0 -90 -22 -90 -66c0 0 0 -570 0 -570c0 -42.667 30 -64 90 -64c0 0 0 0 0 0" />  </g></svg>'})(g.pause||(g.pause={}));(function(g){g.svg='<svg viewBox="0 0 500 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M486 474c9.333 6.667 14 15.333 14 26c0 9.333 -4.667 17.333 -14 24c0 0 -428 266 -428 266c-16 10.667 -29.667 12.667 -41 6c-11.333 -6.667 -17 -20 -17 -40c0 0 0 -514 0 -514c0 -20 5.667 -33.333 17 -40c11.333 -6.667 25 -4.667 41 6c0 0 428 266 428 266" />  </g></svg>'})(g.play||
(g.play={}));(function(g){g.svg='<svg viewBox="0 0 600 1000" xmlns="http://www.w3.org/2000/svg">  <g>    <path d="M174 500c0 -9.333 4.667 -17.333 14 -24c0 0 364 -228 364 -228c13.333 -9.333 24.667 -11 34 -5c9.333 6 14 17.667 14 35c0 0 0 442 0 442c0 17.333 -4.667 29 -14 35c-9.333 6 -20.667 4.333 -34 -5c0 0 -364 -228 -364 -228c-9.333 -6.667 -14 -14 -14 -22c0 0 0 0 0 0m-174 -234c0 -38.667 25.333 -58 76 -58c49.333 0 74 19.333 74 58c0 0 0 466 0 466c0 38.667 -24.667 58 -74 58c-50.667 0 -76 -19.333 -76 -58c0 0 0 -466 0 -466c0 0 0 0 0 0" />  </g></svg>'})(g.toStart||
(g.toStart={}))})(g.Svg||(g.Svg={}));(function(g){g.setElementText=function(g,E){g[void 0!==document.body.textContent?"textContent":"innerText"]=E}})(g.Util||(g.Util={}));(function(g){var n=function(){return function(g){this.initPropertyLists=g;this.init=g[0]}}();g.Model=n})(g.Models||(g.Models={}));(function(g){var n=function(){function g(n,z){void 0===n&&(n=g.DEFAULT_WIDTH);void 0===z&&(z=g.DEFAULT_HEIGHT);this.width=n;this.height=z;this.width=Math.max(g.MIN,Math.min(n,g.MAX));this.height=Math.max(g.MIN,
Math.min(z,g.MAX))}g.prototype.aspectRatio=function(){return this.height?this.width/this.height:1};g.prototype.getContainedSize=function(n){var z=this.aspectRatio();return n<z?new g(this.height*n,this.height):n>z?new g(this.width,this.width/n):new g(this.width,this.height)};g.DEFAULT_WIDTH=1024;g.DEFAULT_HEIGHT=768;g.MIN=1;g.MAX=4096;return g}();g.Size=n})(g.Types||(g.Types={}));(function(g){g.splitNoParens=function(g){var E=0,H=0,z=[];g=g.match(/([^()]+)|([()])/g);for(var f=g.length,e,d="",c=0;c<
f;c++)e=g[c],"("===e?E++:")"===e&&H++,0!==E?(d+=e,E===H&&(z[z.length-1]+=d,E=H=0,d="")):z=z.concat(e.match(/([^,]+)/g));return z};g.isAbsoluteUrl=function(g){if(g){g=g.toString().trim();if(0===g.indexOf("//"))return!0;g=g.toLowerCase();if(0===g.indexOf("http://")||0===g.indexOf("https://")||0===g.indexOf("ftp://"))return!0}return!1}})(g.Util||(g.Util={}))})(ProStyle||(ProStyle={}));
var __extends=this&&this.__extends||function(g,y){function n(){this.constructor=g}for(var E in y)y.hasOwnProperty(E)&&(g[E]=y[E]);n.prototype=y.prototype;g.prototype=new n};
(function(g){function y(f){if(void 0!==f.dataset.prostyle){"relative"!==f.style.position&&"absolute"!==f.style.position&&(f.style.position="relative");var e=document.createElement("progress");e.value=1;e.max=2;e.style.position="absolute";e.style.left="50%";e.style.top="50%";e.style.transform="translate(-50%,-50%)";f.innerHTML="";f.appendChild(e)}}function n(){var f=document.body;if(f)if(void 0!==f.dataset.prostyle)y(f);else for(var f=document.getElementsByTagName("div"),e=0;e<f.length;e++)y(f[e])}
function E(f){var e=f.dataset.prostyle;if(void 0!==e){var d=g.Stories[e];void 0===d?f.innerHTML="<strong style='background-color: #FFF;color:#C00'>Missing story at ProStyle.Stories."+e+"</strong>":(g.Util.setElementText(f,""),e=f.proStyleCanvas,f.proStyleCanvas=void 0,e&&e.stopControllers(),d=g.Serialization.StoryReader.read(d),e=new g.Views.CanvasView(d,f),e.startControllers(),f.proStyleCanvas=e)}}function H(){var f=document.body;if(f)if(void 0!==f.dataset.prostyle)E(f);else for(var f=document.getElementsByTagName("div"),
e=0;e<f.length;e++)E(f[e])}function z(){n();window.addEventListener("load",function(){void 0===g.mediaRootUrl&&(g.mediaRootUrl=window.ProStyle_mediaRootUrl);n();H()})}(function(f){var e=function(d){function c(b,a,h){d.call(this,[b]);this.padding=a;this.canvasMediaUrl=h;this.setAdjustedImageRootUrl(h)}__extends(c,d);c.prototype.setAdjustedImageRootUrl=function(b){if(b&&(b=b.toString().trim(),g.Util.isAbsoluteUrl(b))){this.mediaUrl=b;return}var a=g.mediaRootUrl;if(a){var h=a.lastIndexOf("/")===a.length-
1;b&&(a=0===b.indexOf("/")?h?a+b.substr(1):a+b:h?a+b:a+("/"+b))}else a=b;a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");this.mediaUrl=a};c.prototype.adjustImageUrl=function(b){0===b.toLowerCase().indexOf("url(")&&(b=b.substr(4,b.length-5).trim());if(0===b.indexOf("data:"))return b;this.mediaUrl&&(g.Util.isAbsoluteUrl(b)||(b=0===b.indexOf("/")?this.mediaUrl+b.substr(1):this.mediaUrl+b));return b};return c}(f.Model);f.CanvasModel=e;e=function(d){function c(b,a,h){d.call(this,[b]);this.aspectRatio=a;this.padding=
h}__extends(c,d);return c}(f.Model);f.FrameModel=e})(g.Models||(g.Models={}));(function(f){var e=function(){function d(c,b){void 0===c&&(c=1);this.x=c;this.y=b;void 0===b&&(this.y=c)}d.fromJson=function(c){if(void 0===c||null===c)return new d;var b=100,a=void 0;return"number"===typeof c?new d(c/100,c/100):"string"===typeof c?(c=c.split(","),0<c.length&&(b=g.Util.convertToNumber(c[0].trim(),100)/100),1<c.length&&(a=g.Util.convertToNumber(c[1].trim(),100)/100),new d(b,a)):c instanceof Array?(0<c.length&&
(b=g.Util.convertToNumber((c[0]||"").toString().trim(),100)/100),1<c.length&&(a=g.Util.convertToNumber((c[1]||"").toString().trim(),100)/100),new d(b,a)):new d(g.Util.convertToNumber(c.x,100)/100,void 0===c.y?void 0:g.Util.convertToNumber(c.y,100)/100)};d.prototype.equals=function(c){return void 0===c?!1:this.x===c.x&&this.y===c.y};return d}();f.Scale=e})(g.Types||(g.Types={}));(function(f){f.convertToNumber=function(e,d,c){void 0===d&&(d=0);void 0===c&&(c=!1);"string"==typeof e&&c&&(e=parseFloat(e));
return isNaN(e)?d:Number(e)};f.convertToNumber2=function(e){return""===e?void 0:isNaN(e)?void 0:Number(e)}})(g.Util||(g.Util={}));(function(f){var e=function(){function d(c,b,a){void 0===c&&(c=0);void 0===b&&(b=0);void 0===a&&(a=0);this.x=c;this.y=b;this.z=a}d.fromJson=function(c){if(void 0===c||null===c)return new d;var b=0,a=0,h=0;return"number"===typeof c?new d(c):"string"===typeof c?(c=c.split(","),0<c.length&&(b=g.Util.convertToNumber(c[0].trim())),1<c.length&&(a=g.Util.convertToNumber(c[1].trim())),
2<c.length&&(h=g.Util.convertToNumber(c[2].trim())),new d(b,a,h)):c instanceof Array?(0<c.length&&(b=g.Util.convertToNumber((c[0]||"").toString().trim())),1<c.length&&(a=g.Util.convertToNumber((c[1]||"").toString().trim())),2<c.length&&(h=g.Util.convertToNumber((c[2]||"").toString().trim())),new d(b,a,h)):new d(g.Util.convertToNumber(c.x),g.Util.convertToNumber(c.y),g.Util.convertToNumber(c.z))};d.prototype.equals=function(c){return void 0===c?!1:this.x===c.x&&this.y===c.y&&this.z===c.z};return d}();
f.Xyz=e;e=function(){function d(c,b,a,h){void 0===h&&(h=1);this.position=c;this.rotation=b;this.scale=a;this.opacity=h;Math.max(0,Math.min(h,1))}d.prototype.duplicate=function(){return new d(new f.Xyz(this.position.x,this.position.y,this.position.z),new f.Xyz(this.rotation.x,this.rotation.y,this.rotation.z),new f.Scale(this.scale.x,this.scale.y),this.opacity)};d.prototype.adjust=function(c){this.position.x+=c.position.x;this.position.y+=c.position.y;this.position.z+=c.position.z;this.rotation.x+=
c.rotation.x;this.rotation.y+=c.rotation.y;this.rotation.z+=c.rotation.z;this.scale.x=Math.max(0,this.scale.x*c.scale.x);this.scale.y=Math.max(0,this.scale.y*c.scale.y);this.opacity=Math.max(0,Math.min(this.opacity*c.opacity,1))};d.prototype.renderCss=function(c,b,a){void 0===b&&(b={});void 0===a&&(a=!0);a&&(b.xPercent=-50,b.yPercent=-50);a=(c.width+c.height)/2;b.x=this.position.x/100*c.width;b.y=this.position.y/100*c.height;b.z=this.position.z/100*a;b.zIndex=10*this.position.z;b.rotationX=this.rotation.x;
b.rotationY=this.rotation.y;b.rotationZ=this.rotation.z;b.scaleX=this.scale.x;b.scaleY=this.scale.y;b.autoAlpha=this.opacity;return b};d.fromJson=function(c){c=c||{};var b=new f.Xyz,a=new f.Xyz,h=new f.Scale,I=1,p;for(p in c)if(c.hasOwnProperty(p)){var k=p.trim().toLowerCase();"position"===k||"pos"===k?b=f.Xyz.fromJson(c[p]):"rotation"===k||"rotate"===k||"rot"===k?a=f.Xyz.fromJson(c[p]):"scale"===k?h=f.Scale.fromJson(c[p]):"opacity"===k&&(k=c[p],"number"===typeof k?I=k/100:"string"===typeof k?I=g.Util.convertToNumber(k,
100)/100:k instanceof Array?0<k.length&&(I=g.Util.convertToNumber(k[0],100)/100):I=g.Util.convertToNumber(k.percent,100)/100)}return new d(b,a,h,Math.max(0,Math.min(I,1)))};d.prototype.equals=function(c){return void 0===c||void 0===c.position||void 0===c.rotation||void 0===c.scale||void 0===c.opacity||!1===this.position.equals(c.position)||!1===this.rotation.equals(c.rotation)||!1===this.scale.equals(c.scale)?!1:this.opacity===c.opacity};return d}();f.Placement=e})(g.Types||(g.Types={}));(function(f){(function(d){var c=
function(){function b(a,h){this.propertyTypes=a;this.properties=h}b.prototype.getPropertyOfType=function(a){for(var h=0;h<this.properties.length;h++){var b=this.properties[h];if(b.type===a)return b}};b.prototype.hasAnythingSet=function(){for(var a=0;a<this.properties.length;a++)for(var h=this.properties[a],b=0;b<h.type.variableTypes.length;b++)if(void 0!==h[h.type.variableTypes[b].jsonNames[0]].getValue())return!0;return!1};return b}();d.PropertyList=c})(f.Properties||(f.Properties={}));var e=function(d){function c(b,
a){d.call(this,[b]);this.flow=a;this.steps=[];this.items=[];this.story=a.story}__extends(c,d);c.prototype.insertStep=function(b){g.Util.insertIntoArray(this.steps,b,new f.Step);this.canvasScriptSet.insertStep(b);this.frameScriptSet.insertStep(b);this.pageScriptSet.insertStep(b);this.items.forEach(function(a){a.scriptSets.forEach(function(a){a.insertStep(b)})})};c.prototype.deleteStep=function(b){this.steps.splice(b,1);this.canvasScriptSet.deleteStep(b);this.frameScriptSet.deleteStep(b);this.pageScriptSet.deleteStep(b);
this.items.forEach(function(a){a.scriptSets.forEach(function(a){a.deleteStep(b)})})};c.prototype.deleteItem=function(b){this.items.splice(b,1)};return c}(f.Model);f.PageModel=e;(function(d){var c=function(b){function a(a,c,p,k,d){void 0===d&&(d=void 0);b.call(this,[]);this.story=a;this.flowType=c;this.placement=p;this.pageAspectRatio=k;this.pageClass=d;this.pages=[]}__extends(a,b);a.prototype.getDefaultPageClassName=function(){return this.pageClass};a.prototype.getDefaultPageClassValue=function(){};
a.prototype.serialize=function(){g.Util.logError("ProStyle.Models.Flows.Flow.serialize","Abstract base method called.")};a.prototype.createView=function(a,b){g.Util.logError("ProStyle.Models.Flows.Flow.createView","Abstract base method called.")};return a}(f.Model);d.FlowModel=c})(f.Flows||(f.Flows={}));e=function(){return function(d,c,b,a,h,I){this.canvas=d;this.frame=c;this.flows=b;this.classes=a;this.controllers=h;this.usingDefaultControllers=I}}();f.Story=e;(function(d){var c=function(){return function(b,
a,h,c,p,k,d,e,f,g,m,r){void 0===b&&(b=void 0);void 0===a&&(a=void 0);void 0===h&&(h=0);void 0===c&&(c=void 0);void 0===p&&(p=void 0);void 0===k&&(k=void 0);void 0===d&&(d=void 0);void 0===e&&(e=void 0);void 0===f&&(f=void 0);void 0===g&&(g=void 0);void 0===m&&(m=void 0);void 0===r&&(r=void 0);this.sizeW=b;this.sizeH=a;this.borderSize=h;this.image=c;this.layout=p;this.ar=k;this.x=d;this.y=e;this.w=f;this.h=g;this.clip=m;this.repeat=r}}();d.BackgroundCache=c;c=function(){function b(a){var h=this;this.type=
a;a.variableTypes.forEach(function(a){h[a.jsonNames[0]]=a.createVariable()})}b.prototype.getVariable=function(a){return this[a]};b.prototype.renderLabel=function(){return this.type.renderLabel(this)};b.prototype.writeCssBuckets=function(a,h,b,c,k){this.type.writeCssBuckets(this,a,h,b,c,k)};return b}();d.Property=c})(f.Properties||(f.Properties={}));(function(d){(function(c){c[c.InitEvent=0]="InitEvent";c[c.StepEvent=1]="StepEvent";c[c.SwitchEvent=2]="SwitchEvent";c[c.ActionsOrphan=3]="ActionsOrphan";
c[c.PropertyOrphan=4]="PropertyOrphan"})(d.ScriptType||(d.ScriptType={}));(function(c){c.fromString=function(b){b=(b||"step").toString().toLowerCase().trim();if("init"===b)return c.InitEvent;if(0===b.indexOf("step"))return c.StepEvent;if("switch"===b)return c.SwitchEvent;if("actionsorphan"===b)return c.ActionsOrphan;if("propertyorphan"===b)return c.PropertyOrphan;g.Util.logError("ScriptType.fromString()","Unknown script type: "+b);return c.StepEvent};c.toString=function(b){return b===c.InitEvent?
"init":b===c.StepEvent?"step":b===c.SwitchEvent?"switch":b===c.ActionsOrphan?"actionsorphan":b===c.PropertyOrphan?"propertyorphan":"init"}})(d.ScriptType||(d.ScriptType={}))})(f.Scripts||(f.Scripts={}))})(g.Models||(g.Models={}));(function(f){var e=g.Models,d=g.Models.Scripts,c=g.Models.Properties,b=function(){function a(a,b){this.model=a;this.element=b;this.div=void 0;this.bgCache=new c.BackgroundCache;if(b instanceof HTMLDivElement||b instanceof HTMLBodyElement)this.div=b;b.proCache={}}a.prototype.initializeProperties=
function(h,b,p,k,d,e,f,g){void 0===f&&(f=void 0);void 0===g&&(g=void 0);TweenMax.set(b,{clearProps:"all"});void 0!==f&&TweenMax.set(b,f);var m=[];for(f=0;f<b.length;f++){var r={force3D:!0,element:b[f],elementIndex:f};e&&(r.xPercent=-50,r.yPercent=-50);m.push(r)}var D=[];d.properties.forEach(function(a){D["prostyle_"+a.type.jsonNames[0]]=a});var t=this.bgCache;t.sizeH=100;t.sizeW=100;t.borderSize=0;var O=!1,A=void 0;d.propertyTypes.forEach(function(a){var b=D["prostyle_"+a.jsonNames[0]];void 0===b&&
(b=new c.Property(a));if(a instanceof c.BackgroundPropertyType)A=b;else if(b.writeCssBuckets(h,void 0,p,m,!0),a instanceof c.SizePropertyType){if(t.sizeW=b.getVariable("width").getValue(!1)||t.sizeW,t.sizeH=b.getVariable("height").getValue(!1)||t.sizeH,b.getVariable("width").getValue(!1)||b.getVariable("height").getValue(!1))O=!0}else a instanceof c.BorderPropertyType&&(t.borderSize=b.getVariable("size").getValue(!1)||t.borderSize,b.getVariable("size").getValue(!1)&&(O=!0))});A&&(A.sizeChanged=O,
A.cache=t,A.writeCssBuckets(h,void 0,p,m,!0));a.postProcessCssBuckets(m,g,d.properties,p);for(f=0;f<b.length;f++)k.set(b[f],m[f],"initialize")};a.prototype.generateEventTimeline=function(a,b,c,k,d,g,q){var l=this;void 0===q&&(q=void 0);var m=new TimelineMax;k.actions.forEach(function(k){if(k.actionType===e.Actions.ActionType.SetProperties){var D=m.totalDuration(),t=f.Actions.SetPropertiesAction.generateTimeline(a,l,b,k,m,c,q);void 0!==t&&(k=m.totalDuration(),(t=0<t?a.items[t-1].div:void 0)&&d.seek(g+
"+="+k),k=new TimelineMax,f.Actions.SetPropertiesAction.generateMoveTo(a.div,t,k),m.add(k,D))}});d.add(m,g)};a.prototype.generateActionsForStep=function(a,b,c,k,e,f,g,l){var m=this;void 0===l&&(l=void 0);g.scripts.forEach(function(g){g.type===d.ScriptType.StepEvent&&g.stepIndex===e&&m.generateEventTimeline(a,b,c,g,k,f,l)})};a.postProcessCssBuckets=function(a,b,c,k){for(var d=0;d<a.length;d++){var e=a[d],f=e.element.proCache;void 0!==f&&(void 0!==e.width&&(f.width=e.width),void 0!==e.height&&(f.height=
e.height))}b&&b(c,a,k);a.forEach(function(a){delete a.element;delete a.elementIndex})};return a}();f.View=b})(g.Views||(g.Views={}));(function(f){var e=function(){function d(){}d.read=function(c,b){b.setup=b.setup||{};var a=(b.flowType||"simple").trim().toLowerCase(),h,I=d.lookupExtension(a);I&&I.deserialize?h=I.deserialize(c,b):(g.Util.logError("FlowReader.read()","Unknown Flow Type ("+a+")"),h=g.Extensions.Flows.Unknown.deserialize(c,b));b.pages instanceof Array?b.pages.forEach(function(a){h.pages.push(f.PageReader.read(h,
a))}):h.pages.push(f.PageReader.read(h,b.page||{}));return h};d.lookupExtension=function(c){for(var b in g.Extensions.Flows){var a=b.toLowerCase();if(c===a)return g.Extensions.Flows[b]}};return d}();f.FlowReader=e})(g.Serialization||(g.Serialization={}));(function(f){var e=g.Util,d=function(c){function b(a,h){var b=this;c.call(this,a.frame,e.createChildDivElement(h.div,"prostyle prostyle-camera"));this.story=a;this.frame=h;this.flows=[];this.resize();a.flows.forEach(function(a,h){b.flows.push(a.createView(b,
h))})}__extends(b,c);b.prototype.resize=function(){var a=this.frame.size,h=(100-this.story.frame.padding)/100,a=new g.Types.Size(a.width*h,a.height*h);1>a.width&&(a.width=1);1>a.height&&(a.height=1);this.size=a;TweenLite.set(this.div,{width:this.size.width,height:this.size.height,clearProps:"transform"})};b.prototype.stepStopped=function(a,h){a.pause(h.stopLabel)};return b}(f.View);f.CameraView=d;e=g.Util;d=function(c){function b(a,h){c.call(this,a.frame,e.createChildDivElement(h.div,"prostyle prostyle-frame"));
this.story=a;this.canvas=h;this.resize();this.camera=new f.CameraView(a,this)}__extends(b,c);b.prototype.stepStopped=function(a,h){a.pause(h.stopLabel)};b.prototype.resize=function(){var a=this.canvas.size,h=this.story.frame.aspectRatio,b=(100-this.story.canvas.padding)/100,a=new g.Types.Size(a.width*b,a.height*b);1>a.width&&(a.width=1);1>a.height&&(a.height=1);b=a.aspectRatio();b>h?a.width=a.height*h:b<h&&(a.height=a.width/h);this.size=a;TweenLite.set(this.div,{width:this.size.width,height:this.size.height,
clearProps:"transform"});void 0!==this.camera&&this.camera.resize()};return b}(f.View);f.FrameView=d})(g.Views||(g.Views={}));(function(f){(function(e){var d=function(){function c(){this.handlers=[]}c.prototype.on=function(b){this.handlers.push(b)};c.prototype.off=function(b){this.handlers=this.handlers.filter(function(a){return a!==b})};c.prototype.trigger=function(b){this.handlers&&this.handlers.slice(0).forEach(function(a){return a(b)})};c.prototype.dispose=function(){this.handlers=[]};return c}();
e.LiteEvent=d})(f.Events||(f.Events={}))})(g.Util||(g.Util={}));(function(f){var e=g.Util.Events,d=g.Views,c=function(){function b(a){this.frame=a;this.steps=[];this.animating=!1;this.currentSubStep=0;this.state={progress:0,time:0,step:void 0,subStep:0};this.progressChanged=new e.LiteEvent;this.stateChanged=new e.LiteEvent;this.stepComplete=new e.LiteEvent;this.refreshTimeline(a);this.currentStep=this.getStepAtTime(0)}b.prototype.getDuration=function(a){void 0===a&&(a=!1);return a?this.timeline.totalDuration():
this.timeline.duration()};b.prototype.getTime=function(a){void 0===a&&(a=!1);return a?this.timeline.totalTime():this.timeline.time()};b.prototype.refreshTimeline=function(a){var h=this,b=0,c=!0;void 0!==this.timeline&&(b=this.timeline.time(),c=this.isPaused(),this.timeline.kill());this.timeline=(new d.Timeline(a,this.triggerProgressChanged.bind(this))).timeline;this.steps=[];var k=0;a.camera.flows.forEach(function(a){a.pages.forEach(function(a){a.steps.forEach(function(a){a.playerStepIndex=k;k++;
h.steps.push(a);h.timeline.addCallback(h.triggerStepComplete.bind(h),a.stopLabel,[a])})})});this.currentStep=void 0===this.currentStep?this.steps[0]:this.steps[Math.min(this.currentStep.playerStepIndex,this.steps.length-1)];this.moveTo(b,!1,!c)};b.prototype.isAtStoryStart=function(){return.02>this.timeline.time()};b.prototype.isAtStoryEnd=function(){var a=this.timeline.time(),h=this.timeline.duration();return.02>Math.abs(h-a)};b.prototype.isAtStepStart=function(a){void 0===a&&(a=!1);return this.currentStep.isAtStart(this.timeline.time())?
(a&&this.timeline.seek(this.currentStep.startLabel),!0):!1};b.prototype.isAtStepEnd=function(){return this.currentStep.isAtEnd(this.timeline.time())};b.prototype.isPaused=function(){return this.timeline.paused()};b.prototype.isFirstStep=function(){return 0===this.currentStep.playerStepIndex};b.prototype.isLastStep=function(){return this.currentStep.playerStepIndex===this.steps.length-1};b.prototype.triggerStateChanged=function(){this.stateChanged.trigger(this.timeline.paused())};b.prototype.triggerProgressChanged=
function(){var a=this.state;a.time=this.timeline.time();a.progress=this.timeline.progress();if(a.time<this.currentStep.startTime||a.time>this.currentStep.stopTime)this.currentStep=this.getStepAtTime(a.time);a.step=this.currentStep;this.progressChanged.trigger(a)};b.prototype.triggerStepComplete=function(a){this.animating||(this.pause(a.stopTime),this.stepComplete.trigger(a))};b.prototype.getNextStep=function(a){void 0===a&&(a=!0);var h=this.currentStep.playerStepIndex+1;h>=this.steps.length&&(h=a?
0:this.currentStep.playerStepIndex);return this.steps[h]};b.prototype.getPriorStep=function(){var a=this.currentStep.playerStepIndex-1;0>a&&(a=this.steps.length-1);return this.steps[a]};b.prototype.getStepAtTime=function(a){if(a>=this.currentStep.startTime&&a<=this.currentStep.stopTime)return this.currentStep;for(var h=this.steps[0],b=1;b<this.steps.length;b++){var c=this.steps[b];if(c.startTime>a)break;h=c}return h};b.prototype.moveTo=function(a,h,b){var c=this;.01>a&&(a=.01);var k=this.getStepAtTime(a),
d=k.isAtStart(a),e=k.isAtEnd(a),f=Math.abs(this.timeline.time()-a);0<f&&h?(h=Math.max(.1,Math.min(f/5,1.5)),this.alignSequencedItemsToStep(k,d,e,!0),this.animating=!0,(new TimelineLite).to(this.timeline,h,{time:a,ease:Circ.easeOut,onComplete:function(){c.timeline.pause(a);c.animating=!1;b&&c.thenPlay(e,!0);c.triggerProgressChanged();c.triggerStateChanged()}})):(this.timeline.pause(a),b&&this.thenPlay(e),this.triggerProgressChanged())};b.prototype.thenPlay=function(a,h){void 0===h&&(h=!0);a?0<this.getRemainingSubStepCount()?
this.playSubStep(this.currentSubStep+1):(this.currentStep=this.getNextStep(!0),this.timeline.seek(this.currentStep.startTime,!0),this.isFirstStep()?this.alignSequencedItemsToStep(this.currentStep,!0,!1,!1):this.playSubStep(0,!1),h&&(this.timeline.play(),this.playSubStep(1))):(this.timeline.play(),this.playSubStep(1));this.triggerStateChanged()};b.prototype.seek=function(a,h){void 0===h&&(h=!1);a=Math.max(0,Math.min(a,1));var b=this.timeline.duration()*a;this.seekTime(b,h)};b.prototype.seekTime=function(a,
h){void 0===h&&(h=!1);this.moveTo(a,h,!1);this.currentStep=this.getStepAtTime(a);this.alignSequencedItemsToStep(this.currentStep,this.currentStep.isAtStart(a),this.currentStep.isAtEnd(a),!1)};b.prototype.seekStep=function(a,h){void 0===h&&(h=!1);this.timeline.pause();this.timeline.seek(a.startLabel);this.currentStep=a;this.alignSequencedItemsToStep(a,!0,!1,h);this.triggerProgressChanged();this.triggerStateChanged()};b.prototype.alignSequencedItemsToStep=function(a,h,b,c){var k=this;void 0===c&&(c=
!1);var d=!0;this.steps.forEach(function(e){var f=e===a;f&&(d=!1);if(!f||!b){var g=0,g=e===a?h?0:1:d?-1:0;e.sequencedItems.forEach(function(a){a.moveToSubStep(g,c,k.frame.camera.size)})}})};b.prototype.playSubStep=function(a,h){var b=this;void 0===h&&(h=!0);this.currentSubStep=a;this.currentStep.sequencedItems.forEach(function(c){c.moveToSubStep(a,h,b.frame.camera.size)});this.state.subStep=Math.max(0,this.currentSubStep-1);this.progressChanged.trigger(this.state)};b.prototype.getRemainingSubStepCount=
function(){return Math.max(0,this.currentStep.getSubStepCount()-this.currentSubStep)};b.prototype.togglePlay=function(){this.isPaused()?this.isAtStoryEnd()?this.seekStep(this.steps[0]):this.playCurrentStep():this.pause()};b.prototype.playCurrentStep=function(){this.isAtStepStart(!0)&&this.playSubStep(1);this.timeline.play();this.triggerStateChanged()};b.prototype.playCurrentStepDelayed=function(a){var h=this;clearTimeout(this.timeout);this.timeout=setTimeout(function(){h.playCurrentStep()},1E3*a)};
b.prototype.playNextStep=function(a){void 0===a&&(a=!1);if(this.isAtStepStart())this.moveTo(this.currentStep.startTime,!1,!0);else{var h=!this.isLastStep()||this.isAtStoryEnd();this.moveTo(this.currentStep.stopTime,a,h)}};b.prototype.playNextStepDelayed=function(a){var h=this;clearTimeout(this.timeout);this.timeout=setTimeout(function(){h.playNextStep()},1E3*a)};b.prototype.backStep=function(a){void 0===a&&(a=!1);this.isAtStepEnd()&&1<this.currentSubStep?this.playSubStep(this.currentSubStep-1):this.isFirstStep()&&
(0<this.currentSubStep||this.timeline.time()>this.currentStep.startTime)?this.animating||(this.moveTo(this.currentStep.startTime,!0,!1),this.playSubStep(0)):this.isAtStoryStart()?this.animating||(this.currentStep=this.steps[this.steps.length-1],this.timeline.pause(this.currentStep.stopTime),this.alignSequencedItemsToStep(this.currentStep,!1,!0,!1),this.playSubStep(this.currentStep.getSubStepCount()),this.triggerProgressChanged()):(this.currentStep=this.getPriorStep(),this.playSubStep(this.currentStep.getSubStepCount()),
this.moveTo(this.currentStep.stopTime,a,!1))};b.prototype.getCurrentStep=function(){return this.currentStep};b.prototype.pause=function(a){void 0===a&&(a=void 0);clearTimeout(this.timeout);this.timeline.pause(a);void 0!==a&&this.triggerProgressChanged();this.triggerStateChanged()};return b}();f.Player=c})(g.Play||(g.Play={}));(function(f){var e=null;f.throttle=function(d,c){var b=this,a=arguments;return function(){clearTimeout(e);e=setTimeout(function(){d.apply(b,a)},c)}}})(g.Util||(g.Util={}));(function(f){var e=
g.Util,d=function(c){function b(a,h){c.call(this,a.canvas,b.duplicateDiv(h));this.story=a;this.fullScreen=h instanceof HTMLBodyElement;this.generateStyles();this.setCanvasSize();this.frame=new f.FrameView(this.story,this);this.player=new g.Play.Player(this.frame);this.hideContextMenu()}__extends(b,c);b.duplicateDiv=function(a){var h=a.parentElement,b;b=a instanceof HTMLBodyElement?document.createElement("body"):document.createElement("div");b.setAttribute("data-prostyle",a.getAttribute("data-prostyle"));
var c=a.getAttribute("class");c&&b.setAttribute("class",c);h.replaceChild(b,a);return b};b.prototype.startControllers=function(){var a=this;this.story.controllers.forEach(function(h){h.start(a,a.player)})};b.prototype.stopControllers=function(){this.story.controllers.forEach(function(a){a.stop()})};b.prototype.resize=function(a){void 0===a&&(a=!1);if(this.setCanvasSize()||a)this.frame.resize(),this.player.refreshTimeline(this.frame),this.story.controllers.forEach(function(a){a.resize()})};b.prototype.setCanvasSize=
function(){if(this.fullScreen)return this.size=new g.Types.Size(this.div.clientWidth,this.div.clientHeight),!0;var a=this.div.clientWidth;if(void 0!==this.size&&a===this.size.width)return!1;var h=this.story.canvas.padding/100*a;this.div.style.height=(a-h)/this.story.frame.aspectRatio+h+"px";TweenLite.set(this.div,{clearProps:"transform"});this.size=new g.Types.Size(this.div.clientWidth,this.div.clientHeight);return!0};b.prototype.generateStyles=function(){var a=e.getStyleElement("prostyle-styles"),
h={selectors:[]};this.fullScreen&&(h.selectors.push("html"),h.html={height:"100%"},h.selectors.push("body"),h.body={height:"100%",margin:0,overflow:"hidden"});h.selectors.push(".prostyle");h[".prostyle"]={position:"absolute",transform:"translate(-50%,-50%) translate3d(0, 0, 0)",top:"50%",left:"50%"};h.selectors.push(".prostyle.prostyle-frame");h[".prostyle.prostyle-frame"]={position:"relative"};h.selectors.push(".prostyle.prostyle-camera");h[".prostyle.prostyle-camera"]={position:"relative",transformStyle:"preserve-3d"};
h.selectors.push(".prostyle.prostyle-flow");h[".prostyle.prostyle-flow"]={width:"100%",height:"100%",transformStyle:"preserve-3d"};h.selectors.push(".prostyle.prostyle-page");h[".prostyle.prostyle-page"]={width:"100%",height:"100%",transformStyle:"preserve-3d"};h.selectors.push(".prostyle.prostyle-item");h[".prostyle.prostyle-item"]={userSelect:"none",whiteSpace:"nowrap"};h.selectors.push(".prostyle.prostyle-item.unknown");h[".prostyle.prostyle-item.unknown"]={fontSize:"24px",fontWeight:"bold",color:"#C00",
padding:"1% 1%",backgroundColor:"#FFF",border:"solid 3px #C00",opacity:.6};h.selectors.push(".prostyle.prostyle-layer");h[".prostyle.prostyle-layer"]={transformStyle:"preserve-3d"};h.selectors.push(".prostyle.prostyle-text");h[".prostyle.prostyle-text"]={userSelect:"none",whiteSpace:"nowrap",transformStyle:"preserve-3d"};h.selectors.push(".prostyle-text-line");h[".prostyle-text-line"]={position:"relative",display:"block",transformStyle:"preserve-3d"};h.selectors.push(".prostyle-text-line-stacked");
h[".prostyle-text-line-stacked"]={position:"absolute",display:"block",transformStyle:"preserve-3d"};h.selectors.push(".prostyle-text-word");h[".prostyle-text-word"]={position:"relative",display:"inline-block",transformStyle:"preserve-3d"};h.selectors.push(".prostyle-text-word-stacked");h[".prostyle-text-word-stacked"]={position:"absolute",display:"inline-block",transformStyle:"preserve-3d"};h.selectors.push(".prostyle-text-char");h[".prostyle-text-char"]={position:"relative",display:"inline-block"};
h.selectors.push(".prostyle-text-char-stacked");h[".prostyle-text-char-stacked"]={position:"absolute",display:"inline-block"};a.innerHTML=e.encodeStyleSheet(h)};b.prototype.hideContextMenu=function(){this.div.oncontextmenu=function(a){}};return b}(f.View);f.CanvasView=d})(g.Views||(g.Views={}));(function(f){var e=function(){function d(c){this.name=c}d.prototype.start=function(c,b){g.Util.logError("ProStyle.Controllers.Controller.start","Abstract base method called")};d.prototype.stop=function(){g.Util.logError("ProStyle.Controllers.Controller.stop",
"Abstract base method called")};d.prototype.resize=function(){};d.prototype.serialize=function(){g.Util.logError("ProStyle.Controllers.Controller.serialize","Abstract base method called")};return d}();f.Controller=e})(g.Controllers||(g.Controllers={}));(function(f){(function(e){(function(d){var c=function(b){function a(a,c,p){void 0===a&&(a=!0);void 0===c&&(c=!1);void 0===p&&(p=!1);b.call(this,"auto");this._start=a;this._stepAdvance=c;this._restart=p;this.autoStart=!0;this.autoStartDelay=0;this.autoStepAdvance=
!1;this.autoStepAdvanceDelay=0;this.autoRestart=!1;this.autoRestartDelay=0;this.player=this.canvas=this.stepCompleteBound=void 0;this.stepCompleteBound=this.stepComplete.bind(this);"boolean"==typeof a?this.autoStart=a:"number"==typeof a&&(this.autoStartDelay=Math.max(0,a));"boolean"==typeof c?this.autoStepAdvance=c:"number"==typeof c&&(this.autoStepAdvance=!0,this.autoStepAdvanceDelay=Math.max(0,c));"boolean"==typeof p?this.autoRestart=p:"number"==typeof p&&(this.autoRestart=!0,this.autoRestartDelay=
Math.max(0,p))}__extends(a,b);a.prototype.start=function(a,b){this.stop();this.canvas=a;this.player=b;b.stepComplete.on(this.stepCompleteBound);b.pause();this.autoStart&&b.playCurrentStepDelayed(this.autoStartDelay)};a.prototype.stop=function(){void 0!==this.player&&(this.player.stepComplete.off(this.stepCompleteBound),this.player=this.canvas=void 0)};a.prototype.stepComplete=function(a){var b=this.player;b.pause();var c=b.isAtStoryEnd(),k=c?this.autoRestartDelay:this.autoStepAdvanceDelay;(c?this.autoRestart:
this.autoStepAdvance)?(a=void 0==a.step.autoAdvanceDelay?k:g.Util.convertToNumber(a.step.autoAdvanceDelay),b.playNextStepDelayed(Math.max(0,a))):b.seekTime(a.stopTime,!1)};a.prototype.resize=function(){};a.prototype.serialize=function(){return d.serialize(this)};return a}(g.Controllers.Controller);d.AutoController=c})(e.Auto||(e.Auto={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.deserialize=function(c){return new d.AutoController(c.start,c.stepAdvance,c.restart)}})(e.Auto||
(e.Auto={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.serialize=function(c){var b={};b.start=c._start;b.stepAdvance=c._stepAdvance;b.restart=c._restart;return b}})(e.Auto||(e.Auto={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){var c=function(b){function a(a){void 0===a&&(a="");b.call(this,"track");this.cssClass=a;this.div=this.player=this.canvas=this.progressBound=void 0;this.progressBound=this.progress.bind(this)}__extends(a,b);a.prototype.start=function(a,
b){this.stop();this.canvas=a;this.player=b;this.div=g.Util.createChildDivElement(a.div);this.cssClass?this.div.classList.add(this.cssClass):TweenLite.set(this.div,{position:"absolute",backgroundColor:"black",color:"white",fontSize:14,padding:3,top:0,left:0});this.player.progressChanged.on(this.progressBound)};a.prototype.stop=function(){void 0!==this.player&&(this.player.progressChanged.off(this.progressBound),this.canvas.div.removeChild(this.div),this.player=this.canvas=this.div=void 0)};a.prototype.progress=
function(a){this.div.innerHTML=a.time.toFixed(3)+" ("+Math.round(100*a.progress)+"%) "+a.step.label+a.subStep};a.prototype.resize=function(){};a.prototype.serialize=function(){return d.serialize(this)};return a}(g.Controllers.Controller);d.DebugController=c})(e.Debug||(e.Debug={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.deserialize=function(c){return new d.DebugController(c.cssClass)}})(e.Debug||(e.Debug={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.serialize=
function(c){var b={};c.cssClass&&(b.cssClass=c.cssClass);return b}})(e.Debug||(e.Debug={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){var c=g.Util,b=function(){function a(a,b){this.player=a;this.controller=b;this.keyupBound=this.keydownBound=void 0;this.map={};this.keydownBound=this.keydown.bind(this);this.keyupBound=this.keyup.bind(this);var c=b.keyMap||{},k=this.getDefaultKeys(),d={},e;e=0+this.mapKeys(d,c.end||k.end,this.end.bind(this));e+=this.mapKeys(d,c.start||k.start,this.start.bind(this));
e+=this.mapKeys(d,c.back||k.back,this.back.bind(this));e+=this.mapKeys(d,c.pause||k.pause,this.pause.bind(this));e+=this.mapKeys(d,c.play||k.play,this.play.bind(this));e+=this.mapKeys(d,c.togglePlay||k.togglePlay,this.togglePlay.bind(this));e+=this.mapKeys(d,c.playNext||k.playNext,this.playNext.bind(this));this.map=d;0<e&&this.listenForKeyPresses()}a.prototype.getDefaultKeys=function(){return{play:[13,116],pause:[19,27],togglePlay:[32],back:[8,33,37,38,188],playNext:[34,39,40,9],start:[36,190],end:[35]}};
a.prototype.listenForKeyPresses=function(){document.addEventListener("keydown",this.keydownBound,!1);document.addEventListener("keyup",this.keyupBound,!1)};a.prototype.keydown=function(a){if(!a.ctrlKey){var b=a.keyCode;(this.map[b]instanceof Function||9===b)&&a.preventDefault()}};a.prototype.keyup=function(a){if(!a.ctrlKey){var b=a.keyCode,c=this.map[b];if(c instanceof Function||9===b)c instanceof Function&&c(),a.preventDefault()}};a.prototype.stop=function(){document.removeEventListener("keydown",
this.keydownBound,!1);document.removeEventListener("keyup",this.keyupBound,!1)};a.prototype.mapKeys=function(a,b,p){var k=0;b instanceof Array&&b.forEach(function(b){b=c.convertToNumber(b);0<b&&(a[b]=p,k++)});return k};a.prototype.play=function(){this.player.playCurrentStep()};a.prototype.pause=function(){this.player.pause()};a.prototype.togglePlay=function(){this.player.togglePlay()};a.prototype.back=function(){this.player.backStep(!0)};a.prototype.playNext=function(){this.player.playNextStep(!0)};
a.prototype.start=function(){this.player.seekStep(this.player.steps[0],!1)};a.prototype.end=function(){this.player.seekStep(this.player.steps[0],!1);this.player.backStep(!1)};return a}();d.KeyboardListener=b})(e.Keyboard||(e.Keyboard={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){var c=function(b){function a(a){b.call(this,"keyboard");this.keyMap=a;this.listener=this.player=this.canvas=void 0}__extends(a,b);a.prototype.start=function(a,b){this.stop();this.canvas=a;this.player=
b;this.listener=new d.KeyboardListener(this.player,this)};a.prototype.stop=function(){void 0!==this.player&&(this.listener.stop(),this.player=this.canvas=this.listener=void 0)};a.prototype.serialize=function(){return d.serialize(this)};return a}(g.Controllers.Controller);d.KeyboardController=c})(e.Keyboard||(e.Keyboard={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.deserialize=function(c){return new d.KeyboardController(c.keys)}})(e.Keyboard||(e.Keyboard={}))})(f.Controllers||
(f.Controllers={}));(function(e){(function(d){d.serialize=function(c){return{}}})(e.Keyboard||(e.Keyboard={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){var c=function(b){function a(a){void 0===a&&(a=.01);b.call(this,"resize");this.throttleDelay=a;this.canvasResize=void 0}__extends(a,b);a.prototype.start=function(a,b){this.stop();this.canvasResize=a.resize.bind(a);0<this.throttleDelay?window.addEventListener("resize",g.Util.throttle(this.canvasResize,1E3*this.throttleDelay),!1):
window.addEventListener("resize",this.canvasResize,!1)};a.prototype.stop=function(){void 0!==this.canvasResize&&(window.removeEventListener("resize",this.canvasResize,!1),this.canvasResize=void 0)};a.prototype.resize=function(){};a.prototype.serialize=function(){return d.serialize(this)};return a}(g.Controllers.Controller);d.ResizeController=c})(e.Resize||(e.Resize={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.deserialize=function(c){c=g.Util.convertToNumber(c.throttleDelay);
return new d.ResizeController(c)}})(e.Resize||(e.Resize={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.serialize=function(c){return{}}})(e.Resize||(e.Resize={}))})(f.Controllers||(f.Controllers={}))})(g.Extensions||(g.Extensions={}));(function(f){f.logError=function(e,d){console.log("ProStyle Error: "+e+" - "+d)};f.querySelector=function(e,d){void 0===d&&(d=document);try{return d.querySelector(e)}catch(c){f.logError("Util.querySelector",c.message)}};f.createChildDivElement=
function(e,d){void 0===d&&(d=void 0);var c=document.createElement("div");d&&(c.className=d);e.appendChild(c);return c}})(g.Util||(g.Util={}));(function(f){(function(e){(function(d){var c=g.Util,b=g.Svg,a=function(){function a(h,b,c){this.canvas=h;this.player=b;this.controller=c;this.COLOR="#BBB";this.HIGHLIGHT_COLOR="#FFF";this.BACK_COLOR="rgba(0,0,0,0.5)";this.STEP_COLOR_1="#222";this.STEP_COLOR_2="#000";this.divScrubberStep=[];this.stateChangedBound=this.progressChangedBound=this.scrubberMouseClickBound=
this.scrubberMouseMoveBound=void 0;this.progress=0;this.generateStyles();this.setupButtons();this.setupScrubber();this.setupPlayerEvents();this.setupMenuOnMouseMove();this.resize()}a.prototype.stop=function(){this.scrubberMouseMoveBound&&this.divScrubber.removeEventListener("mousemove",this.scrubberMouseMoveBound,!1);this.scrubberMouseClickBound&&this.divScrubber.removeEventListener("click",this.scrubberMouseClickBound,!1);this.progressChangedBound&&this.canvas.player.progressChanged.off(this.progressChangedBound);
this.stateChangedBound&&this.canvas.player.stateChanged.off(this.stateChangedBound);this.logoDiv.onmousedown=void 0;this.backDiv.onmousedown=void 0;this.playDiv.onmousedown=void 0;this.nextDiv.onmousedown=void 0};a.prototype.setupButtons=function(){var a=this.canvas.player;this.bgDiv=c.createChildDivElement(this.canvas.div,this.bgClass);this.logoDiv=this.addButton("ProStyle",b.logo.svg,function(){window.open("https://prostyle.io/","_blank")});this.backDiv=this.addButton("Back",b.toStart.svg,function(){a.backStep(!0)});
this.playDiv=this.addButton("Play",b.play.svg,function(){a.togglePlay()});this.nextDiv=this.addButton("Play Next",b.fastForward.svg,function(){a.playNextStep(!0)})};a.prototype.setupScrubber=function(){var a=this.canvas.player;this.divScrubber=c.createChildDivElement(this.bgDiv,this.scrubberClass);this.divScrubberBar=c.createChildDivElement(this.divScrubber,this.scrubberBarClass);for(a=a.steps.length-1;0<=a;a--)this.divScrubberStep.push(c.createChildDivElement(this.divScrubberBar,this.scrubberStepClass));
this.divScrubberProgress=c.createChildDivElement(this.divScrubberBar,this.scrubberProgressClass);this.divScrubberHoverPoint=c.createChildDivElement(this.divScrubberBar,this.scrubberHoverPointClass);this.divScrubberHoverText=c.createChildDivElement(this.divScrubber,this.scrubberHoverTextClass);this.scrubberMouseMoveBound=this.scrubberMouseMove.bind(this);this.scrubberMouseClickBound=this.scrubberMouseClick.bind(this);this.divScrubber.addEventListener("mousemove",this.scrubberMouseMoveBound,!1);this.divScrubber.addEventListener("click",
this.scrubberMouseClickBound,!1)};a.prototype.scrubberMouseMove=function(a){var h=this.canvas.div.getBoundingClientRect(),b=this.canvas.player,d=this.scrubberSize,e=d.width-d.barHeight,f=d.barHeight/2;a=Math.max(f,Math.min(a.clientX-h.left-d.left,d.width-f))-d.barHeight;this.divScrubberHoverPoint.style.left=(a+f+f/2-1).toString()+"px";b=Math.max(0,b.getDuration()-.01)*(a+f)/e;this.divScrubberHoverText.style.left=a.toString()+"px";c.setElementText(this.divScrubberHoverText,b.toFixed(2))};a.prototype.scrubberMouseClick=
function(a){var h=this.canvas.div.getBoundingClientRect(),b=this.canvas.player,c=this.scrubberSize,d=c.width-c.barHeight,e=c.barHeight/2;a=Math.max(e,Math.min(a.clientX-h.left-c.left,c.width-e))-c.barHeight;b.seek((a+e)/d,!0)};a.prototype.setupPlayerEvents=function(){var a=this.canvas.player;this.progressChangedBound=this.progressChanged.bind(this);this.stateChangedBound=this.stateChanged.bind(this);a.progressChanged.on(this.progressChangedBound);a.stateChanged.on(this.stateChangedBound)};a.prototype.setupMenuOnMouseMove=
function(){var a=this.canvas.div,h=this.canvas.fullScreen,b=c.throttle(function(){a.classList.remove("mouseMovement");h&&(a.style.cursor="none")},1500);a.onmousemove=function(c){a.classList.add("mouseMovement");h&&(a.style.cursor="auto");b()}};a.prototype.progressChanged=function(a){this.progress=a.progress;this.updateScrubberProgress()};a.prototype.stateChanged=function(a){this.playDiv.innerHTML=a?b.play.svg:b.pause.svg};a.prototype.resize=function(){var a=this.canvas.div.clientWidth,h=this.canvas.div.clientHeight,
b=Math.min(Math.max(40,Math.min(a/12,200)),Math.max(40,Math.min(h/12,200))),c=Math.max(5,b/3);TweenMax.set(this.bgDiv,{left:0,top:h-b,width:a,height:b});var h=.9*b,d=.88*b,e=.53*b,f=.6*b,g=a-d-e-f-3.2*c;TweenMax.set(this.logoDiv,{left:c/2,top:0,height:b,width:h});TweenMax.set(this.nextDiv,{left:a-d-c,top:0,height:b,width:d});TweenMax.set(this.playDiv,{left:a-d-e-2*c,top:0,height:b,width:e});TweenMax.set(this.backDiv,{left:g,top:0,height:b,width:f});this.scrubberSize={left:h+c,width:g-h-2*c,height:b,
barHeight:b/3};this.resizeScrubber();this.updateScrubberProgress()};a.prototype.resizeScrubber=function(){var a=this,h=this.scrubberSize,b=this.canvas.player,c=b.steps.length-1,d=Math.max(0,b.getDuration()-.01),e=h.barHeight/2,f=h.width-h.barHeight;this.divScrubber.style.left=h.left+"px";this.divScrubber.style.width=h.width+"px";this.divScrubber.style.height=h.height+"px";this.divScrubberBar.style.width=h.width+"px";this.divScrubberBar.style.top=(h.height-h.barHeight)/2+"px";this.divScrubberBar.style.height=
h.barHeight+"px";this.divScrubberBar.style.borderRadius=e+"px";0<d&&b.steps.forEach(function(b,k){var g=a.divScrubberStep[c-k];g.style.left=(f*b.startTime/d).toString()+"px";g.style.width=(f*b.time/d+h.barHeight).toString()+"px";g.style.height=h.barHeight+"px";g.style.borderRadius=e+"px"});this.divScrubberHoverPoint.style.height=e+"px";this.divScrubberHoverPoint.style.width=e+"px";this.divScrubberHoverPoint.style.top=(h.barHeight/4-1).toString()+"px";this.divScrubberHoverPoint.style.borderRadius=
e+"px";this.divScrubberHoverText.style.fontSize=.9*h.barHeight+"px";this.divScrubberProgress.style.height=h.barHeight+"px";this.divScrubberProgress.style.borderRadius=e+"px";this.updateScrubberProgress()};a.prototype.updateScrubberProgress=function(){var a=this.scrubberSize;this.divScrubberProgress.style.width=((a.width-a.barHeight+2)*this.progress+a.barHeight).toString()+"px"};a.prototype.generateStyles=function(){var a=(new Date).getTime().toString();this.bgClass="controls-bg-"+a;this.btnClass=
"controls-btn-"+a;this.scrubberClass="scrubber-"+a;this.scrubberBarClass="scrubber-back-"+a;this.scrubberStepClass="scrubber-step-"+a;this.scrubberProgressClass="scrubber-progress-"+a;this.scrubberHoverPointClass="scrubber-point-"+a;this.scrubberHoverTextClass="scrubber-text-"+a;var a=c.getStyleElement("prostyle-track-controls-"+a),h={selectors:[]};h.selectors.push("."+this.bgClass);h["."+this.bgClass]={transition:"opacity 300ms ease-in-out, transform 300ms ease-in-out",backgroundColor:this.controller.backColor||
this.BACK_COLOR,position:"absolute",display:"inline-block",opacity:0,transform:"translate3d(0, 0, 20px)"};h.selectors.push(".mouseMovement ."+this.bgClass);h[".mouseMovement ."+this.bgClass]={opacity:.3,transform:"translate3d(0, 0, 0)"};h.selectors.push("."+this.bgClass+":hover");h["."+this.bgClass+":hover"]={opacity:1};h.selectors.push(".prostyle:hover + ."+this.bgClass);h[".prostyle:hover + ."+this.bgClass]={opacity:.5};h.selectors.push("."+this.bgClass+" div");h["."+this.bgClass+" div"]={position:"absolute"};
h.selectors.push("."+this.btnClass);h["."+this.btnClass]={cursor:"pointer"};h.selectors.push("."+this.btnClass+" svg");h["."+this.btnClass+" svg"]={fill:this.controller.color||this.COLOR,width:"100%",height:"100%"};h.selectors.push("."+this.btnClass+":hover svg");h["."+this.btnClass+":hover svg"]={fill:this.controller.highlightColor||this.HIGHLIGHT_COLOR};h.selectors.push("."+this.scrubberClass);h["."+this.scrubberClass]={cursor:"none"};h.selectors.push("."+this.scrubberBarClass);h["."+this.scrubberBarClass]=
{};h.selectors.push("."+this.scrubberStepClass);h["."+this.scrubberStepClass]={borderRight:"solid 2px "+(this.controller.backColor||this.BACK_COLOR),backgroundColor:this.controller.stepColor1||this.STEP_COLOR_1,background:"linear-gradient(to right, "+(this.controller.stepColor1||this.STEP_COLOR_1)+", "+(this.controller.stepColor2||this.STEP_COLOR_2)+")"};h.selectors.push("."+this.scrubberProgressClass);h["."+this.scrubberProgressClass]={backgroundColor:this.controller.color||this.COLOR};h.selectors.push("."+
this.scrubberClass+":hover ."+this.scrubberProgressClass);h["."+this.scrubberClass+":hover ."+this.scrubberProgressClass]={backgroundColor:this.controller.highlightColor||this.HIGHLIGHT_COLOR};h.selectors.push("."+this.scrubberHoverPointClass);h["."+this.scrubberHoverPointClass]={border:"solid 1px "+(this.controller.backColor||this.BACK_COLOR),backgroundColor:this.controller.highlightColor||this.HIGHLIGHT_COLOR,display:"none"};h.selectors.push("."+this.scrubberClass+":hover ."+this.scrubberHoverPointClass);
h["."+this.scrubberClass+":hover ."+this.scrubberHoverPointClass]={display:"block"};h.selectors.push("."+this.scrubberHoverTextClass);h["."+this.scrubberHoverTextClass]={color:this.controller.color||this.COLOR,fontFamily:"font-family: arial, helvetica, sans-serif",display:"none"};h.selectors.push("."+this.scrubberClass+":hover ."+this.scrubberHoverTextClass);h["."+this.scrubberClass+":hover ."+this.scrubberHoverTextClass]={display:"block"};a.innerHTML=c.encodeStyleSheet(h)};a.prototype.addButton=
function(a,h,b){var d=c.createChildDivElement(this.bgDiv,this.btnClass);d.className=this.btnClass;d.innerHTML=h;d.title=a;d.addEventListener("mousedown",function(a){b();a.preventDefault();a.stopPropagation();return!1});return d};return a}();d.TrackBar=a})(e.Track||(e.Track={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){var c=function(b){function a(a,c,d,k,e,f){void 0===a&&(a=!0);void 0===c&&(c=void 0);void 0===d&&(d=void 0);void 0===k&&(k=void 0);void 0===e&&(e=void 0);void 0===
f&&(f=void 0);b.call(this,"track");this.autoHide=a;this.color=c;this.highlightColor=d;this.backColor=k;this.stepColor1=e;this.stepColor2=f;this.trackBar=this.player=this.canvas=void 0}__extends(a,b);a.prototype.start=function(a,b){this.stop();this.canvas=a;this.player=b;this.trackBar=new d.TrackBar(a,b,this)};a.prototype.stop=function(){void 0!==this.player&&(this.trackBar.stop(),this.player=this.canvas=this.trackBar=void 0)};a.prototype.resize=function(){void 0!==this.trackBar&&this.trackBar.resize()};
a.prototype.serialize=function(){return d.serialize(this)};return a}(g.Controllers.Controller);d.TrackController=c})(e.Track||(e.Track={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.deserialize=function(c){return new d.TrackController(c.autoHide,c.color,c.highlightColor,c.backColor,c.stepColor1,c.stepColor2)}})(e.Track||(e.Track={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.serialize=function(c){var b={};b.autoHide=c.autoHide;c.color&&(b.color=c.color);
c.highlightColor&&(b.highlightColor=c.highlightColor);c.backColor&&(b.backColor=c.backColor);c.stepColor1&&(b.stepColor1=c.stepColor1);c.stepColor2&&(b.stepColor2=c.stepColor2);return b}})(e.Track||(e.Track={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){var c=function(b){function a(a){b.call(this,a.controllerType);this.originalJson=a}__extends(a,b);a.prototype.start=function(a,b){};a.prototype.stop=function(){};a.prototype.resize=function(){};a.prototype.serialize=function(){return d.serialize(this)};
return a}(g.Controllers.Controller);d.UnknownController=c})(e.Unknown||(e.Unknown={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.deserialize=function(c){return new d.UnknownController(c)}})(e.Unknown||(e.Unknown={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){d.serialize=function(c){return c.originalJson}})(e.Unknown||(e.Unknown={}))})(f.Controllers||(f.Controllers={}));(function(e){(function(d){var c=function(b){function a(a,c,d,e){b.call(this,a,"simple",
c,e,d)}__extends(a,b);a.prototype.getDefaultPageClassName=function(){return this.pageClass||"page"};a.prototype.serialize=function(){return d.serialize(this)};a.prototype.createView=function(a,b){return new d.SimpleFlowView(this,a,b)};return a}(g.Models.Flows.FlowModel);d.SimpleFlowModel=c})(e.Simple||(e.Simple={}))})(f.Flows||(f.Flows={}))})(g.Extensions||(g.Extensions={}));(function(f){(function(e){var d=g.Util,c=function(b){function a(a,c,e){void 0===e&&(e=void 0);b.call(this,a,e||d.createChildDivElement(c.div,
"prostyle prostyle-item"));this.model=a;this.itemViewSet=c}__extends(a,b);a.prototype.initializeItem=function(a,b){var c=b.getContainedSize(this.model.itemModelSet.flow.pageAspectRatio);this.initializeProperties(this.model.itemModelSet.flow.story,[this.element],c,a,this.model.init,!1)};a.prototype.generateStepActions=function(a,b,c,d,e){this.generateActionsForStep(a,[this.element],b,c,d,e,this.model.scriptSet)};return a}(f.View);e.ItemView=c})(f.Items||(f.Items={}))})(g.Views||(g.Views={}));(function(f){f.logWarning=
function(e,d){console.log("ProStyle Warning: "+e+" - "+d)}})(g.Util||(g.Util={}));(function(f){(function(e){(function(d){var c=function(){function b(a,h,b,c,d,e){this.label=a;this.jsonNames=h;this.cssName=b;this.text=c;this.defaultValue=d;this.alwaysInitializeCss=e;void 0===d&&g.Util.logWarning("VariableType<T>",b+" has a default value of undefined.")}b.prototype.createVariable=function(){return new d.Variable(this)};b.prototype.scrubValue=function(a){return a};b.prototype.writeCssBuckets=function(a,
h,b,c,d,e){var f=this;if(void 0!==this.cssName){var g=c.getValue(e);void 0!==g&&(e&&g===this.defaultValue&&!this.alwaysInitializeCss||d.forEach(function(c){f.writeCssBucket(a,h,b,c,g)}))}};b.prototype.writeCssBucket=function(a,h,b,c,d){c[this.cssName]=d};return b}();d.VariableType=c;c=function(b){function a(a,c,d,e,f,g){void 0===g&&(g=!1);b.call(this,a,c,d,"",!1,g);this.falseValue=e;this.trueValue=f}__extends(a,b);a.prototype.scrubValue=function(a){return!!a};a.prototype.writeCssBucket=function(a,
b,c,d,e){d[this.cssName]=e?this.trueValue:this.falseValue};return a}(d.VariableType);d.BooleanVariableType=c;c=function(b){function a(a,c,d,e,f){b.call(this,a,c,d,"",e,f)}__extends(a,b);a.prototype.scrubValue=function(a){return void 0===a?"":a.toString()};return a}(d.VariableType);d.StringVariableType=c;c=function(b){function a(a,c,d,e,f,g){b.call(this,a,c,d,e,g);this.enumValues=f}__extends(a,b);a.prototype.scrubValue=function(a){if(void 0===a)return this.defaultValue;a=a.toString().trim().toLocaleLowerCase();
for(var b=0;b<this.enumValues.length;b++)if(a===this.enumValues[b])return a;for(b=0;b<this.enumValues.length;b++)if(0===this.enumValues[b].indexOf(a))return this.enumValues[b];return this.defaultValue};a.prototype.getValueByIndex=function(a){return 0>a||a>=this.enumValues.length?void 0:this.enumValues[a]};return a}(d.StringVariableType);d.EnumVariableType=c;c=function(b){function a(){b.call(this,"bullets",["style"],"listStyleType","none","arabic-indic armenian bengali cambodian circle cjk-ideographic decimal decimal-leading-zero devanagari disc georgian gujarati gurmukhi hebrew hiragana hiragana-iroha kannada katakana katakana-iroha khmer lao lower-alpha lower-armenian lower-greek lower-latin lower-roman malayalam mongolian myanmar oriya persian telugu thai tibetan square upper-alpha upper-latin upper-roman".split(" "),
!1)}__extends(a,b);a.prototype.writeCssBucket=function(a,b,c,d,e){d[this.cssName]=e;d.display="none"==e?"block":"list-item"};return a}(d.EnumVariableType);d.BulletsVariableType=c;c=function(b){function a(a,c,d,e,f){b.call(this,a,c,d,e,f)}__extends(a,b);a.prototype.scrubValue=function(a){return"boolean"===typeof a?a?"white":this.defaultValue:"number"===typeof a?"hsl("+Math.abs(a%360).toString()+", 50%, 50%)":"string"===typeof a?a:"black"};return a}(d.StringVariableType);d.ColorVariableType=c;c=function(b){function a(a,
c,d,e,f,g,q,l,m){b.call(this,a,c,d,l,g,m);this._minValue=e;this._maxNumber=f;this._decimalPlaces=q}__extends(a,b);a.prototype.scrubValue=function(a){a=g.Util.convertToNumber(a,this.defaultValue);var b=Math.pow(10,this._decimalPlaces);a=Math.round(a*b)/b;return a=Math.max(this._minValue,Math.min(a,this._maxNumber))};return a}(d.VariableType);d.NumberVariableType=c;c=function(b){function a(a,c,d,e,f,g,q,l,m){b.call(this,a,c,d,e,f,g,q,l,m)}__extends(a,b);a.prototype.writeCssBucket=function(a,b,c,d,e){d[this.cssName]=
e/100*((c.height+c.width)/2)+1;"z"===this.cssName&&(d.zIndex=e+1)};return a}(d.NumberVariableType);d.ContainerDepthPctVariableType=c;c=function(b){function a(a,c,d,e,f,g,q,l,m){b.call(this,a,c,d,e,f,g,q,l,m)}__extends(a,b);a.prototype.writeCssBucket=function(a,b,c,d,e){a=e/100*c.height;0<e&&1>a&&(a=1);d[this.cssName]=a};return a}(d.NumberVariableType);d.ContainerHeightPctVariableType=c;c=function(b){function a(a,c,d,e,f,g,q,l,m){b.call(this,a,c,d,e,f,g,q,l,m)}__extends(a,b);a.prototype.writeCssBucket=
function(a,b,c,d,e){d[this.cssName]=e/100*c.width};return a}(d.NumberVariableType);d.ContainerWidthPctVariableType=c})(e.Variables||(e.Variables={}))})(f.Properties||(f.Properties={}))})(g.Models||(g.Models={}));(function(f){(function(d){d[d.Back=0]="Back";d[d.Bounce=1]="Bounce";d[d.Circle=2]="Circle";d[d.Curve=3]="Curve";d[d.Elastic=4]="Elastic";d[d.Expo=5]="Expo";d[d.Linear=6]="Linear";d[d.Sine=7]="Sine";d[d.SlowMo=8]="SlowMo";d[d.SlowMoBack=9]="SlowMoBack";d[d.Stepped=10]="Stepped";d[d.Stop=11]=
"Stop";d[d.StopAndReturn=12]="StopAndReturn"})(f.EazeEffect||(f.EazeEffect={}));(function(d){d[d.Less=0]="Less";d[d.Normal=1]="Normal";d[d.More=2]="More";d[d.Extra=3]="Extra"})(f.EazeAmount||(f.EazeAmount={}));(function(d){d[d.In=0]="In";d[d.Out=1]="Out";d[d.InOut=2]="InOut"})(f.EazeEnding||(f.EazeEnding={}));var e=function(){function d(c,b,a){void 0===c&&(c=void 0);void 0===b&&(b=void 0);void 0===a&&(a=void 0);this.ease=this.ending=this.amount=this.effect=void 0;this.effect=void 0==c?d.DEFAULT_EFFECT:
c;this.amount=void 0==b?d.DEFAULT_AMOUNT:b;this.ending=void 0==a?d.DEFAULT_ENDING:a;b="easeOut";this.ending==f.EazeEnding.InOut?b="easeInOut":this.ending==f.EazeEnding.In&&(b="easeIn");c==f.EazeEffect.Linear?this.ease=Linear.easeNone:c==f.EazeEffect.Back?this.setBackEase(b):c==f.EazeEffect.Bounce?this.ease=Bounce[b]:c==f.EazeEffect.Circle?this.ease=Circ[b]:c==f.EazeEffect.Curve?this.setCurveEase(b):c==f.EazeEffect.Elastic?this.setElasticEase(b):c==f.EazeEffect.Expo?this.ease=Expo[b]:c==f.EazeEffect.Sine?
this.ease=Sine[b]:c==f.EazeEffect.SlowMo?this.setSlowMoEase(0):c==f.EazeEffect.SlowMoBack?this.setSlowMoEase(1):c==f.EazeEffect.Stepped?this.setSteppedEase():c==f.EazeEffect.Stop?this.setSlowMoEase(2):c==f.EazeEffect.StopAndReturn&&this.setSlowMoEase(2,!0)}d.prototype.setBackEase=function(c){this.ease=Back[c].config([1,1.9,3,4.1][this.amount])};d.prototype.setCurveEase=function(c){this.ease=[Power1,Power2,Power3,Power4][this.amount][c]};d.prototype.setElasticEase=function(c){this.ease=Elastic[c].config([.8,
1.1,1.25,1.75][this.amount],[.3,.26,.2,.15][this.amount])};d.prototype.setSlowMoEase=function(c,b){void 0===b&&(b=!1);var a=[.05,.5,.7,.9][this.amount],h=[.7,.6,.5,.4][this.amount];1==c?h=1/[.7,.682,.655,.64][this.amount]:2==c&&(h=1);this.ease=SlowMo.ease.config(a,h,b)};d.prototype.setSteppedEase=function(){this.ease=SteppedEase.config([3,6,12,24][this.amount])};d.getByText=function(c){c=c.trim().toLowerCase().split(" ");var b=d.DEFAULT_EFFECT,a=d.DEFAULT_AMOUNT,h=d.DEFAULT_ENDING;c.forEach(function(c){c=
c.trim();"back"==c&&(b=f.EazeEffect.Back);"bounce"==c&&(b=f.EazeEffect.Bounce);"circle"==c&&(b=f.EazeEffect.Circle);"curve"==c&&(b=f.EazeEffect.Curve);"elastic"==c&&(b=f.EazeEffect.Elastic);"expo"==c&&(b=f.EazeEffect.Expo);"linear"==c&&(b=f.EazeEffect.Linear);"sine"==c&&(b=f.EazeEffect.Sine);"slowmo"==c&&(b=f.EazeEffect.SlowMo);"slowmoback"==c&&(b=f.EazeEffect.SlowMoBack);"stepped"==c&&(b=f.EazeEffect.Stepped);"stop"==c&&(b=f.EazeEffect.Stop);"stopandreturn"==c&&(b=f.EazeEffect.StopAndReturn);"less"==
c&&(a=f.EazeAmount.Less);"normal"==c&&(a=f.EazeAmount.Normal);"more"==c&&(a=f.EazeAmount.More);"extra"==c&&(a=f.EazeAmount.Extra);"in"==c&&(h=f.EazeEnding.In);"out"==c&&(h=f.EazeEnding.Out);"inout"==c&&(h=f.EazeEnding.InOut)});return new d(b,a,h)};d.DEFAULT_EFFECT=f.EazeEffect.Expo;d.DEFAULT_AMOUNT=f.EazeAmount.Normal;d.DEFAULT_ENDING=f.EazeEnding.Out;d.DEFAULT=new d;return d}();f.Eaze=e})(g.Types||(g.Types={}));(function(f){(function(e){(function(d){var c=g.Types,b=function(a){function b(){a.call(this,
"ease",["ease"],"ease","",c.Eaze.DEFAULT,!1)}__extends(b,a);b.prototype.scrubValue=function(a){if("string"===typeof a)return c.Eaze.getByText(a)};b.prototype.writeCssBucket=function(a,b,h,c,d){c[this.cssName]=d.ease};return b}(d.VariableType);d.EaseVariableType=b;b=function(a){function b(h,c,d,e,f,g,l,m,r,D,t){a.call(this,h,c,d,e,f,g,l,D,t);this.inverted=r;this.offset=m}__extends(b,a);b.prototype.writeCssBucket=function(a,b,h,c,d){d+=this.offset;this.inverted&&(d=-d);c[this.cssName]=d};return b}(d.NumberVariableType);
d.NumberOffsetVariableType=b;b=function(a){function b(h,c,d,e,f,g,l,m){void 0===l&&(l=2);void 0===m&&(m=!1);a.call(this,h,c,d,"",g,m);this._minValue=e;this._maxNumber=f;this._decimalPlaces=l}__extends(b,a);b.prototype.scrubValue=function(a){var b;if("boolean"===typeof a)return this.defaultValue;if("number"===typeof a)return[a];if("string"===typeof a)b=g.Util.splitNoParens(a);else if(a instanceof Array)b=a;else return this.defaultValue;for(var h=[],c=0;c<b.length;c++){var d=g.Util.convertToNumber(a,
0<this.defaultValue.length?this.defaultValue[0]:0),e=Math.pow(10,this._decimalPlaces),d=Math.round(d*e)/e,d=Math.max(this._minValue,Math.min(d,this._maxNumber));h.push(d)}return h};return b}(d.VariableType);d.NumberArrayVariableType=b;c=g.Types;b=function(a){function b(h){a.call(this,h?"transform origin":"perspective origin",h?["transformOrigin","origin"]:["perspectiveOrigin","origin"],h?"transformOrigin":"perspectiveOrigin","",new c.Xyz(0,0,0),!1);this.transform=h}__extends(b,a);b.prototype.scrubValue=
function(a){return"boolean"==typeof a?this.defaultValue:"number"==typeof a?this.scrubArray([a],!1):"string"==typeof a?this.scrubArray(a.split(" "),!1):a instanceof Array?this.scrubArray(a,!1):this.scrubArray([a.x,a.y,a.z],!!(a.expand|a.expanded))};b.prototype.scrubArray=function(a,b){var h=new c.Xyz(this.defaultValue.x,this.defaultValue.y,this.defaultValue.z);h.useContainer=b;0<a.length&&(h.x=this.scrubString(a[0]));1<a.length&&(h.y=this.scrubString(a[1]));this.transform&&2<a.length&&(h.z=g.Util.convertToNumber(a[2],
0,!0));return h};b.prototype.scrubString=function(a){a=(a||"").toString().trim().toLocaleLowerCase();return"left"===a?0:"right"===a?100:"top"===a?0:"bottom"===a?100:"center"===a?50:g.Util.convertToNumber(a,0,!0)};b.prototype.writeCssBuckets=function(a,b,h,c,d,e){var f=this;a=c.getValue(e);if(void 0!==a&&(b=a.useContainer,!e||!a.equals(this.defaultValue)||this.alwaysInitializeCss)){var g;g=b?Math.round(a.x/100*h.width)+"px "+Math.round(a.y/100*h.height)+"px":Math.round(100*a.x)/100+50+"% "+(Math.round(100*
a.y)/100+50)+"%";this.transform&&(g+=" "+Math.round((h.height+h.width)/2*a.z/100)+"px");d.forEach(function(a){a[f.cssName]=g})}};return b}(d.VariableType);d.OriginVariableType=b;b=function(a){function b(h,c,d,e,f,g,l){a.call(this,h,c,d,e,f,g,0,"%",l)}__extends(b,a);b.prototype.writeCssBucket=function(a,b,h,c,d){c[this.cssName]=d/100};return b}(d.NumberVariableType);d.PercentVariableType=b})(e.Variables||(e.Variables={}))})(f.Properties||(f.Properties={}))})(g.Models||(g.Models={}));(function(f){(function(d){d[d.Forward=
0]="Forward";d[d.Yoyo=1]="Yoyo";d[d.InvertedYoyo=2]="InvertedYoyo";d[d.Mirror=3]="Mirror"})(f.RepeatDirection||(f.RepeatDirection={}));var e=function(){function d(c,b,a,h){void 0===b&&(b=f.RepeatDirection.Forward);void 0===a&&(a=0);void 0===h&&(h=!1);this.count=c;this.direction=b;this.delay=a;this.diminishing=h;this.count=Math.max(0,c);this.delay=Math.max(0,a)}d.fromJson=function(c){c=c||0;if(c instanceof Array){1>c.length&&c.push(0);2>c.length&&c.push("f");3>c.length&&c.push(0);4>c.length&&c.push(!1);
c[0]=g.Util.convertToNumber(c[0]);c[1]=(c[1]||"f").toString().trim().toLowerCase().charAt(0);c[2]=g.Util.convertToNumber(c[2]);c[3]=!!c[3];var b=f.RepeatDirection.Forward;"y"===c[1]&&(b=f.RepeatDirection.Yoyo);"i"===c[1]&&(b=f.RepeatDirection.InvertedYoyo);"m"===c[1]&&(b=f.RepeatDirection.Mirror);return new d(c[0],b,c[2],c[3])}return new d(g.Util.convertToNumber(c))};d.prototype.toJson=function(){if(this.direction===f.RepeatDirection.Forward&&0===this.delay&&!1===this.diminishing)return this.count;
var c=[],b="f";this.direction===f.RepeatDirection.Yoyo&&(b="y");this.direction===f.RepeatDirection.InvertedYoyo&&(b="i");this.direction===f.RepeatDirection.Mirror&&(b="m");c.push(this.count);c.push(b);(0<this.delay||this.diminishing)&&c.push(this.delay);this.diminishing&&c.push(!0);return c};d.prototype.equals=function(c){return void 0===c||c.count!==this.count||c.direction!==this.direction||c.delay!==this.delay||c.diminishing!==this.diminishing?!1:!0};d.prototype.isNoop=function(){return this.direction===
f.RepeatDirection.Yoyo?0<this.count%2:!1};d.DEFAULT=new d(0);return d}();f.Repeat=e})(g.Types||(g.Types={}));(function(f){(function(e){(function(d){var c=function(b){function a(){b.call(this,"repeat",["repeat","rep"],"repeat","",g.Types.Repeat.DEFAULT,!1)}__extends(a,b);a.prototype.scrubValue=function(a){return g.Types.Repeat.fromJson(a)};a.prototype.writeCssBucket=function(a,b,c,d,e){0<e.count&&(d.repeat=e.count,0<e.delay&&(d.repeatDelay=e.delay),e.direction===g.Types.RepeatDirection.Yoyo&&(d.yoyo=
!0))};return a}(d.VariableType);d.RepeatVariableType=c})(e.Variables||(e.Variables={}))})(f.Properties||(f.Properties={}))})(g.Models||(g.Models={}));(function(f){f.getSign=function(e){return e?0>e?-1:1:0}})(g.Util||(g.Util={}));(function(f){var e=function(){function d(c,b,a,h,d,e){void 0===c&&(c=0);void 0===b&&(b=0);void 0===a&&(a=0);void 0===h&&(h="rgba(0,0,0,0.7)");void 0===d&&(d=0);void 0===e&&(e=!1);this.x=c;this.y=b;this.blur=a;this.color=h;this.spread=d;this.inset=e}d.prototype.render=function(c,
b,a){var h=(c+b)/2;c=Math.round(this.x/10*h)/10;b=Math.round(this.y/10*h)/10;var d=Math.round(this.blur/10*h)/10,h=Math.round(this.spread/10*h)/10;0===c&&0!==this.x&&(c=g.Util.getSign(this.x));0===b&&0!==this.y&&(b=g.Util.getSign(this.y));0===d&&0!==this.blur&&(d=g.Util.getSign(this.blur));0===h&&0!==this.spread&&(h=g.Util.getSign(this.spread));var d=Math.abs(d),e=[];a&&this.inset&&e.push("inset");e.push(c.toString()+"px");e.push(b.toString()+"px");e.push(d.toString()+"px");a&&e.push(h.toString()+
"px");"number"===typeof this.color?e.push("hsl("+Math.abs(this.color%360)+", 50%, 50%)"):e.push(this.color);return e.join(" ")};d.fromJson=function(c){c=c||[];if(!(c instanceof Array))return new d;var b=void 0,a=void 0,h=void 0,e=void 0,f=void 0,k=void 0;0<c.length&&void 0!==c[0]&&(b=g.Util.convertToNumber(c[0],0));1<c.length&&void 0!==c[1]&&(a=g.Util.convertToNumber(c[1],0));2<c.length&&void 0!==c[2]&&(h=Math.max(0,g.Util.convertToNumber(c[2],0)));3<c.length&&void 0!==c[3]&&(e=c[3]);4<c.length&&
void 0!==c[4]&&(f=g.Util.convertToNumber(c[4],0));5<c.length&&void 0!==c[5]&&(k=!!c[5]);return new d(b,a,h,e,f,k)};d.prototype.toJson=function(){var c=6;!0!==this.inset&&(c--,"rgba(0,0,0,0.5)"!==this.color&&(c--,0!==this.spread&&(c--,0!==this.blur&&c--)));var b=[];b.push(this.x);b.push(this.y);3<=c&&b.push(this.blur);4<=c&&b.push(this.spread);5<=c&&b.push(this.color.toString());6<=c&&b.push(!!this.inset);return b};d.prototype.equals=function(c){return void 0===c||c.x!==this.x||c.y!==this.y||c.blur!==
this.blur||c.color!==this.color||c.spread!==this.spread||c.inset!==this.inset?!1:!0};return d}();f.Shadow=e})(g.Types||(g.Types={}));(function(f){(function(e){(function(d){var c=function(b){function a(a,c){b.call(this,"shadow",["value"],a,"",[],!1);this.isBoxShadow=c}__extends(a,b);a.prototype.scrubValue=function(a){if(void 0===a||!(a instanceof Array)||0===a.length)return[];var b=[];a[0]instanceof Array?a.forEach(function(a){b.push(g.Types.Shadow.fromJson(a))}):b.push(g.Types.Shadow.fromJson(a));
return b};a.prototype.writeCssBucket=function(a,b,c,d,e){var f=this,g=[];e.forEach(function(a){g.push(a.render(c.width,c.height,f.isBoxShadow))});d[this.cssName]=0===g.length?"none":g.join(", ")};return a}(d.VariableType);d.ShadowVariableType=c})(e.Variables||(e.Variables={}))})(f.Properties||(f.Properties={}))})(g.Models||(g.Models={}));(function(f){(function(d){d[d.Forward=0]="Forward";d[d.Backward=1]="Backward";d[d.Random=2]="Random";d[d.CenterOut=3]="CenterOut";d[d.OutCenter=4]="OutCenter"})(f.StaggerOrder||
(f.StaggerOrder={}));var e=function(){function d(c,b){void 0===b&&(b=f.StaggerOrder.Forward);this.delay=c;this.order=b;this.delay=Math.max(0,c)}d.fromJson=function(c){c=c||0;if(c instanceof Array){1>c.length&&c.push(0);2>c.length&&c.push("f");c[0]=g.Util.convertToNumber(c[0]);c[1]=(c[1]||"f").toString().trim().toLowerCase().charAt(0);var b=f.StaggerOrder.Forward;"b"===c[1]&&(b=f.StaggerOrder.Backward);"r"===c[1]&&(b=f.StaggerOrder.Random);"c"===c[1]&&(b=f.StaggerOrder.CenterOut);"o"===c[1]&&(b=f.StaggerOrder.OutCenter);
return new d(c[0],b)}return new d(g.Util.convertToNumber(c))};d.prototype.toJson=function(){if(this.order===f.StaggerOrder.Forward)return this.delay;var c=[],b="f";this.order===f.StaggerOrder.Backward&&(b="b");this.order===f.StaggerOrder.Random&&(b="r");this.order===f.StaggerOrder.CenterOut&&(b="c");this.order===f.StaggerOrder.OutCenter&&(b="o");c.push(this.delay);c.push(b);return c};d.prototype.equals=function(c){return void 0===c||c.delay!==this.delay||c.order!==this.order?!1:!0};d.DEFAULT=new d(0);
return d}();f.Stagger=e})(g.Types||(g.Types={}));(function(f){(function(e){(function(c){var b=function(a){function b(){a.call(this,"stagger",["stagger","stag"],void 0,"",g.Types.Stagger.DEFAULT,!1)}__extends(b,a);b.prototype.scrubValue=function(a){return g.Types.Stagger.fromJson(a)};return b}(c.VariableType);c.StaggerVariableType=b;b=function(a){function b(h,c,d,e,f,g,l,m,r){void 0===f&&(f=!0);void 0===g&&(g=void 0);void 0===l&&(l=!1);void 0===m&&(m=void 0);void 0===r&&(r=void 0);a.call(this,h,c,
d,"",e,l);this.forceLowerCase=f;this.enumValues=g;this.trueValue=m;this.falseValue=r}__extends(b,a);b.prototype.scrubValue=function(a){var b;if("boolean"===typeof a)return a?this.trueValue:this.falseValue;if("number"===typeof a)return this.defaultValue;if("string"===typeof a)b=g.Util.splitNoParens(a);else if(a instanceof Array)b=a;else return this.defaultValue;for(var h=0;h<b.length;h++)if(b[h]=(b[h]||"").toString().trim(),this.forceLowerCase&&(b[h]=b[h].toLowerCase()),this.enumValues&&0<this.enumValues.length){a=
b[h];b[h]=this.enumValues[0];for(var c=1;c<this.enumValues.length;c++)a===this.enumValues[c]&&(b[h]=this.enumValues[c])}return b};return b}(c.VariableType);c.StringArrayVariableType=b;b=function(a){function b(){a.call(this,"align",["align"],"textAlign","inherit",["left","center","right","justify"],!1)}__extends(b,a);return b}(c.EnumVariableType);c.TextAlignVariableType=b;b=function(a){function b(){a.call(this,"width",["width"],"width",0,Number.MAX_VALUE,Number.MAX_VALUE,2,"",!1)}__extends(b,a);b.prototype.writeCssBucket=
function(a,b,h,c,d){d===Number.MAX_VALUE?c.clearProps="whiteSpace,width":(c.width=d/100*h.width,c.whiteSpace="normal")};return b}(c.NumberVariableType);c.TextWidthVariableType=b;b=function(){function a(a){this.type=a}a.prototype.getValue=function(a){void 0===a&&(a=!1);if(void 0!==this._value)return this._value;if(void 0!==this.defaultValueOverride)return this.defaultValueOverride;if(a)return this.type.defaultValue};a.prototype.setValue=function(a){this._value=void 0===a?void 0:this.type.scrubValue(a)};
a.prototype.render=function(a,b){var c=this.getValue();if(void 0!==c){var d=[];a&&(d.push(this.type.label),d.push(": "));d.push(c.toString());b&&d.push(this.type.text);return d.join("")}};return a}();c.Variable=b})(e.Variables||(e.Variables={}));var d=function(){function c(b,a,h){this.label=b;this.jsonNames=a;this.variableTypes=h}c.prototype.createPropertyFromArray=function(b){g.Util.logWarning("PropertyType.createPropertyFromArray()","Abstract method called");return new e.Property(this)};c.prototype.createPropertyFromNumber=
function(b){g.Util.logWarning("PropertyType.createPropertyFromNumber()","Abstract method called");return new e.Property(this)};c.prototype.createPropertyFromString=function(b){g.Util.logWarning("PropertyType.createPropertyFromString()","Abstract method called");return new e.Property(this)};c.prototype.createPropertyFromBoolean=function(b){var a=new e.Property(this);!1===b&&this.variableTypes.forEach(function(b){a[b.jsonNames[0]].setValue(b.defaultValue)});return a};c.prototype.createPropertyFromObject=
function(b){var a=new e.Property(this);if(void 0===b)return a;var h=g.Util.lowercaseProperties(b);this.variableTypes.forEach(function(b){for(var c=0;c<b.jsonNames.length;c++){var d=b.jsonNames[c];if(h.hasOwnProperty(d)){a[b.jsonNames[0]].setValue(h[d]);break}}});return a};c.prototype.renderLabel=function(b){g.Util.logWarning("PropertyType.renderLabel()","Abstract method called");return"xxx"};c.prototype.countOfValues=function(b){var a=0;this.variableTypes.forEach(function(h){void 0!==b[h.jsonNames[0]].getValue()&&
a++});return a};c.prototype.renderVariables=function(b,a,h){var c=[];this.variableTypes.forEach(function(d){d=b[d.jsonNames[0]].render(a,h);void 0!==d&&c.push(d)});var d=c.join(", ");0<d.length&&(d=(a?" ":": ")+d);return this.label+d};c.prototype.writeCssBuckets=function(b,a,h,c,d,e){this.variableTypes.forEach(function(f){f=b[f.jsonNames[0]];f.type.writeCssBuckets(a,h,c,f,d,e)})};return c}();e.PropertyType=d})(f.Properties||(f.Properties={}));(function(e){var d=function(c){function b(a,b,d,e,f){c.call(this,
e);this.itemModelSet=a;this.itemType=b;this.typeLabel=d;this.scriptSets=f;this.scriptSet=f[0]}__extends(b,c);b.prototype.getScriptSet=function(a){var b=this.scriptSets;if(0>a||a>=b.length)a=0;return b[a]};b.prototype.getCountOfStepsUsed=function(){var a=1;this.scriptSets.forEach(function(b){a=Math.max(a,b.getCountOfStepsUsed())});return a};b.prototype.serialize=function(){g.Util.logError("ProStyle.Models.Items.Item.serialize","Abstract base method called.")};b.prototype.createView=function(a){g.Util.logError("ProStyle.Models.Items.Item.createView",
"Abstract base method called.")};return b}(f.Model);e.ItemModel=d})(f.Items||(f.Items={}))})(g.Models||(g.Models={}));(function(f){(function(e){var d=function(c){function b(a,b){c.call(this,a,b);this.model=a}__extends(b,c);b.prototype.moveToSubStep=function(a,b,c){};b.prototype.getCountOfSubSteps=function(){return 0};return b}(e.ItemView);e.SequencedItemView=d})(f.Items||(f.Items={}))})(g.Views||(g.Views={}));(function(f){(function(e){var d=function(){return function(c,b){this.scriptSet=c;this.type=
b;this.y=this.x=0}}();e.Script=d;d=function(){function c(b,a,c){this.itemModelSet=b;this.name=a;this.itemProperties=c;this.scripts=[]}c.prototype.getCountOfStepsUsed=function(){var b=0;this.scripts.forEach(function(a){a.type===e.ScriptType.StepEvent&&(b=Math.max(b,a.stepIndex))});return b+1};c.prototype.insertStep=function(b){};c.prototype.deleteStep=function(b){var a=this,c=[];this.scripts.forEach(function(a){a.type===e.ScriptType.StepEvent&&a.stepIndex===b&&c.push(a)});c.forEach(function(b){b=a.scripts.indexOf(b);
a.scripts.splice(b,1)})};return c}();e.ScriptSet=d})(f.Scripts||(f.Scripts={}))})(g.Models||(g.Models={}));(function(f){(function(e){(function(d){var c=g.Models,b=c.Properties,a=c.Scripts,c=function(c){function e(d,f){c.call(this,d,"unknown","Unknown",[new b.PropertyList([],[])],[new a.ScriptSet(d,"unknown",[])]);this.unknownType=f}__extends(e,c);e.prototype.serialize=function(){return d.serialize(this)};return e}(c.Items.ItemModel);d.UnknownItemModel=c})(e.Unknown||(e.Unknown={}))})(f.Items||(f.Items=
{}));(function(e){(function(d){d.deserialize=function(c,b){console.log(b);return new d.UnknownItemModel(c,b.itemType)}})(e.Unknown||(e.Unknown={}))})(f.Items||(f.Items={}))})(g.Extensions||(g.Extensions={}));(function(f){var e=g.Util,d=function(){function c(){}c.read=function(b,a){a=a||{};var h=(a.itemType||"text").trim().toLowerCase();if((h=c.lookupExtension(h))&&h.deserialize)return h.deserialize(b,a);e.logError("ItemReader.read()","Unknown Item Type ("+a.itemType+")");return g.Extensions.Items.Unknown.deserialize(b,
a)};c.lookupExtension=function(b){for(var a in g.Extensions.Items){var c=a.toLowerCase();if(b===c)return g.Extensions.Items[a]}};return c}();f.ItemReader=d})(g.Serialization||(g.Serialization={}));(function(f){var e=g.Util,d=function(c){function b(a,h,d,g){var k=this;c.call(this,a,e.createChildDivElement(h.div,"prostyle prostyle-page"));this.model=a;this.flow=h;this.flowIndex=d;this.pageIndex=g;this.steps=[];this.items=[];b.createItems(this,a.items);a.steps.forEach(function(a,b){var c=[];k.items.forEach(function(a){a instanceof
f.Items.SequencedItemView&&a.model.sequenceOnStepIndex===b&&c.push(a)});k.steps.push(new f.Step(a,d,g,b,c))})}__extends(b,c);b.createItems=function(a,b){b instanceof Array&&b.forEach(function(b){a.items.push(b.createView(a))})};b.prototype.generateStepsActions=function(a,b){var c=this;this.steps.forEach(function(d,e){d.startTime=(void 0===b?0:b.stopTime)+.01;b=d;0<e&&a.addLabel(d.startLabel,d.startTime);var f=c.flow.camera.size,g=c.flow.camera.frame.canvas;g.generateActionsForStep(c,[g.div],f,a,e,
d.startLabel,c.model.canvasScriptSet);g=c.flow.camera.frame;g.generateActionsForStep(c,[g.div],f,a,e,d.startLabel,c.model.frameScriptSet);g=c;g.generateActionsForStep(c,[g.div],f,a,e,d.startLabel,c.model.pageScriptSet);var q=c.flow.camera.size.getContainedSize(c.model.flow.pageAspectRatio);c.items.forEach(function(b){b.generateStepActions(c,q,a,e,d.startLabel)});d.stopTime=a.duration();d.stopTime<d.startTime&&(d.stopTime=d.startTime);a.addLabel(d.stopLabel,d.stopTime);d.time=d.stopTime-d.startTime});
return b};return b}(f.View);f.PageView=d;(function(c){var b=g.Util,a=function(a){function c(d,e,g){var I=this;a.call(this,e.model,b.createChildDivElement(e.div,"prostyle prostyle-flow"));this.model=d;this.camera=e;this.flowIndex=g;this.pages=[];d.pages.forEach(function(a,b){I.pages.push(new f.PageView(a,I,g,b))})}__extends(c,a);c.prototype.initializePlacement=function(a){this.initializePerspective();this.initializeFlowPlacement(a);this.initializePages(a)};c.prototype.initializePerspective=function(){var a=
this.camera.size;TweenLite.set(this.div,{perspective:(a.width+a.height)/2})};c.prototype.initializeFlowPlacement=function(a){var b={},c=this.model.placement.position,h=this.camera.frame.canvas.size;b.xPercent=-50;b.yPercent=-50;b.x=c.x/100*h.width;b.y=c.y/100*h.height;a.set(this.div,b,"initialize")};c.prototype.generateCameraMovement=function(a,b){var c={},h=this.model.placement.position,d=this.camera.frame.canvas.size;c.xPercent=-50;c.yPercent=-50;c.x=h.x/100*-d.width;c.y=h.y/100*-d.height;c.ease=
Expo.easeOut;a.to(this.camera.div,1,c,b)};c.prototype.initializePages=function(a){b.logWarning("Views.Flows.Flow.initializePages()","Abstract method called")};c.prototype.generatePageMovement=function(a,c,h){b.logWarning("Views.Flows.Flow.generatePageMovement()","Abstract method called")};c.prototype.generateStepsActions=function(a,b){var c=this;this.pages.forEach(function(h,d){var e=h.steps[0].startLabel;a.addLabel(e,"+=0.01");0===d&&(c.generateCameraMovement(a,e),e="initialize");c.generatePageMovement(a,
e,d);b=h.generateStepsActions(a,b)});return b};c.prototype.pageAspectRatio=function(){return this.model.pageAspectRatio};return c}(f.View);c.FlowView=a})(f.Flows||(f.Flows={}))})(g.Views||(g.Views={}));(function(f){(function(e){(function(d){var c=function(b){function a(a,c,d){b.call(this,a,c,d);this.model=a}__extends(a,b);a.prototype.initializePages=function(a){var b=this.camera.size.getContainedSize(this.model.pageAspectRatio),c=new g.Types.Placement(new g.Types.Xyz,new g.Types.Xyz,new g.Types.Scale,
1);this.pages.forEach(function(d,e){c.position.z=-e;c.opacity=0===e?1:0;var f=c.renderCss(b);f.width=b.width;f.height=b.height;a.set(d.div,f,"initialize")})};a.prototype.generatePageMovement=function(a,b,c){var d=this,e=this.camera.size.getContainedSize(this.model.pageAspectRatio),f=new g.Types.Placement(new g.Types.Xyz,new g.Types.Xyz,new g.Types.Scale,1);this.pages.forEach(function(g,l){f.position.z=c-l;f.opacity=l===c?1:0;var m=f.renderCss(e);m.width=e.width;m.height=e.height;d.applyCss(a,g.div,
b,1,m,Expo.easeOut)})};a.prototype.applyCss=function(a,b,c,d,e,f){"initialize"===c?a.set(b,e,c):(e.ease=f,a.to(b,d,e,c))};return a}(g.Views.Flows.FlowView);d.SimpleFlowView=c})(e.Simple||(e.Simple={}))})(f.Flows||(f.Flows={}));(function(e){(function(d){var c=g.Util;d.deserialize=function(b,a){var h=a.setup||{},e=g.Types.Placement.fromJson(h.placement),f=c.convertToNumber(h.pageAspectRatio,b.frame.aspectRatio);return new d.SimpleFlowModel(b,e,h.pageClass,f)}})(e.Simple||(e.Simple={}))})(f.Flows||(f.Flows=
{}));(function(e){(function(d){d.serialize=function(c){return{}}})(e.Simple||(e.Simple={}))})(f.Flows||(f.Flows={}));(function(e){(function(d){var c=function(b){function a(a,c,d,e){b.call(this,a,c,d,e);this.flowType="unknown"}__extends(a,b);a.prototype.serialize=function(){return d.serialize(this)};return a}(e.Simple.SimpleFlowModel);d.UnknownFlowModel=c})(e.Unknown||(e.Unknown={}))})(f.Flows||(f.Flows={}));(function(e){(function(d){var c=function(b){function a(a,c,d){b.call(this,a,c,d)}__extends(a,
b);return a}(e.Simple.SimpleFlowView);d.UnknownFlowView=c})(e.Unknown||(e.Unknown={}))})(f.Flows||(f.Flows={}));(function(e){(function(d){var c=g.Util;d.deserialize=function(b,a){var h=a.setup||{},e=g.Types.Placement.fromJson(h.placement),f=c.convertToNumber(h.pageAspectRatio,b.frame.aspectRatio);return new d.UnknownFlowModel(b,e,h.pageClass,f)}})(e.Unknown||(e.Unknown={}))})(f.Flows||(f.Flows={}));(function(e){(function(d){d.serialize=function(c){return{}}})(e.Unknown||(e.Unknown={}))})(f.Flows||
(f.Flows={}))})(g.Extensions||(g.Extensions={}));(function(f){(function(e){var d=function(c){function b(){var a=[];a.push(new e.Variables.NumberOffsetVariableType("x",["x"],"xPercent",Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,0,2,50,!0,"%",!0));a.push(new e.Variables.NumberOffsetVariableType("y",["y"],"yPercent",Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,0,2,50,!0,"%",!0));c.call(this,"anchor",["anchor"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,
!1);!0===a&&b.x.setValue(-50);return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.x.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);a=a.split(",");b.x.setValue(this.parseString(a[0]));1<a.length&&b.y.setValue(this.parseString(a[1]));return b};b.prototype.parseString=function(a){a=a.trim().toLowerCase();return"left"===a?-50:"center"===a?0:"right"===a?50:"top"===a?-50:"middle"===a?0:
"bottom"===a?50:"l"===a?-50:"c"===a?0:"r"===a?50:"t"===a?-50:"m"===a?0:"b"===a?50:g.Util.convertToNumber(a,0,!0)};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.x.setValue(g.Util.convertToNumber(a[0],0,!0));1<a.length&&b.y.setValue(g.Util.convertToNumber(a[1],0,!0));return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return b}(e.PropertyType);e.AnchorPropertyType=d;d=function(c){function b(a){a=
[];a.push(new e.Variables.NumberVariableType("duration",["duration","dur"],void 0,0,Number.POSITIVE_INFINITY,0,2," secs",!1));a.push(new e.Variables.EaseVariableType);a.push(new e.Variables.RepeatVariableType);a.push(new e.Variables.StaggerVariableType);c.call(this,"animation",["animation","anim"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=new e.Property(this);a&&b.duration.setValue(1);return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);
b.duration.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);b.duration.setValue(1);b.ease.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=new e.Property(this);0<a.length&&b.duration.setValue(null===a[0]?void 0:a[0]);1<a.length&&b.ease.setValue(null===a[1]?void 0:a[1]);2<a.length&&b.repeat.setValue(null===a[2]?void 0:a[2]);3<a.length&&b.stagger.setValue(null===a[3]?void 0:a[3]);return b};b.prototype.renderLabel=function(a){var b=
1===this.countOfValues(a);return this.renderVariables(a,!0,b)};return b}(e.PropertyType);e.AnimationPropertyType=d;d=function(c){function b(a){void 0===a&&(a="transparent");var b=[];b.push(new e.Variables.ColorVariableType("color",["color"],"backgroundColor",a,"transparent"!==a));b.push(new e.Variables.StringArrayVariableType("image",["image","img"],void 0,["none"],!1));b.push(new e.Variables.StringArrayVariableType("layout",["layout"],void 0,["cover"],!0,["cover","contain","stretch","stretch-w",
"stretch-h"]));b.push(new e.Variables.NumberArrayVariableType("aspectRatio",["aspectRatio","ar"],void 0,.01,100,[1]));b.push(new e.Variables.NumberArrayVariableType("x",["x"],void 0,-1E3,1E3,[0]));b.push(new e.Variables.NumberArrayVariableType("y",["y"],void 0,-1E3,1E3,[0]));b.push(new e.Variables.NumberArrayVariableType("width",["width","w"],void 0,-1E3,1E3,[100]));b.push(new e.Variables.NumberArrayVariableType("height",["height","h"],void 0,-1E3,1E3,[100]));b.push(new e.Variables.StringArrayVariableType("repeat",
["repeat","rep"],void 0,["repeat"],!0,["repeat","repeat-x","repeat-y","no-repeat"],!1,["repeat"],["no-repeat"]));b.push(new e.Variables.StringArrayVariableType("clip",["clip"],void 0,["border-box"],!0,["border-box","padding-box","content-box"]));c.call(this,"background",["background","bg"],b)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.color.setValue("#FFF");return b};b.prototype.createPropertyFromNumber=function(a){var b=
c.prototype.createPropertyFromBoolean.call(this,!1);b.color.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.trim();if(0===a.length||"none"===a)return c.prototype.createPropertyFromBoolean.call(this,!1);var b;b=!1;2>g.Util.splitNoParens(a).length&&(a.toLowerCase(),b=0===a.toLowerCase().indexOf("url(")||0===a.toLowerCase().indexOf("linear-gradient(")||0===a.toLowerCase().indexOf("repeating-linear-gradient(")||0===a.toLowerCase().indexOf("radial-gradient(")||0===a.toLowerCase().indexOf("repeating-radial-gradient("));
b?(b=c.prototype.createPropertyFromBoolean.call(this,!1),b.image.setValue(a)):(b=new e.Property(this),b.color.setValue(a));return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.color.setValue(null===a[0]?void 0:a[0]);1<a.length&&b.css.setValue(null===a[1]?void 0:a[1]);return b};b.getVal=function(a,b){return void 0===a||void 0===b?void 0:a<b.length?b[a]:b[b.length-1]};b.prototype.updateCache=function(a){var b=a.cache;b.image=
a.getVariable("image").getValue(!1)||b.image;b.layout=a.getVariable("layout").getValue(!1)||b.layout||a.getVariable("layout").getValue(!0);b.ar=a.getVariable("aspectRatio").getValue(!1)||b.ar||a.getVariable("aspectRatio").getValue(!0);b.x=a.getVariable("x").getValue(!1)||b.x||a.getVariable("x").getValue(!0);b.y=a.getVariable("y").getValue(!1)||b.y||a.getVariable("y").getValue(!0);b.w=a.getVariable("width").getValue(!1)||b.w||a.getVariable("width").getValue(!0);b.h=a.getVariable("height").getValue(!1)||
b.h||a.getVariable("height").getValue(!0);b.clip=a.getVariable("clip").getValue(!1)||b.clip||a.getVariable("clip").getValue(!0);b.repeat=a.getVariable("repeat").getValue(!1)||b.repeat||a.getVariable("repeat").getValue(!0);return b};b.prototype.writeCssBuckets=function(a,c,d,e,f,g){var v=a.getVariable("color");v.type.writeCssBuckets(c,d,e,v,f,g);this.updateCache(a);d=a.cache;(a.sizeChanged||a.getVariable("image").getValue(!1)||a.getVariable("layout").getValue(!1)||a.getVariable("aspectRatio").getValue(!1)||
a.getVariable("x").getValue(!1)||a.getVariable("y").getValue(!1)||a.getVariable("width").getValue(!1)||a.getVariable("height").getValue(!1)||a.getVariable("clip").getValue(!1)||a.getVariable("repeat").getValue(!1))&&b.writeBackgroundBuckets(c,d,e,f)};b.writeBackgroundBuckets=function(a,c,d,e){if(void 0!==c.image){var f={};f.backgroundImage=b.rewriteUrls(a.canvas,c.image.join(","));f.backgroundRepeat=c.repeat.join(",");a=[];for(var g=[],v=[],q=[],l=0;l<c.image.length;l++){var m=c.sizeW/100*d.width,
r=c.sizeH/100*d.height;"border-box"===b.getVal(l,c.clip)?(m+=c.borderSize/100*2*d.height,r+=c.borderSize/100*2*d.height,v.push("border-box"),q.push("border-box")):(v.push("padding-box"),q.push("padding-box"));var D=this.getVal(l,c.layout),t=this.getVal(l,c.ar),O=this.getVal(l,c.x),A=this.getVal(l,c.y),L=this.getVal(l,c.w),n=this.getVal(l,c.h),G="cover"===D,z="contain"===D,E=m/r;G||z?G&&E<=t||z&&E>t?(n=r,L=r*t):(L=m,n=m/t):(L=L/100*m,n=n/100*r,"stretch-w"===D?n=L/t:"stretch-h"===D&&(L=n*t));g.push(L.toFixed(1)+
"px "+n.toFixed(1)+"px");O=(m-L)/2+O/100*m;A=(r-n)/2+A/100*r;a.push(O.toFixed(1)+"px "+A.toFixed(1)+"px")}f.backgroundPosition=a.join(",");f.backgroundSize=g.join(",");f.backgroundClip=v.join(",");f.backgroundOrigin=q.join(",");e.forEach(function(a){void 0!==f.backgroundImage&&(a.backgroundImage=f.backgroundImage);void 0!==f.backgroundRepeat&&(a.backgroundRepeat=f.backgroundRepeat);void 0!==f.backgroundPosition&&(a.backgroundPosition=f.backgroundPosition,a.backgroundSize=f.backgroundSize,a.backgroundClip=
f.backgroundClip,a.backgroundOrigin=f.backgroundOrigin)})}};b.rewriteUrls=function(a,c){var d=[];b.rewriteUrl(a,d,c);return d.join("")};b.rewriteUrl=function(a,b,c){if(0!=(c||"").length){var d=c.toLowerCase().indexOf("url(");if(0>d)b.push(c);else{0<d&&(b.push(c.substr(0,d)),c=c.substr(d));c=c.substr(4);d=c.indexOf(")");0>d&&(d=c.length+1);var e=c.substr(0,d);b.push("url(");b.push(a.adjustImageUrl(e));b.push(")");this.rewriteUrl(a,b,c.substr(d+1))}}};return b}(e.PropertyType);e.BackgroundPropertyType=
d;d=function(c){function b(){var a=[];a.push(new e.Variables.StringVariableType("style",["style"],"borderStyle","none",!1));a.push(new e.Variables.ContainerHeightPctVariableType("size",["size"],"borderWidth",0,100,0,2,"%",!1));a.push(new e.Variables.ColorVariableType("color",["color"],"borderColor","transparent",!1));c.call(this,"border",["border"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&(b.style.setValue("solid"),
b.size.setValue(.5),b.color.setValue("black"));return b};b.prototype.createPropertyFromNumber=function(a){var b=this.createPropertyFromBoolean(!0);b.size.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=this.createPropertyFromBoolean(!0);b.color.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&(b.size.setValue(null===a[0]?void 0:a[0]),b.color.setValue("black"),b.style.setValue("solid"));
1<a.length&&b.color.setValue(null===a[1]?void 0:a[1]);2<a.length&&b.style.setValue(null===a[2]?void 0:a[2]);return b};b.prototype.renderLabel=function(a){var b=[],c=a.style.getValue(),d=a.size.getValue();a=a.color.getValue();void 0!==c&&b.push(c);void 0!==d&&b.push(d.toString()+"px");void 0!==a&&b.push("color");return 0===b.length?this.label:this.label+": "+b.join(" ")};return b}(e.PropertyType);e.BorderPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.BulletsVariableType);
c.call(this,"bullets",["bullets"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,a);a&&b.style.setValue("disc");return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this),c=b.style;a=c.type.getValueByIndex(a-1);c.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);b.style.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=new e.Property(this),
c=this.variableTypes[0].defaultValue;0<a.length&&(c=a[0]);b.style.setValue(c);return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(e.PropertyType);e.BulletsPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.StringVariableType("name",["name"],void 0,"",!1));c.call(this,"class",["class"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return c.prototype.createPropertyFromBoolean.call(this,!1)};b.prototype.createPropertyFromNumber=
function(a){var b=new e.Property(this);b.name.setValue(a.toString());return b};b.prototype.createPropertyFromString=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);b.name.setValue(a.trim());return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.name.setValue(a[0].toString());return b};return b}(e.PropertyType);e.ClassPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.ColorVariableType("color",
["color"],"color","black",!1));c.call(this,"color",["textcolor","color"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.color.setValue("white");return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.color.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.trim();if(0===a.length||"none"===a)return c.prototype.createPropertyFromBoolean.call(this,!1);var b=
new e.Property(this);b.color.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=new e.Property(this);0<a.length&&b.color.setValue(null===a[0]?void 0:a[0]);return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(e.PropertyType);e.ColorPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.ContainerHeightPctVariableType("tl",["topleft","tl"],"borderTopLeftRadius",0,100,0,2,"",!1));a.push(new e.Variables.ContainerHeightPctVariableType("tr",
["topright","tr"],"borderTopRightRadius",0,100,0,2,"",!1));a.push(new e.Variables.ContainerHeightPctVariableType("bl",["bottomleft","bl"],"borderBottomLeftRadius",0,100,0,2,"",!1));a.push(new e.Variables.ContainerHeightPctVariableType("br",["bottomright","br"],"borderBottomRightRadius",0,100,0,2,"",!1));c.call(this,"corners",["corners"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(3)};
b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.topleft.setValue(a);b.topright.setValue(a);b.bottomleft.setValue(a);b.bottomright.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=0<a.length&&void 0!==a[0]?g.Util.convertToNumber(a[0]):void 0,c=1<a.length&&void 0!==a[1]?g.Util.convertToNumber(a[1]):
b,d=2<a.length&&void 0!==a[2]?g.Util.convertToNumber(a[2]):b;a=3<a.length&&void 0!==a[3]?g.Util.convertToNumber(a[3]):c;var f=new e.Property(this);f.topleft.setValue(b);f.topright.setValue(c);f.bottomright.setValue(d);f.bottomleft.setValue(a);return f};b.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return b}(e.PropertyType);e.CornersPropertyType=d;d=function(c){function b(a){void 0===a&&(a=!1);var b=[];b.push(new e.Variables.BooleanVariableType("crop",["crop"],"overflow",
"visible","hidden",a));c.call(this,"crop",["crop"],b)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=new e.Property(this);b.crop.setValue(a);return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.crop.setValue(!!a);return b};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);a=a.trim().toLocaleLowerCase();b.crop.setValue(0<a.length&&"false"!==a&&"0"!==a);return b};b.prototype.createPropertyFromArray=function(a){var b=
new e.Property(this),c=!1;0<a.length&&(a=a[0],c=""!==a&&"false"!==a&&"0"!==a&&!!a);b.crop.setValue(c);return b};b.prototype.renderLabel=function(a){var b=1===this.countOfValues(a);return this.renderVariables(a,!0,b)};return b}(e.PropertyType);e.CropPropertyType=d;d=function(c){function b(a){void 0===a&&(a=!1);var b=[];b.push(new e.Variables.StringVariableType("name",["family","face"],"font-family","Arial, Helvetica, sans-serif",!1));b.push(new e.Variables.ContainerHeightPctVariableType("size",["size"],
"fontSize",0,Number.MAX_VALUE,12,1," pixels",a));b.push(new e.Variables.PercentVariableType("line height",["lineheight","lh"],"lineHeight",0,Number.MAX_VALUE,120,!0));c.call(this,"font",["font"],b)}__extends(b,c);b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.size.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);b.family.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,
!1);0<a.length&&b.size.setValue(null===a[1]?void 0:a[0]);1<a.length&&b.family.setValue(null===a[0]?void 0:a[1]);2<a.length&&b.lineheight.setValue(null===a[2]?void 0:a[2]);return b};b.prototype.renderLabel=function(a){var b=1===this.countOfValues(a);return this.renderVariables(a,!0,b)};return b}(e.PropertyType);e.FontPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.NumberVariableType("item",["item"],void 0,0,Number.POSITIVE_INFINITY,0,0,"",!1));c.call(this,"move to",["moveto",
"move"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=new e.Property(this);b.item.setValue(a?1:0);return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.item.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);b.item.setValue(g.Util.convertToNumber(a));return b};b.prototype.createPropertyFromArray=function(a){var b=new e.Property(this);0<a.length&&b.item.setValue(null===a[0]?void 0:g.Util.convertToNumber(a[0]));
return b};return b}(e.PropertyType);e.MoveToPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.PercentVariableType("percent",["percent","pct"],"autoAlpha",0,100,100,!1));c.call(this,"opacity",["opacity","opac"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.percent.setValue(100);return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.percent.setValue(a);return b};
b.prototype.createPropertyFromString=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);b.percent.setValue(g.Util.convertToNumber(a,100));return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.percent.setValue(g.Util.convertToNumber(a[0],100));return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return b}(e.PropertyType);e.OpacityPropertyType=d;d=function(c){function b(){var a=
[];a.push(new e.Variables.ContainerWidthPctVariableType("left",["left","l"],"paddingLeft",0,50,0,2,"%",!1));a.push(new e.Variables.ContainerHeightPctVariableType("top",["top","t"],"paddingTop",0,50,0,2,"%",!1));a.push(new e.Variables.ContainerWidthPctVariableType("right",["right","r"],"paddingRight",0,50,0,2,"%",!1));a.push(new e.Variables.ContainerHeightPctVariableType("bottom",["bottom","b"],"paddingBottom",0,50,0,2,"%",!1));c.call(this,"padding",["padding","pad"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=
function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(2)};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.left.setValue(a);b.top.setValue(a);b.right.setValue(a);b.bottom.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=0<a.length&&void 0!==a[0]?
g.Util.convertToNumber(a[0]):void 0,c=1<a.length&&void 0!==a[1]?g.Util.convertToNumber(a[1]):b,d=2<a.length&&void 0!==a[2]?g.Util.convertToNumber(a[2]):b;a=3<a.length&&void 0!==a[3]?g.Util.convertToNumber(a[3]):c;var f=new e.Property(this);f.left.setValue(a);f.top.setValue(b);f.right.setValue(c);f.bottom.setValue(d);return f};b.prototype.renderLabel=function(a){var b=a.all.getValue(),c=a.left.getValue()||b,d=a.top.getValue()||b,e=a.right.getValue()||b;a=a.bottom.getValue()||b;return void 0===c&&void 0===
d&&void 0===e&&void 0===a?this.label:c===d&&d===e&&e===a&&a===c?this.label+": "+c.toString()+"%":void 0===c||void 0===d||void 0===e||void 0===a?this.label+": "+(void 0===c?"":"left "+c.toString()+"% ")+(void 0===d?"":"top "+d.toString()+"% ")+(void 0===e?"":"right "+e.toString()+"% ")+(void 0===a?"":"bottom "+a.toString()+"% "):this.label+": "+c.toString()+"% "+d.toString()+"% "+e.toString()+"% "+a.toString()+"%"};return b}(e.PropertyType);e.PaddingPropertyType=d;d=function(c){function b(){var a=
Number.NEGATIVE_INFINITY,b=Number.POSITIVE_INFINITY,d=[];d.push(new e.Variables.ContainerWidthPctVariableType("X",["x"],"x",a,b,0,2," pixels",!0));d.push(new e.Variables.ContainerHeightPctVariableType("Y",["y"],"y",a,b,0,2," pixels",!0));d.push(new e.Variables.ContainerDepthPctVariableType("Z",["z"],"z",a,b,0,2," pixels",!0));c.call(this,"position",["position","pos"],d)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return c.prototype.createPropertyFromBoolean.call(this,!1)};b.prototype.createPropertyFromNumber=
function(a){var b=new e.Property(this);b.x.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.x.setValue(g.Util.convertToNumber(a[0]));1<a.length&&b.y.setValue(g.Util.convertToNumber(a[1]));2<a.length&&b.z.setValue(g.Util.convertToNumber(a[2]));return b};b.prototype.renderLabel=
function(a){var b=this.countOfValues(a),c=1===b,d=1===b;2===b&&void 0!==a.z.getValue()&&(c=!0);return this.renderVariables(a,c,d)};return b}(e.PropertyType);e.PositionPropertyType=d;d=function(c){function b(){var a=[],b=String.fromCharCode(176);a.push(new e.Variables.NumberVariableType("X",["x"],"rotationX",-36E3,36E3,0,2,b,!1));a.push(new e.Variables.NumberVariableType("Y",["y"],"rotationY",-36E3,36E3,0,2,b,!1));a.push(new e.Variables.NumberVariableType("Z",["z"],"rotationZ",-36E3,36E3,0,2,b,!0));
c.call(this,"rotation",["rotation","rotate","rot"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.z.setValue(360);return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.z.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=
c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.x.setValue(g.Util.convertToNumber(a[0]));1<a.length&&b.y.setValue(g.Util.convertToNumber(a[1]));2<a.length&&b.z.setValue(g.Util.convertToNumber(a[2]));return b};b.prototype.renderLabel=function(a){var b=this.countOfValues(a),c=3>b;1===b&&void 0!==a.z.getValue()&&(c=!1);return this.renderVariables(a,c,!0)};return b}(e.PropertyType);e.RotationPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.PercentVariableType("X",
["x"],"scaleX",0,1E3,100,!1));a.push(new e.Variables.PercentVariableType("Y",["y"],"scaleY",0,1E3,100,!1));c.call(this,"scale",["scale"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(200)};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.x.setValue(a);b.y.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<
a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.x.setValue(g.Util.convertToNumber(a[0]));1<a.length&&b.y.setValue(g.Util.convertToNumber(a[1]));return b};b.prototype.renderLabel=function(a){var b=this.countOfValues(a),c=1===b;if(1<b){var b=a.x.getValue(),d=a.y.getValue();if(b===d)return this.label+": "+b.toString()+"%"}return this.renderVariables(a,c,!0)};return b}(e.PropertyType);
e.ScalePropertyType=d;d=function(c){function b(a,b,d){void 0===a&&(a=100);void 0===b&&(b=100);void 0===d&&(d=!0);var f=[];f.push(new e.Variables.ContainerWidthPctVariableType("Width",["width","w"],"width",0,Number.POSITIVE_INFINITY,a,2,"",d));f.push(new e.Variables.ContainerHeightPctVariableType("Height",["height","h"],"height",0,Number.POSITIVE_INFINITY,b,2,"",d));c.call(this,"size",["size"],f)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,
!1):this.createPropertyFromNumber(100)};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.width.setValue(a);b.height.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return this.createPropertyFromArray(a)};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.width.setValue(g.Util.convertToNumber(a[0]));1<a.length&&b.height.setValue(g.Util.convertToNumber(a[1]));
return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return b}(e.PropertyType);e.SizePropertyType=d;d=function(c){function b(){var a=[],b=String.fromCharCode(176);a.push(new e.Variables.NumberVariableType("X",["degrees","deg"],"skewX",Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,0,2,b,!1));c.call(this,"skew",["skew"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){return!1===a?c.prototype.createPropertyFromBoolean.call(this,!1):this.createPropertyFromNumber(-30)};
b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.degrees.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);b.degrees.setValue(g.Util.convertToNumber(a));return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.degrees.setValue(null===a[0]?void 0:g.Util.convertToNumber(a[0]));return b};b.prototype.renderLabel=function(a){this.countOfValues(a);
return this.renderVariables(a,!0,!0)};return b}(e.PropertyType);e.SkewPropertyType=d;d=function(c){function b(a,b,d){void 0===a&&(a="shadow");void 0===b&&(b=["shadow","shadows"]);void 0===d&&(d="boxShadow");var f=[];f.push(new e.Variables.ShadowVariableType(d,"boxShadow"===d));c.call(this,a,b,f)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b[this.variableTypes[0].jsonNames[0]].setValue([.5,.5,2]);return b};b.prototype.createPropertyFromNumber=
function(a){var b=new e.Property(this);b[this.variableTypes[0].jsonNames[0]].setValue([a,a,2]);return b};b.prototype.parseString=function(a){var b=[],c=[],d=0;a.split(",").forEach(function(a){0<d?b[b.length-1]+=","+a:b.push(a);-1<a.indexOf("(")&&d++;-1<a.indexOf(")")&&d--});b.forEach(function(a,b){a=a.trim().toLowerCase();3===b?c.push(isNaN(a)?a:Number(a)):5===b?c.push("1"===a||"true"===a):c.push(g.Util.convertToNumber(a))});return c};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);
b[this.variableTypes[0].jsonNames[0]].setValue(this.parseString(a));return b};b.prototype.createPropertyFromArray=function(a){var b=this,c=new e.Property(this);if(0===a.length)return c;if(a[0]instanceof Array||"number"===typeof a[0])c[this.variableTypes[0].jsonNames[0]].setValue(a);else{var d=[];a.forEach(function(c){"string"===typeof c?d.push(b.parseString(c)):"object"===typeof a[0]&&d.push(b.parseObject(c))});c[this.variableTypes[0].jsonNames[0]].setValue(d)}return c};b.prototype.parseObject=function(a){return[a.x,
a.y,a.blur,a.color,a.spread,a.inset]};b.prototype.createPropertyFromObject=function(a){var b=new e.Property(this);if(void 0===a)return b;b[this.variableTypes[0].jsonNames[0]].setValue(this.parseObject(a));return b};b.prototype.renderLabel=function(a){return this.label};return b}(e.PropertyType);e.ShadowPropertyType=d;d=function(c){function b(a){void 0===a&&(a="transparent");var b=[];b.push(new e.Variables.ColorVariableType("color",["color"],"fill",a,"transparent"!==a));c.call(this,"fill",["fill"],
b)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&b.color.setValue("white");return b};b.prototype.createPropertyFromNumber=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);b.color.setValue(a);return b};b.prototype.createPropertyFromString=function(a){a=a.trim();if(0===a.length||"none"===a)return c.prototype.createPropertyFromBoolean.call(this,!1);var b;b=c.prototype.createPropertyFromBoolean.call(this,
!1);b.color.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);0<a.length&&b.color.setValue(null===a[0]?void 0:a[0]);return b};return b}(e.PropertyType);e.SvgFillPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.TextAlignVariableType);c.call(this,"textAlign",["textalign","align"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,
a);a&&b.align.setValue("justify");return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);0===a&&b.align.setValue("inherit");1===a&&b.align.setValue("left");2===a&&b.align.setValue("center");3===a&&b.align.setValue("right");4===a&&b.align.setValue("justify");return b};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);b.align.setValue(a);return b};b.prototype.createPropertyFromArray=function(a){var b=new e.Property(this),c=this.variableTypes[0].defaultValue;
0<a.length&&(c=a[0]);b.align.setValue(c);return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(e.PropertyType);e.TextAlignPropertyType=d;d=function(c){function b(){c.call(this,"text shadow",["textshadow","textshadows"],"textShadow")}__extends(b,c);return b}(e.ShadowPropertyType);e.TextShadowPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.BooleanVariableType("bold",["bold"],"font-weight","normal","bold"));a.push(new e.Variables.BooleanVariableType("italic",
["italic"],"font-style","normal","italic"));a.push(new e.Variables.StringVariableType("line",["line","lines"],"text-decoration","none",!1));a.push(new e.Variables.BooleanVariableType("smallCaps",["smallcaps","caps"],"font-variant","normal","small-caps"));c.call(this,"style",["textstyle","textstyles","styles","style"],a)}__extends(b,c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1);!0===a&&(b.bold.setValue(!0),b.italic.setValue(!0));return b};
b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.bold.setValue(0<(a&1));b.italic.setValue(0<(a&2));b.smallcaps.setValue(0<(a&4));var c=[];0<(a&8)&&c.push("underline");0<(a&16)&&c.push("line-through");0<(a&32)&&c.push("overline");0===c.length&&c.push("none");b.line.setValue(c.join(" "));return b};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);a=a.toLocaleLowerCase();b.bold.setValue(-1<a.indexOf("bold"));b.italic.setValue(-1<a.indexOf("italic"));
b.smallcaps.setValue(-1<a.indexOf("caps"));var c=[];-1<a.indexOf("under")&&c.push("underline");-1<a.indexOf("through")&&c.push("line-through");-1<a.indexOf("over")&&c.push("overline");0===c.length&&c.push("none");b.line.setValue(c.join(" "));return b};b.prototype.createPropertyFromArray=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,!1),d=[];a.forEach(function(a){a=(a||"").toString().trim().toLocaleLowerCase();0===a.indexOf("b")&&b.bold.setValue(!0);0===a.indexOf("i")&&b.italic.setValue(!0);
0===a.indexOf("c")&&b.smallCaps.setValue(!0);0===a.indexOf("u")&&d.push("underline");0===a.indexOf("t")&&d.push("line-through");0===a.indexOf("o")&&d.push("overline")});0===d.length&&d.push("none");b.line.setValue(d.join(" "));return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(e.PropertyType);e.TextStylePropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.TextWidthVariableType);c.call(this,"width",["textwidth","width"],a)}__extends(b,
c);b.prototype.createPropertyFromBoolean=function(a){var b=c.prototype.createPropertyFromBoolean.call(this,a);a&&b.width.setValue(100);return b};b.prototype.createPropertyFromNumber=function(a){var b=new e.Property(this);b.width.setValue(a);return b};b.prototype.createPropertyFromString=function(a){var b=new e.Property(this);b.width.setValue(g.Util.convertToNumber(a,this.variableTypes[0].defaultValue));return b};b.prototype.createPropertyFromArray=function(a){var b=new e.Property(this),c=this.variableTypes[0].defaultValue;
0<a.length&&(c=g.Util.convertToNumber(a[0],c));b.width.setValue(c);return b};b.prototype.renderLabel=function(a){return this.renderVariables(a,!0,!0)};return b}(e.PropertyType);e.TextWidthPropertyType=d;d=function(c){function b(){var a=[];a.push(new e.Variables.OriginVariableType(!0));c.call(this,"transformOrigin",["transformorigin","origin"],a)}__extends(b,c);b.prototype.createProperty=function(a){var b=new e.Property(this);b.transformOrigin.setValue(a);return b};b.prototype.createPropertyFromBoolean=
function(a){return this.createProperty(a)};b.prototype.createPropertyFromNumber=function(a){return this.createProperty(a)};b.prototype.createPropertyFromString=function(a){return this.createProperty(a)};b.prototype.createPropertyFromArray=function(a){return this.createProperty(a)};b.prototype.createPropertyFromObject=function(a){void 0==a.x&&void 0!==a.X&&(a.x=a.X);void 0==a.y&&void 0!==a.Y&&(a.y=a.Y);void 0==a.z&&void 0!==a.Z&&(a.z=a.Z);return this.createProperty(a)};b.prototype.renderLabel=function(a){return this.renderVariables(a,
!1,!0)};return b}(e.PropertyType);e.TransformOriginPropertyType=d;d=function(){function c(){}c.ANCHOR=new e.AnchorPropertyType;c.ANIMATION=new e.AnimationPropertyType;c.BACKGROUND=new e.BackgroundPropertyType;c.BORDER=new e.BorderPropertyType;c.BULLET=new e.BulletsPropertyType;c.CLASS=new e.ClassPropertyType;c.CORNERS=new e.CornersPropertyType;c.CROP=new e.CropPropertyType;c.CROP_SVG=new e.CropPropertyType(!0);c.FILL_SVG=new e.SvgFillPropertyType;c.FONT=new e.FontPropertyType;c.MOVE_TO=new e.MoveToPropertyType;
c.OPACITY=new e.OpacityPropertyType;c.PADDING=new e.PaddingPropertyType;c.POSITION=new e.PositionPropertyType;c.ROTATION=new e.RotationPropertyType;c.SCALE=new e.ScalePropertyType;c.SIZE=new e.SizePropertyType;c.SIZE_IMAGE=new e.SizePropertyType(0,0,!1);c.SKEW=new e.SkewPropertyType;c.SHADOW=new e.ShadowPropertyType;c.TEXT_ALIGN=new e.TextAlignPropertyType;c.TEXT_COLOR=new e.ColorPropertyType;c.TEXT_SHADOW=new e.TextShadowPropertyType;c.TEXT_STYLE=new e.TextStylePropertyType;c.TEXT_WIDTH=new e.TextWidthPropertyType;
c.TRANSFORM_ORIGIN=new e.TransformOriginPropertyType;return c}();e.Cache=d})(f.Properties||(f.Properties={}))})(g.Models||(g.Models={}));(function(f){(function(e){(function(d){var c=function(b){function a(a,c,d,e,f,g){b.call(this,a,"image","Image",[f],[g]);this.src=c;this.width=d;this.height=e}__extends(a,b);a.prototype.serialize=function(){return d.serialize(this)};a.prototype.createView=function(a){return new d.ImageItemView(this,a)};return a}(g.Models.Items.ItemModel);d.ImageItemModel=c})(e.Image||
(e.Image={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=g.Util,b=function(a){function b(d,e){a.call(this,d,e,c.createChildImageElement(e.div,"prostyle prostyle-item",d.itemModelSet.flow.story.canvas.adjustImageUrl(d.src),d.width,d.height));this.model=d}__extends(b,a);b.prototype.initializeItem=function(a,b){var c=this.model,d=b.getContainedSize(c.itemModelSet.flow.pageAspectRatio),e={};void 0!==c.width&&(e.width=c.width.toString()+"%");void 0!==c.height&&(e.height=c.height.toString()+
"%");this.initializeProperties(c.itemModelSet.flow.story,[this.element],d,a,c.init,!1,e)};return b}(g.Views.Items.ItemView);d.ImageItemView=b})(e.Image||(e.Image={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=g.Models.Properties,b=function(){function a(){}a.get=function(){if(void 0===a._propertyTypes){var b=[];b.push(c.Cache.ANCHOR);b.push(c.Cache.ANIMATION);b.push(c.Cache.CLASS);b.push(c.Cache.CORNERS);b.push(c.Cache.OPACITY);b.push(c.Cache.POSITION);b.push(c.Cache.ROTATION);b.push(c.Cache.SCALE);
b.push(c.Cache.SIZE_IMAGE);b.push(c.Cache.SHADOW);b.push(c.Cache.SKEW);b.push(c.Cache.TRANSFORM_ORIGIN);a._propertyTypes=b}return a._propertyTypes};a._propertyTypes=void 0;return a}();d.ImagePropertyTypes=b})(e.Image||(e.Image={}))})(f.Items||(f.Items={}))})(g.Extensions||(g.Extensions={}));(function(f){var e=function(){function b(){}b.read=function(a,b){return"boolean"===typeof b?a.createPropertyFromBoolean(b):"number"===typeof b?a.createPropertyFromNumber(b):"string"===typeof b?a.createPropertyFromString(b):
b instanceof Array?a.createPropertyFromArray(b):a.createPropertyFromObject(b)};return b}();f.PropertyReader=e;var d=g.Models.Properties,e=function(){function b(){}b.read=function(a,c,e,p,k,x){void 0===p&&(p=void 0);void 0===k&&(k=void 0);void 0===x&&(x=[]);c=c||{};var v=g.Util.lowercaseProperties(c),q=[];p&&(q=p.split(","));void 0!==c["class"]&&q.push.apply(q,c["class"].split(","));var l=void 0;void 0!==k&&(l=b.read(a,k||{},e));q.forEach(function(c){if((c=c.trim().toLowerCase())&&-1===x.indexOf(c)){var d=
x.slice();d.push(c);if(c=(a.classes||{})[c]||void 0)d=b.read(a,c,e,void 0,void 0,d),void 0===l?l=d:d.properties.forEach(function(a){var b=l.getPropertyOfType(a.type);void 0==b?l.properties.push(a):a.type.variableTypes.forEach(function(c){var d=a[c.jsonNames[0]];c=b[c.jsonNames[0]];void 0!==d&&void 0!==c&&(d=d.getValue(!1),void 0!==d&&c.setValue(d))})})}});var m=[];e.forEach(function(a){for(var b=void 0,c=void 0,e=0;e<a.jsonNames.length;e++){var h=a.jsonNames[e];if(v.hasOwnProperty(h)){b=f.PropertyReader.read(a,
v[h]);break}}void 0!==l&&(c=l.getPropertyOfType(a));void 0!==c&&(void 0===b&&(b=new d.Property(a)),a.variableTypes.forEach(function(a){var d=b[a.jsonNames[0]];a=c[a.jsonNames[0]];if(void 0!==a){var e=a.getValue(!1);void 0===e&&(e=a.defaultValueOverride);void 0!==e&&(d.defaultValueOverride=e)}}));void 0===b&&a instanceof d.BackgroundPropertyType&&(b=new d.Property(a));void 0!==b&&m.push(b)});return new d.PropertyList(e,m)};return b}();f.PropertyListReader=e;var c=g.Models.Scripts,e=function(){function b(){}
b.read=function(a,b,d,e){var g=new c.ScriptSet(a,b,e);if(!(d instanceof Array))return g;d.forEach(function(a){g.scripts.push(f.ScriptReader.read(g,a))});return g};b.readJson=function(a,d,e,p,k){e=g.Util.lowercaseProperties(e);for(var x=new c.ScriptSet(a,d,k),v=0;v<p.length;v++){var q=p[v];if(e[q+"scripts"]instanceof Array)return b.read(a,d,e[q+"scripts"],k);if(void 0!==e[q+"script"])x.scripts.push(f.ScriptReader.read(x,e[q+"script"]));else{var l=new c.StepEvent(x,0);if(e[q+"actions"]instanceof Array)l.actions=
f.ActionReader.readArray(l,e[q+"actions"]);else if(void 0!==e[q+"action"])l.actions=f.ActionReader.readArray(l,[e[q+"action"]]);else continue;x.scripts.push(l)}return x}e instanceof Array&&e.forEach(function(a){x.scripts.push(f.ScriptReader.read(x,a))});return x};return b}();f.ScriptSetReader=e})(g.Serialization||(g.Serialization={}));(function(f){(function(e){(function(d){var c=g.Util;d.deserialize=function(b,a){var e=(c.getSetup(a,"src")||c.getSetup(a,"img")||c.getSetup(a,"url")||"https://prostyle.io/pro.svg").trim(),
f=c.getSetup(a,"width"),p=c.getSetup(a,"height"),f=isNaN(f)?void 0:Number(f),p=isNaN(p)?void 0:Number(p),k=d.ImagePropertyTypes.get(),x=g.Serialization.PropertyListReader.read(b.story,a.init,k,"image"),k=g.Serialization.ScriptSetReader.readJson(b,"Image",a,[""],k);return new d.ImageItemModel(b,e,f,p,x,k)}})(e.Image||(e.Image={}))})(f.Items||(f.Items={}))})(g.Extensions||(g.Extensions={}));(function(f){var e=function(){function c(){}c.writeSet=function(b,a){a.forEach(function(a){b[a.type.jsonNames[a.type.jsonNames.length-
1]]=c.write(a)})};c.write=function(b){var a={};b.type.variableTypes.forEach(function(c){c=c.jsonNames[c.jsonNames.length-1];var d=b[c].getValue();void 0!==d&&(a[c]=d)});return a};return c}();f.PropertyWriter=e;e=function(){function c(){}c.write=function(b){return{}};return c}();f.PropertyListWriter=e;var d=g.Models.Scripts.ScriptType,e=function(){function c(){}c.write=function(b){var a=b.type,e=void 0,e=a===d.InitEvent?c.writeInitEvent(b):a===d.StepEvent?c.writeStepEvent(b):a===d.SwitchEvent?c.writeSwitchEvent(b):
a===d.ActionsOrphan?c.writeActionsOrphan(b):a===d.PropertyOrphan?c.writePropertyOrphan(b):{};e.type=d.toString(b.type);e.editor={};e.editor.x=b.x;e.editor.y=b.y;return e};c.writeInitEvent=function(b){var a={};f.PropertyWriter.writeSet(a,b.properties);return a};c.writeStepEvent=function(b){var a={scriptType:"step"};0<b.stepIndex&&(a.scriptType+=b.stepIndex+1);a.actions=f.ActionWriter.writeArray(b.actions);return a};c.writeSwitchEvent=function(b){var a={};a.switch=b.switchName;a.actions=f.ActionWriter.writeArray(b.actions);
return a};c.writeActionsOrphan=function(b){var a={};a.actions=f.ActionWriter.writeArray(b.actions);return a};c.writePropertyOrphan=function(b){var a={};f.PropertyWriter.writeSet(a,b.properties);return a};return c}();f.ScriptWriter=e})(g.Serialization||(g.Serialization={}));(function(f){(function(e){(function(d){d.serialize=function(c){var b={};b.setup=b.setup||{};b.setup.src=c.src;c.width&&(b.setup.class=c.width);c.height&&(b.setup.class=c.height);b.init=g.Serialization.PropertyListWriter.write(c.init);
b.scripts=g.Serialization.ScriptSetWriter.write(c.scriptSet);return b}})(e.Image||(e.Image={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=function(b){function a(a,c,d){b.call(this,a,"layer","Layer",[c],[d]);this.items=[];this.flow=a.flow;this.story=a.flow.story}__extends(a,b);a.prototype.getCountOfStepsUsed=function(){var a=1;this.scriptSets.forEach(function(b){a=Math.max(a,b.getCountOfStepsUsed())});this.items.forEach(function(b){a=Math.max(a,b.getCountOfStepsUsed())});return a};a.prototype.serialize=
function(){return d.serialize(this)};a.prototype.createView=function(a){return new d.LayerItemView(this,a)};return a}(g.Models.Items.ItemModel);d.LayerItemModel=c})(e.Layer||(e.Layer={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=g.Util,b=function(a){function b(d,e){a.call(this,d,e,c.createChildDivElement(e.div,"prostyle prostyle-layer"));this.model=d;this.items=[];g.Views.PageView.createItems(this,d.items)}__extends(b,a);b.prototype.initializeItem=function(b,c){a.prototype.initializeItem.call(this,
b,c);this.items.forEach(function(a){a.initializeItem(b,c)})};b.prototype.generateStepActions=function(b,c,d,e,f){var h=this;this.items.forEach(function(a){a.generateStepActions(h,c,d,e,f)});a.prototype.generateStepActions.call(this,this,c,d,e,f)};return b}(g.Views.Items.ItemView);d.LayerItemView=b})(e.Layer||(e.Layer={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=g.Models.Properties,b=function(){function a(){}a.get=function(){if(void 0===a._propertyTypes){var b=[];b.push(c.Cache.ANCHOR);
b.push(c.Cache.ANIMATION);b.push(c.Cache.BACKGROUND);b.push(c.Cache.BORDER);b.push(c.Cache.CLASS);b.push(c.Cache.CORNERS);b.push(c.Cache.CROP);b.push(c.Cache.MOVE_TO);b.push(c.Cache.OPACITY);b.push(c.Cache.POSITION);b.push(c.Cache.ROTATION);b.push(c.Cache.SCALE);b.push(c.Cache.SHADOW);b.push(c.Cache.SIZE);b.push(c.Cache.SKEW);b.push(c.Cache.TRANSFORM_ORIGIN);a._propertyTypes=b}return a._propertyTypes};a._propertyTypes=void 0;return a}();d.LayerPropertyTypes=b})(e.Layer||(e.Layer={}))})(f.Items||(f.Items=
{}))})(g.Extensions||(g.Extensions={}));(function(f){var e=g.Models,d=g.Models.Items,c=function(){function b(){}b.read=function(a,c){c=c||{};c.init=c.init||{};var d=e.CanvasPropertyTypes.get(),g=e.FramePropertyTypes.get(),k=e.PagePropertyTypes.get(),x=f.PropertyListReader.read(a.story,c.init,k,a.getDefaultPageClassName(),a.getDefaultPageClassValue()),x=new e.PageModel(x,a);x.canvasScriptSet=f.ScriptSetReader.readJson(x,"Canvas",c,["canvas"],d);x.frameScriptSet=f.ScriptSetReader.readJson(x,"Frame",
c,["frame"],g);x.pageScriptSet=f.ScriptSetReader.readJson(x,"Page",c,["page"],k);x.items=b.readItems(x,c);x.steps=b.readSteps(x,c,x.items);return x};b.readSteps=function(a,b,c){b=b.steps||[];var e=[];b instanceof Array&&b.forEach(function(b){e.push(f.StepReader.read(a,b))});var g=1;c.forEach(function(a){g=Math.max(g,a.getCountOfStepsUsed());a instanceof d.SequencedItemModel&&(g=Math.max(g,a.sequenceOnStepIndex+1))});g=Math.max(g,a.canvasScriptSet.getCountOfStepsUsed());g=Math.max(g,a.frameScriptSet.getCountOfStepsUsed());
g=Math.max(g,a.pageScriptSet.getCountOfStepsUsed());if(e.length<g)for(b=g-e.length,c=0;c<b;c++)e.push(f.StepReader.read(a,{}));return e};b.readItems=function(a,b){var c=b.items;void 0===c&&void 0!==b.item&&(c=[b.item]);var c=c||[],d=[];c instanceof Array&&c.forEach(function(b){d.push(f.ItemReader.read(a,b))});return d};return b}();f.PageReader=c})(g.Serialization||(g.Serialization={}));(function(f){(function(e){(function(d){d.deserialize=function(c,b){var a=d.LayerPropertyTypes.get(),e=g.Serialization.PropertyListReader.read(c.story,
b.init,a,"layer"),a=g.Serialization.ScriptSetReader.readJson(c,"Layer",b,[""],a),e=new d.LayerItemModel(c,e,a);e.items=g.Serialization.PageReader.readItems(e,b);return e}})(e.Layer||(e.Layer={}))})(f.Items||(f.Items={}));(function(e){(function(d){d.serialize=function(c){var b={};b.init=g.Serialization.PropertyListWriter.write(c.init);b.scripts=g.Serialization.ScriptSetWriter.write(c.scriptSet);g.Serialization.PageWriter.writeItems(c,b);return b}})(e.Layer||(e.Layer={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=
function(b){function a(a,c,d,e,f,g,q,l,m,r,D,t,n){b.call(this,a,"text","Text",[g,l,r,t],[q,m,D,n]);this.text=c;this.stackedLines=d;this.stackedWords=e;this.stackedChars=f;this.linesInit=l;this.linesScriptSet=m;this.wordsInit=r;this.wordsScriptSet=D;this.charsInit=t;this.charsScriptSet=n}__extends(a,b);a.prototype.serialize=function(){return d.serialize(this)};a.prototype.createView=function(a){return new d.TextItemView(this,a)};return a}(g.Models.Items.ItemModel);d.TextItemModel=c})(e.Text||(e.Text=
{}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=g.Util,b=function(a){function b(d,e){a.call(this,d,e,c.createChildDivElement(e.div,"prostyle prostyle-text"));this.model=d;this.splitText=void 0;this.chars=this.words=this.lines=!1;this.div.innerHTML=d.text;this.lines=d.stackedLines||0<d.linesScriptSet.scripts.length||d.linesInit.hasAnythingSet();this.words=d.stackedWords||0<d.wordsScriptSet.scripts.length||d.wordsInit.hasAnythingSet();this.chars=d.stackedChars||0<d.charsScriptSet.scripts.length||
d.charsInit.hasAnythingSet();if(this.lines||this.words||this.chars){var f=[];this.lines&&f.push("lines");this.words&&f.push("words");this.chars&&f.push("chars");f={type:f.join(",")};this.lines&&(f.linesClass=d.stackedLines?"prostyle-text-line-stacked":"prostyle-text-line");this.words&&(f.wordsClass=d.stackedWords?"prostyle-text-word-stacked":"prostyle-text-word");this.chars&&(f.charsClass=d.stackedChars?"prostyle-text-char-stacked":"prostyle-text-char");this.splitText=new window.SplitText(this.div,
f)}}__extends(b,a);b.prototype.initializeItem=function(a,b){var c=this.model.itemModelSet.flow.story,d=b.getContainedSize(this.model.itemModelSet.flow.pageAspectRatio),e=this.initializeProperties.bind(this);e(c,[this.div],d,a,this.model.init,!1);void 0!==this.splitText&&(this.lines&&e(c,this.splitText.lines,d,a,this.model.linesInit,!1),this.words&&e(c,this.splitText.words,d,a,this.model.wordsInit,!1),this.chars&&e(c,this.splitText.chars,d,a,this.model.charsInit,!1))};b.prototype.generateStepActions=
function(a,b,c,d,e){var f=this.generateActionsForStep.bind(this);f(a,[this.div],b,c,d,e,this.model.scriptSet);void 0!==this.splitText&&(this.lines&&f(a,this.splitText.lines,b,c,d,e,this.model.linesScriptSet),this.words&&f(a,this.splitText.words,b,c,d,e,this.model.wordsScriptSet),this.chars&&f(a,this.splitText.chars,b,c,d,e,this.model.charsScriptSet))};return b}(g.Views.Items.ItemView);d.TextItemView=b})(e.Text||(e.Text={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=g.Models.Properties,
b=function(){function a(){}a.cacheProperties=function(){a._propertyTypes=[];a._linePropertyTypes=[];a._wordPropertyTypes=[];a._charPropertyTypes=[];var b=[a._propertyTypes],d=[a._linePropertyTypes],e=[a._propertyTypes,a._linePropertyTypes,a._wordPropertyTypes,a._charPropertyTypes];a.addPropertyType(b,c.Cache.ANCHOR);a.addPropertyType(e,c.Cache.ANIMATION);a.addPropertyType(e,c.Cache.BACKGROUND);a.addPropertyType(e,c.Cache.BORDER);a.addPropertyType(d,c.Cache.BULLET);a.addPropertyType(e,c.Cache.CLASS);
a.addPropertyType(e,c.Cache.CORNERS);a.addPropertyType(b,c.Cache.CROP);a.addPropertyType(b,c.Cache.FONT);a.addPropertyType(e,c.Cache.OPACITY);a.addPropertyType(e,c.Cache.PADDING);a.addPropertyType(e,c.Cache.POSITION);a.addPropertyType(e,c.Cache.ROTATION);a.addPropertyType(e,c.Cache.SCALE);a.addPropertyType(e,c.Cache.SHADOW);a.addPropertyType(e,c.Cache.SKEW);a.addPropertyType(b,c.Cache.TEXT_ALIGN);a.addPropertyType(e,c.Cache.TEXT_COLOR);a.addPropertyType(e,c.Cache.TEXT_SHADOW);a.addPropertyType(e,
c.Cache.TEXT_STYLE);a.addPropertyType(b,c.Cache.TEXT_WIDTH);a.addPropertyType(e,c.Cache.TRANSFORM_ORIGIN)};a.addPropertyType=function(a,b){a.forEach(function(a){a.push(b)})};a.get=function(){void 0===a._propertyTypes&&a.cacheProperties();return a._propertyTypes};a.getForLines=function(){void 0===a._linePropertyTypes&&a.cacheProperties();return a._linePropertyTypes};a.getForWords=function(){void 0===a._wordPropertyTypes&&a.cacheProperties();return a._wordPropertyTypes};a.getForChars=function(){void 0===
a._charPropertyTypes&&a.cacheProperties();return a._charPropertyTypes};a._propertyTypes=void 0;a._linePropertyTypes=void 0;a._wordPropertyTypes=void 0;a._charPropertyTypes=void 0;return a}();d.TextPropertyTypes=b})(e.Text||(e.Text={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=g.Util;d.deserialize=function(b,a){var e=c.getSetup(a,"text"),f="";if(e instanceof Array){var p=[];e.forEach(function(a){p.push(a.toString())});f=p.join("<br>")}else f=(e||"").toString();var e=!!c.getSetup(a,
"stackedLines"),k=!!c.getSetup(a,"stackedWords"),x=!!c.getSetup(a,"stackedChars"),v=d.TextPropertyTypes.get(),q=d.TextPropertyTypes.getForLines(),l=d.TextPropertyTypes.getForWords(),m=d.TextPropertyTypes.getForChars(),r=g.Serialization.PropertyListReader.read(b.story,a.init,v,"text"),D=g.Serialization.PropertyListReader.read(b.story,a.lineInit||a.linesInit,q),t=g.Serialization.PropertyListReader.read(b.story,a.wordInit||a.wordsInit,l),n=g.Serialization.PropertyListReader.read(b.story,a.charInit||
a.charsInit,m),v=g.Serialization.ScriptSetReader.readJson(b,"Text",a,[""],v),q=g.Serialization.ScriptSetReader.readJson(b,"Lines",a,["line","lines"],q),l=g.Serialization.ScriptSetReader.readJson(b,"Words",a,["word","words"],l),m=g.Serialization.ScriptSetReader.readJson(b,"Characters",a,["char","chars"],m);return new d.TextItemModel(b,f,e,k,x,r,v,D,q,t,l,n,m)}})(e.Text||(e.Text={}))})(f.Items||(f.Items={}));(function(e){(function(d){d.serialize=function(c){var b={setup:{}},a=c.text.split("<br>");b.setup.text=
1<a.length?a:c.text;c.stackedLines&&(b.setup.stackedLines=!0);c.stackedWords&&(b.setup.stackedWords=!0);c.stackedChars&&(b.setup.stackedChars=!0);b.init=g.Serialization.PropertyListWriter.write(c.init);b.scripts=g.Serialization.ScriptSetWriter.write(c.scriptSet);b.lineInit=g.Serialization.PropertyListWriter.write(c.linesInit);b.lineScripts=g.Serialization.ScriptSetWriter.write(c.linesScriptSet);b.wordInit=g.Serialization.PropertyListWriter.write(c.wordsInit);b.wordScripts=g.Serialization.ScriptSetWriter.write(c.wordsScriptSet);
b.charInit=g.Serialization.PropertyListWriter.write(c.charsInit);b.charScripts=g.Serialization.ScriptSetWriter.write(c.charsScriptSet);return b}})(e.Text||(e.Text={}))})(f.Items||(f.Items={}));(function(e){(function(d){var c=function(b){function a(a,c){b.call(this,a,c);this.model=a;this.divs=[];this.div.innerText=a.unknownType+"?";this.div.classList.add("unknown")}__extends(a,b);return a}(g.Views.Items.ItemView);d.UnknownItemView=c})(e.Unknown||(e.Unknown={}))})(f.Items||(f.Items={}));(function(e){(function(d){d.serialize=
function(c){return{}}})(e.Unknown||(e.Unknown={}))})(f.Items||(f.Items={}))})(g.Extensions||(g.Extensions={}));(function(f){(function(d){var c=function(b){function a(a,c){b.call(this,a,c);this.actions=[]}__extends(a,b);a.prototype.removeAction=function(a){a=this.actions.indexOf(a);this.actions.splice(a,1)};return a}(d.Script);d.ActionsScript=c})(f.Scripts||(f.Scripts={}));(function(d){(function(b){b[b.SetProperties=0]="SetProperties"})(d.ActionType||(d.ActionType={}));(function(b){b.fromString=function(a){a=
(a||"properties").toString().trim();if("properties"===a)return b.SetProperties;g.Util.logError("ActionType.fromString()","Unknown action type: "+a);return b.SetProperties};b.toString=function(a){return"properties"}})(d.ActionType||(d.ActionType={}));var c=function(){function b(a,b,c){this.script=a;this.actionType=b;this.delay=c;Math.max(0,c)}b.prototype.saveJson=function(){g.Util.logWarning("Action.saveJson()","Abstract method called");return{}};return b}();d.Action=c;c=function(b){function a(a,c,
e){b.call(this,a,d.ActionType.SetProperties,c);this.properties=e}__extends(a,b);return a}(d.Action);d.SetPropertiesAction=c})(f.Actions||(f.Actions={}));var e=function(){function d(){}d.get=function(){if(void 0===d._propertyTypes){var c=[];c.push(f.Properties.Cache.ANIMATION);c.push(f.Properties.Cache.BACKGROUND);c.push(f.Properties.Cache.BORDER);c.push(f.Properties.Cache.CORNERS);c.push(f.Properties.Cache.CROP);c.push(f.Properties.Cache.FONT);c.push(f.Properties.Cache.OPACITY);c.push(f.Properties.Cache.SHADOW);
c.push(f.Properties.Cache.TEXT_COLOR);d._propertyTypes=c}return d._propertyTypes};d._propertyTypes=void 0;return d}();f.CanvasPropertyTypes=e;(function(d){var c=function(b){function a(a,c,d,e,f,g){b.call(this,a,c,d,f,e);this.pageClassIfNotGiven=g}__extends(a,b);a.prototype.getDefaultPageClassName=function(){return this.pageClass||this.pageClassIfNotGiven};a.prototype.getDefaultPageClassValue=function(){return{background:"#FFF",corners:{topLeft:2,bottomRight:2,bottomLeft:2,topRight:2},shadow:[0,0,
1.5,"rgba(0,0,0,0.5)",.1]}};return a}(d.FlowModel);d.PlacementFlowModel=c})(f.Flows||(f.Flows={}));e=function(){function d(){}d.get=function(){if(void 0===d._propertyTypes){var c=[];c.push(f.Properties.Cache.ANIMATION);c.push(f.Properties.Cache.BACKGROUND);c.push(f.Properties.Cache.BORDER);c.push(f.Properties.Cache.CORNERS);c.push(f.Properties.Cache.CROP);c.push(f.Properties.Cache.OPACITY);c.push(f.Properties.Cache.SCALE);c.push(f.Properties.Cache.SHADOW);d._propertyTypes=c}return d._propertyTypes};
d._propertyTypes=void 0;return d}();f.FramePropertyTypes=e})(g.Models||(g.Models={}));(function(f){var e=function(){function d(c,b,a,d,e){this.current=c;this.future=b;this.futureOffset=a;this.past=d;this.pastOffset=e}d.fromJson=function(c){c=c||{};c.future=c.future||{};c.past=c.past||{};return new d(f.Placement.fromJson(c.current),f.Placement.fromJson(c.future),f.Placement.fromJson(c.future.offset),f.Placement.fromJson(c.past),f.Placement.fromJson(c.past.offset))};return d}();f.Stacks=e})(g.Types||
(g.Types={}));(function(f){(function(d){var c=function(b){function a(a,c,d,e,f,g){b.call(this,a,c,d,[f],[g]);this.sequenceOnStepIndex=e}__extends(a,b);return a}(d.ItemModel);d.SequencedItemModel=c})(f.Items||(f.Items={}));var e=function(){function d(){}d.get=function(){if(void 0===d._propertyTypes){var c=[];c.push(f.Properties.Cache.ANIMATION);c.push(f.Properties.Cache.BACKGROUND);c.push(f.Properties.Cache.BORDER);c.push(f.Properties.Cache.CORNERS);c.push(f.Properties.Cache.CROP);c.push(f.Properties.Cache.FONT);
c.push(f.Properties.Cache.OPACITY);c.push(new f.Properties.FontPropertyType(!0));c.push(f.Properties.Cache.SHADOW);c.push(f.Properties.Cache.TEXT_COLOR);c.push(f.Properties.Cache.TEXT_SHADOW);d._propertyTypes=c}return d._propertyTypes};d._propertyTypes=void 0;return d}();f.PagePropertyTypes=e;(function(d){var c=function(b){function a(a){b.call(this,a,d.ScriptType.ActionsOrphan);this.scriptSet=a;this.actions=[]}__extends(a,b);return a}(d.ActionsScript);d.ActionsOrphan=c;c=function(b){function a(a,
c){b.call(this,a,c);this.properties=[]}__extends(a,b);return a}(d.Script);d.PropertiesScript=c;c=function(b){function a(a){b.call(this,a,d.ScriptType.InitEvent);this.scriptSet=a}__extends(a,b);return a}(d.PropertiesScript);d.InitEvent=c;c=function(b){function a(a){b.call(this,a,d.ScriptType.PropertyOrphan);this.scriptSet=a}__extends(a,b);return a}(d.PropertiesScript);d.PropertyOrphan=c;c=function(b){function a(a,c){b.call(this,a,d.ScriptType.StepEvent);this.stepIndex=c}__extends(a,b);return a}(d.ActionsScript);
d.StepEvent=c;c=function(b){function a(a,c){b.call(this,a,d.ScriptType.SwitchEvent);this.switchName=c}__extends(a,b);return a}(d.ActionsScript);d.SwitchEvent=c})(f.Scripts||(f.Scripts={}));e=function(){return function(d){void 0===d&&(d=void 0);this.autoAdvanceDelay=d;this.stopLabel=this.startLabel="";this.time=0}}();f.Step=e})(g.Models||(g.Models={}));(function(f){var e=g.Models.Actions,d=g.Util,c=function(){function a(){}a.readArray=function(b,c){var d=[];c instanceof Array&&c.forEach(function(c){d.push(a.read(b,
c))});return d};a.read=function(b,c){c=c||{};e.ActionType.fromString(c.actionType);return a.readPropertiesAction(b,c)};a.readPropertiesAction=function(a,b){var c=f.PropertyListReader.read(a.scriptSet.itemModelSet.story,b,a.scriptSet.itemProperties).properties;return new e.SetPropertiesAction(a,d.convertToNumber(b.delay),c)};return a}();f.ActionReader=c;e=g.Models.Actions;c=function(){function a(){}a.writeArray=function(a){var b=[];a.forEach(function(a){b.push(a.saveJson())});return b};a.write=function(b){return a.writePropertiesAction(b)};
a.writePropertiesAction=function(a){var b={actionType:e.ActionType.toString(a.actionType)};f.PropertyWriter.writeSet(b,a.properties);a.delay&&(b.delay=a.delay);return b};return a}();f.ActionWriter=c;c=function(){function a(){}a.read=function(a){a=a||{};a.init=a.init||{};a.init.crop=void 0===a.init.crop?!0:a.init.crop;var b=f.PropertyListReader.read(void 0,a.init,g.Models.CanvasPropertyTypes.get()),c=Math.max(0,Math.min(g.Util.convertToNumber(g.Util.getSetup(a,"padding"),0),50));return new g.Models.CanvasModel(b,
c,g.Util.getSetup(a,"mediaUrl"))};return a}();f.CanvasReader=c;c=function(){function a(){}a.write=function(a){var b={setup:{}};a.padding&&(b.setup.padding=a.padding);a.canvasMediaUrl&&(b.setup.mediaUrl=a.canvasMediaUrl);return b};return a}();f.CanvasWriter=c;c=function(){function a(){}a.read=function(b){var c=(b.controllerType||"auto").trim().toLowerCase(),d=a.lookupExtension(c);d&&d.deserialize?b=d.deserialize(b):(g.Util.logError("ControllerReader.read()","Unknown Controller Type ("+c+")"),b=g.Extensions.Controllers.Unknown.deserialize(b));
return b};a.lookupExtension=function(a){for(var b in g.Extensions.Controllers){var c=b.toLowerCase();if(a===c)return g.Extensions.Controllers[b]}};return a}();f.ControllerReader=c;c=function(){function a(){}a.write=function(a){var b=a.serialize();b.flowType=a.flowType;b.pages=[];a.pages.forEach(function(a){b.pages.push(f.PageWriter.write(a))});return b};return a}();f.FlowWriter=c;c=function(){function a(){}a.read=function(b){b=b||{};b.init=b.init||{};var c=f.PropertyListReader.read(void 0,b.init,
g.Models.FramePropertyTypes.get()),d=g.Util.convertToNumber(g.Util.getSetup(b,"aspectRatio")||a.DEFAULT_ASPECT_RATIO,a.DEFAULT_ASPECT_RATIO);b=Math.max(0,Math.min(g.Util.convertToNumber(g.Util.getSetup(b,"padding"),0),50));return new g.Models.FrameModel(c,d,b)};a.DEFAULT_ASPECT_RATIO=16/9;return a}();f.FrameReader=c;c=function(){function a(){}a.write=function(a){var b={setup:{}};b.setup.aspectRatio=a.aspectRatio;b.setup.padding=a.padding;return b};return a}();f.FrameWriter=c;c=function(){function a(){}
a.write=function(a){var b,c=g.Extensions.Items[a.itemType];c&&c.serialize?b=c.serialize(a):(g.Util.logError("ItemWriter.write()","Unknown Item Type ("+b.itemType+")"),b={});b.itemType=a.itemType;b.scripts=f.ScriptSetWriter.write(a.scriptSet);return b};return a}();f.ItemWriter=c;c=function(){function a(){}a.write=function(b){var c={steps:[]};b.steps.forEach(function(a){c.steps.push(f.StepWriter.write(a))});c.items=[];a.writeItems(b,c);return c};a.writeItems=function(a,b){a.items.forEach(function(a){b.items.push(f.ItemWriter.write(a))})};
return a}();f.PageWriter=c;var b=g.Models.Scripts,a=g.Models.Scripts.ScriptType,d=g.Util,c=function(){function c(){}c.read=function(b,e){e=e||{};e.scriptType=e.scriptType||a.toString(a.StepEvent);var f=a.fromString(e.scriptType),g=void 0,g=f===a.StepEvent?c.readStepEvent(b,e):f===a.SwitchEvent?c.readSwitchEvent(b,e):f===a.ActionsOrphan?c.readActionsOrphan(b,e):f===a.PropertyOrphan?c.readPropertyOrphan(b,e):c.readInitEvent(b,e);e.editor=e.editor||{};g.x=d.convertToNumber(e.editor.x);g.y=d.convertToNumber(e.editor.y);
return g};c.readInitEvent=function(a,c){var d=new b.InitEvent(a);d.properties=f.PropertyListReader.read(a.itemModelSet.story,c,a.itemProperties).properties;return d};c.readStepEvent=function(a,c){var e=c.scriptType.slice(4),e=Math.max(0,d.convertToNumber(e,1)-1),e=new b.StepEvent(a,e),g=void 0;void 0!==c.actions?g=c.actions:void 0!==c.action&&(g=[c.action]);e.actions=f.ActionReader.readArray(e,g);return e};c.readSwitchEvent=function(a,c){var d=new b.SwitchEvent(a,c.switch||"");d.actions=f.ActionReader.readArray(d,
c.actions);return d};c.readActionsOrphan=function(a,c){var d=new b.ActionsOrphan(a);d.actions=f.ActionReader.readArray(d,c.actions);return d};c.readPropertyOrphan=function(a,c){var d=new b.PropertyOrphan(a);d.properties=f.PropertyListReader.read(a.itemModelSet.story,c,a.itemProperties).properties;return d};return c}();f.ScriptReader=c;c=function(){function a(){}a.write=function(a){var b=[];a.scripts.forEach(function(a){b.push(f.ScriptWriter.write(a))});return b};return a}();f.ScriptSetWriter=c;var h=
g.Models,c=function(){function a(){}a.read=function(a,b){return new h.Step(b.autoAdvanceDelay)};return a}();f.StepReader=c;c=function(){function a(){}a.write=function(a){var b={};void 0!==a.autoAdvanceDelay&&(b.autoAdvanceDelay=a.autoAdvanceDelay);return b};return a}();f.StepWriter=c;h=g.Models;c=function(){function a(){}a.read=function(b){b=b||{};var c=f.CanvasReader.read(b.canvas||{}),d=f.FrameReader.read(b.frame||{}),e=[],q=[],l=new h.Story(c,d,e,g.Util.lowercaseProperties(b.classes),q,!1);b.flows instanceof
Array?b.flows.forEach(function(a){e.push(f.FlowReader.read(l,a))}):void 0!==b.flow?e.push(f.FlowReader.read(l,b.flow)):b.pages instanceof Array?e.push(f.FlowReader.read(l,{pages:b.pages})):void 0!==b.page?e.push(f.FlowReader.read(l,{pages:[b.page]})):b.items instanceof Array?e.push(f.FlowReader.read(l,{pages:[{items:b.items}]})):void 0!==b.item&&e.push(f.FlowReader.read(l,{pages:[{items:[b.item]}]}));0===e.length&&e.push(f.FlowReader.read(l,{}));b.controllers instanceof Array?b.controllers.forEach(function(a){q.push(f.ControllerReader.read(a))}):
void 0!==b.controller?q.push(f.ControllerReader.read(b.controller)):g.defaultControllers instanceof Array&&(l.usingDefaultControllers=!0,g.defaultControllers.forEach(function(a){q.push(f.ControllerReader.read(a))}));a.checkPL(l);return l};a.checkPL=function(a){var b=g.pl||0;if(!(2>b)){var c=g.hn;0===c.indexOf("www.")&&(c=c.substring(4));c="This story uses ProStyle Plus premium extensions. Please purchase a license at https://prostyle.io/plus/ for the "+c+" domain.";3===b&&console.log("Attempting to use ProStyle Plus license for "+
g.pld+" at "+g.hn);a.flows.push(f.FlowReader.read(a,{pages:[{items:[{text:c,init:{font:6,width:65,opacity:0,padding:!0,bg:"#FF9",border:!0,corners:!0,pos:{z:13}},actions:[{anim:1,opacity:100},{delay:20,anim:1,opacity:0}]}]}]}))}};return a}();f.StoryReader=c;c=function(){function a(){}a.write=function(a){var b={};b.canvas=f.CanvasWriter.write(a.canvas);b.frame=f.FrameWriter.write(a.frame);b.flows=[];a.flows.forEach(function(a){b.flows.push(f.FlowWriter.write(a))});return b};a.stringify=function(b){return JSON.stringify(a.write(b))};
return a}();f.StoryWriter=c})(g.Serialization||(g.Serialization={}));(function(f){f.arrayShuffle=function(b){for(var a=b.length-1;0<a;a--){var c=Math.floor(Math.random()*(a+1)),d=b[a];b[a]=b[c];b[c]=d}return b};f.arraySplit=function(b,a){for(var c=b.length,d=[],e=0;e<c;){var f=Math.ceil((c-e)/a--);d.push(b.slice(e,e+=f))}return d};f.autoButton=function(b,a,c,d){void 0===c&&(c=1E3);void 0===d&&(d=2);var e,f=c,g=function(){a(!1);e=setTimeout(g,f);f/=d},v=function(){void 0!==e&&(clearTimeout(e),e=void 0,
a(!0))};b.onmousedown=function(){f=c;g()};b.onmouseup=function(){v()};b.onmouseout=function(){v()}};f.checkBrowserSupport=function(){var b=document.body;return b.classList&&b.dataset&&null!==f.prefixCssStyleIfNeeded("perspective")};f.configureMetaViewport=function(){var b=f.querySelector("meta[name='viewport']")||document.createElement("meta");b.content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no";b.parentNode!==document.head&&(b.name="viewport",document.head.appendChild(b))};
f.contentLoaded=function(b,a){var c=!1,d=!0,e=b.document,f=e.documentElement,g=e.addEventListener,v=g?"addEventListener":"attachEvent",q=g?"removeEventListener":"detachEvent",l=g?"":"on",m=function(d){if("readystatechange"!=d.type||"complete"==e.readyState)("load"==d.type?b:e)[q](l+d.type,m,!1),!c&&(c=!0)&&a.call(b,d.type||d)},r=function(){try{f.doScroll("left")}catch(a){setTimeout(r,50);return}m("poll")};if("complete"==e.readyState)a.call(b,"lazy");else{if(!g&&f.doScroll){try{d=!b.frameElement}catch(D){}d&&
r()}e[v](l+"DOMContentLoaded",m,!1);e[v](l+"readystatechange",m,!1);b[v](l+"load",m,!1)}};f.createChildImageElement=function(b,a,c,d,e){void 0===d&&(d=void 0);void 0===e&&(e=void 0);var f=document.createElement("img");f.setAttribute("class",a);f.setAttribute("src",c);void 0!==d&&f.setAttribute("width",d.toString()+"%");void 0!==e&&f.setAttribute("height",e.toString()+"%");b.appendChild(f);return f};f.createStyleElement=function(b){var a=document.createElement("style");a.type="text/css";a.id=b;f.querySelector("head").appendChild(a);
return a};f.createSvgElement=function(b,a,c){b=document.createElementNS("http://www.w3.org/2000/svg",b);for(var d in a)b.setAttribute(d,a[d]);c&&c.appendChild(b);return b};var e=document.createElement("dummy").style,d=["Webkit","Moz","O","ms","Khtml"],c={};f.prefixCssStyleIfNeeded=function(b){if("undefined"===typeof c[b]){var a=b.charAt(0).toUpperCase()+b.substr(1),a=(b+" "+d.join(a+" ")+a).split(" ");c[b]=null;for(var f in a)if(void 0!==e[a[f]]){c[b]=a[f];break}}return c[b]};e=document.createElement("dummy").style;
f.encodeStyle=function(b,a){e.cssText="";b=f.prefixCssStyleIfNeeded(b);e[b]=a;return e.cssText};e=document.createElement("dummy").style;f.encodeStyles=function(b){e.cssText="";var a,c;for(a in b)b.hasOwnProperty(a)&&(c=f.prefixCssStyleIfNeeded(a),null!==c&&(e[c]=b[a]));return e.cssText};e=document.createElement("dummy").style;f.encodeStyleSheet=function(b){var a=[];b.selectors.forEach(function(c){b.hasOwnProperty(c)&&("string"===typeof b[c]?a.push(c+" { "+b[c]+" }\n"):a.push(c+" { "+f.encodeStyles(b[c])+
" }\n"))});return a.join("")};f.getElementText=function(b){return b[document.body.textContent?"textContent":"innerText"]};f.lowercaseProperties=function(b){var a={},c;for(c in b)b.hasOwnProperty(c)&&(a[c.toString().trim().toLowerCase()]=b[c]);return a};f.getSetup=function(b,a){if(void 0!==b){a=a.toLowerCase();b=f.lowercaseProperties(b);var c=b.setup;return void 0!==c&&(c=f.lowercaseProperties(c),void 0!==c[a])?c[a]:b[a]}};f.getGSTransform=function(b){var a={x:0,y:0,z:0,xPercent:0,yPercent:0,rotationX:0,
rotationY:0,rotation:0,scaleX:1,scaleY:1,skewX:0};b&&(b=b._gsTransform)&&(void 0!==b.x&&(a.x=b.x),void 0!==b.y&&(a.y=b.y),void 0!==b.z&&(a.z=b.z),void 0!==b.xPercent&&(a.xPercent=b.xPercent),void 0!==b.yPercent&&(a.yPercent=b.yPercent),void 0!==b.rotationX&&(a.rotationX=b.rotationX),void 0!==b.rotationY&&(a.rotationY=b.rotationY),void 0!==b.rotation&&(a.rotation=b.rotation),void 0!==b.scaleX&&(a.scaleX=b.scaleX),void 0!==b.scaleY&&(a.scaleY=b.scaleY),void 0!==b.skewX&&(a.skewX=b.skewX));return a};
f.getStyleElement=function(b){return f.querySelector("#"+b)||f.createStyleElement(b)};f.insertIntoArray=function(b,a,c){b.splice(a,0,c)};f.logStepValues=function(b,a,c,d,e){var f=[];f.push("f");f.push(b.toString());f.push("p");f.push(a.toString());f.push("i");f.push(c.toString());f.push("s");f.push(d.toString());f.push(" ");f.push(JSON.stringify(e));console.log(f.join(""))};f.makeArray=function(b){return[].slice.call(b)};f.querySelectorAll=function(b,a){void 0===a&&(a=document);try{return f.makeArray(a.querySelectorAll(b))}catch(c){f.logError("Util.querySelector",
c.message)}};f.svgAddClass=function(b,a){f.svgRemoveClass(b,a);var c=b.getAttribute("class")||"",c=c+(0===c.length?"":" ")+a;b.setAttribute("class",c)};f.svgGetBounds=function(b){try{var a=b.getBBox()}catch(c){console.error(c)}0===a.width&&f.logWarning("svgGetBounds","getBBox returned an empty rect");return a};f.svgRemoveClass=function(b,a){var c=b.getAttribute("class")||"",c=c.replace(new RegExp("\\s?"+a),"");b.setAttribute("class",c)};f.createChildSvgElement=function(b,a,c){void 0===c&&(c=void 0);
a=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in c)a.setAttribute(d,c[d]);b.appendChild(a);return a};f.getOffset=function(b){b=b.getBoundingClientRect();var a=document.body,c=document.documentElement,d=b.left+(window.pageXOffset||c.scrollLeft||a.scrollLeft)-(c.clientLeft||a.clientLeft||0);return{top:Math.round(b.top+(window.pageYOffset||c.scrollTop||a.scrollTop)-(c.clientTop||a.clientTop||0)),left:Math.round(d)}}})(g.Util||(g.Util={}));(function(f){(function(c){var b=g.Util,
a=g.Models.Properties,d=function(){function c(){}c.generateTimeline=function(d,e,h,v,q,l,m){void 0===m&&(m=void 0);var r=c.getMoveTo(v.properties,d.items),D=[];for(d=0;d<h.length;d++)D.push({force3D:!0,immediateRender:!1,delay:v.delay,element:h[d],elementIndex:d});var t=void 0,n=0,A=v.script.scriptSet.itemModelSet.flow.story;d=e.bgCache;var z=void 0,E=void 0,G=void 0,H=!1,y=void 0;v.properties.forEach(function(b){if(b.type instanceof a.AnimationPropertyType){n=b.duration.getValue()||0;t=b.stagger.getValue();
var c=b.repeat.getValue();void 0!==c&&(H=c.isNoop());0<n&&b.writeCssBuckets(A,e.model,l,D,!1)}b.type instanceof a.BackgroundPropertyType?y=b:void 0!==r&&(b.type instanceof a.MoveToPropertyType||b.type instanceof a.PositionPropertyType||b.type instanceof a.RotationPropertyType||b.type instanceof a.ScalePropertyType||b.type instanceof a.SkewPropertyType)||(b.writeCssBuckets(A,e.model,l,D,!1),b.type instanceof a.SizePropertyType?(z=b.getVariable("width").getValue(!1),E=b.getVariable("height").getValue(!1)):
b.type instanceof a.BorderPropertyType&&(G=b.getVariable("size").getValue(!1)))});f.View.postProcessCssBuckets(D,m,v.properties,l);v=q.totalDuration();var P=void 0!==z||void 0!==E||void 0!==G;if(P){var J={};a.BackgroundPropertyType.writeBackgroundBuckets(A,d,l,[J]);for(m=0;m<h.length;m++)q.set(h[m],J,v);H||(d.sizeW=z||d.sizeW,d.sizeH=E||d.sizeH,d.borderSize=G||d.borderSize)}y&&(y.cache=d,y.sizeChanged=P,y.writeCssBuckets(A,void 0,l,D,!1));P=0;d=[];J=[d];for(m=0;m<h.length;m++)d.push(m);if(t)if(P=
t.delay,t.order===g.Types.StaggerOrder.Backward)d.reverse();else if(t.order===g.Types.StaggerOrder.Random)b.arrayShuffle(d);else if(t.order===g.Types.StaggerOrder.CenterOut||t.order===g.Types.StaggerOrder.OutCenter)J=b.arraySplit(d,2),t.order===g.Types.StaggerOrder.OutCenter?J[1].reverse():(J[0].reverse(),J[1].length<J[0].length&&J[1].unshift(J[0][0]));for(var T=0;T<J.length;T++){var N=v,Q=J[T];for(m=0;m<Q.length;m++)d=Q[m],0<n?q.to(h[d],n,D[d],N):q.set(h[d],D[d],N),N+=P}return r};c.getMoveTo=function(b,
c){var d=void 0;b.forEach(function(b){b.type instanceof a.MoveToPropertyType&&(d=b.getVariable("item").getValue(),void 0!==d&&(0>d||d>c.length)&&(d=void 0))});return d};c.generateMoveTo=function(a,c,d){if(c){var e=b.getGSTransform(c),f=[];(e.x||e.y||e.z)&&f.push("translate3d("+-e.x+"px,"+-e.y+"px,"+-e.z+"px)");e.rotationX&&f.push("rotateX("+-e.rotationX+"deg)");e.rotationY&&f.push("rotateY("+-e.rotationY+"deg)");e.rotation&&f.push("rotate("+-e.rotation+"deg)");var g=Math.max(0,Math.min(0===e.scaleX?
1:1/e.scaleX,10)),h=Math.max(0,Math.min(0===e.scaleY?1:1/e.scaleY,10));1!==e.scaleX&&f.push("scaleX("+g+")");1!==e.scaleY&&f.push("scaleY("+h+")");e.skewX&&f.push("skewX("+-e.skewX+"deg)");console.log(f.join(" "));console.log(c._gsTransform);c={transform:f.join(" "),xPercent:-50,yPercent:-50};d.to(a,1.2,c)}};return c}();c.SetPropertiesAction=d})(f.Actions||(f.Actions={}));(function(c){var b=function(a){function b(c,d,e){a.call(this,c,d,e);this.model=c}__extends(b,a);return b}(c.FlowView);c.PlacementFlowView=
b})(f.Flows||(f.Flows={}));var e=function(){function c(b,a,c,d,e){this.step=b;this.flowIndex=a;this.pageIndex=c;this.stepIndex=d;this.sequencedItems=e;this.playerStepIndex=this.time=0;this.label=a.toString()+"-"+c.toString()+"-"+d.toString()+"-";this.startLabel=this.label+"start";this.stopLabel=this.label+"stop";b.startLabel=this.startLabel;b.stopLabel=this.stopLabel}c.prototype.isAtStart=function(b){return.02>Math.abs(b-this.startTime)};c.prototype.isAtEnd=function(b){return.02>Math.abs(b-this.stopTime)};
c.prototype.getSubStepCount=function(){var b=0;this.sequencedItems.forEach(function(a){b=Math.max(b,a.getCountOfSubSteps())});return b};return c}();f.Step=e;var d=g.Types,e=function(){function c(b,a){this.generateTimeline(b,a)}c.prototype.generateTimeline=function(b,a){var c=this;TweenMax.defaultOverwrite="none";TweenMax.defaultEase=d.Eaze.DEFAULT.ease;void 0!==this.timeline&&this.timeline.kill();this.timeline=new TimelineMax({autoRemoveChildren:!1,onUpdate:a});this.timeline.addLabel("initialize",
0);var e=b.story,f=b.canvas,g=f.size,x=b.size,v=b.camera,q=v.size,l={fontFamily:"arial"};f.fullScreen||(l.height=g.height);f.initializeProperties(e,[f.div],g,this.timeline,e.canvas.init,!1,l);l={width:x.width,height:x.height};b.initializeProperties(e,[b.div],x,this.timeline,e.frame.init,!1,l);v.flows.forEach(function(a){var d=q.getContainedSize(a.pageAspectRatio());a.pages.forEach(function(a){a.initializeProperties(e,[a.div],d,c.timeline,a.model.init,!1);a.items.forEach(function(a){a.initializeItem(c.timeline,
b.camera.size)})});a.initializePlacement(c.timeline)});var m=void 0;v.flows.forEach(function(a){m=a.generateStepsActions(c.timeline,m)});return this.timeline};return c}();f.Timeline=e})(g.Views||(g.Views={}));g.reload=H;g.bootstrap=z;z()})(ProStyle||(ProStyle={}));var _gsScope="undefined"!==typeof module&&module.exports&&"undefined"!==typeof global?global:this||window;
(function(g){var y=g.GreenSockGlobals||g,n=function(a){a=a.split(".");var b=y,c;for(c=0;c<a.length;c++)b[a[c]]=b=b[a[c]]||{};return b}("com.greensock.utils"),E=function(a){var b=a.nodeType,c="";if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=E(a)}else if(3===b||4===b)return a.nodeValue;return c},H=document,z=H.defaultView?H.defaultView.getComputedStyle:function(){},f=/([A-Z])/g,e=function(a,b,c,d){var e;(c=c||z(a,null))?e=(a=
c.getPropertyValue(b.replace(f,"-$1").toLowerCase()))||c.length?a:c[b]:a.currentStyle&&(c=a.currentStyle,e=c[b]);return d?e:parseInt(e,10)||0},d=function(a){return a.length&&a[0]&&(a[0].nodeType&&a[0].style&&!a.nodeType||a[0].length&&a[0][0])?!0:!1},c=/(?:<br>|<br\/>|<br \/>)/gi,b="<div style='position:relative;display:inline-block;"+(H.all&&!H.addEventListener?"*display:inline;*zoom:1;'":"'"),a=function(a){a=a||"";var c=-1!==a.indexOf("++"),d=1;c&&(a=a.split("++").join(""));return function(){return b+
(a?" class='"+a+(c?d++:"")+"'>":">")}},h=n.SplitText=y.SplitText=function(a,b){"string"===typeof a&&(a=h.selector(a));if(!a)throw"cannot split a null element.";var c;if(d(a)){c=a;var e=[],f=c.length,g,r,p;for(g=0;g<f;g++)if(r=c[g],d(r))for(p=0;p<r.length;p++)e.push(r[p]);else e.push(r);c=e}else c=[a];this.elements=c;this.chars=[];this.words=[];this.lines=[];this._originals=[];this.vars=b||{};this.split(b)},I=function(a,b,c){var d=a.nodeType;if(1===d||9===d||11===d)for(a=a.firstChild;a;a=a.nextSibling)I(a,
b,c);else if(3===d||4===d)a.nodeValue=a.nodeValue.split(b).join(c)},p=function(a,b){for(var c=b.length;-1<--c;)a.push(b[c])},n=h.prototype;n.split=function(b){this.isSplit&&this.revert();this.vars=b||this.vars;this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(b=this.elements.length;-1<--b;){this._originals[b]=this.elements[b].innerHTML;var d=this.elements[b],f=this.vars,g=this.chars,h=this.words,m=this.lines;c.test(d.innerHTML)&&(d.innerHTML=d.innerHTML.replace(c,
")eefec303079ad17405c"));var r=E(d),n=f.type||f.split||"chars,words,lines",t=-1!==n.indexOf("lines")?[]:null,y=-1!==n.indexOf("words"),n=-1!==n.indexOf("chars"),A="absolute"===f.position||!0===f.absolute,L=A?"&#173; ":" ",W=-999,G=z(d),X=e(d,"paddingLeft",G),ea=e(d,"borderBottomWidth",G)+e(d,"borderTopWidth",G),P=e(d,"borderLeftWidth",G)+e(d,"borderRightWidth",G),J=e(d,"paddingTop",G)+e(d,"paddingBottom",G),T=e(d,"paddingLeft",G)+e(d,"paddingRight",G),G=e(d,"textAlign",G,!0),N=d.clientHeight,Q=d.clientWidth,
U=a(f.wordsClass),fa=a(f.charsClass),Y=-1!==(f.linesClass||"").indexOf("++"),f=f.linesClass,Z=-1!==r.indexOf("<"),R=!0,V=[],aa=[],ba=[],K=void 0,S=void 0,C=void 0,F=void 0,w=void 0,B=C=C=void 0,u=void 0,M=void 0,ca=F=B=void 0,da=void 0;Y&&(f=f.split("++").join(""));Z&&(r=r.split("<").join("{{LT}}"));K=r.length;F=U();for(w=0;w<K;w++)if(C=r.charAt(w),")"===C&&")eefec303079ad17405c"===r.substr(w,20))F+=(R?"</div>":"")+"<BR/>",R=!1,w!==K-20&&")eefec303079ad17405c"!==r.substr(w+20,20)&&(F+=" "+U(),R=!0),
w+=19;else if(" "===C&&" "!==r.charAt(w-1)&&w!==K-1&&")eefec303079ad17405c"!==r.substr(w-20,20)){F+=R?"</div>":"";for(R=!1;" "===r.charAt(w+1);)F+=L,w++;if(")"!==r.charAt(w+1)||")eefec303079ad17405c"!==r.substr(w+1,20))F+=L+U(),R=!0}else F+=n&&" "!==C?fa()+C+"</div>":C;d.innerHTML=F+(R?"</div>":"");Z&&I(d,"{{LT}}","<");C=d.getElementsByTagName("*");K=C.length;B=[];for(w=0;w<K;w++)B[w]=C[w];if(t||A)for(w=0;w<K;w++)if(u=B[w],(C=u.parentNode===d)||A||n&&!y)M=u.offsetTop,t&&C&&M!==W&&"BR"!==u.nodeName&&
(S=[],t.push(S),W=M),A&&(u._x=u.offsetLeft,u._y=M,u._w=u.offsetWidth,u._h=u.offsetHeight),t&&(y!==C&&n||(S.push(u),u._x-=X),C&&w&&(B[w-1]._wordEnd=!0),"BR"===u.nodeName&&u.nextSibling&&"BR"===u.nextSibling.nodeName&&t.push([]));for(w=0;w<K;w++)u=B[w],C=u.parentNode===d,"BR"===u.nodeName?t||A?(d.removeChild(u),B.splice(w--,1),K--):y||d.appendChild(u):(A&&(F=u.style,y||C||(u._x+=u.parentNode._x,u._y+=u.parentNode._y),F.left=u._x+"px",F.top=u._y+"px",F.position="absolute",F.display="block",F.width=u._w+
1+"px",F.height=u._h+"px"),y?C&&""!==u.innerHTML?aa.push(u):n&&V.push(u):C?(d.removeChild(u),B.splice(w--,1),K--):!C&&n&&(M=!t&&!A&&u.nextSibling,d.appendChild(u),M||d.appendChild(H.createTextNode(" ")),V.push(u)));if(t){A&&(B=H.createElement("div"),d.appendChild(B),ca=B.offsetWidth+"px",M=B.offsetParent===d?0:d.offsetLeft,d.removeChild(B));F=d.style.cssText;for(d.style.cssText="display:none;";d.firstChild;)d.removeChild(d.firstChild);da=!A||!y&&!n;for(w=0;w<t.length;w++){S=t[w];B=H.createElement("div");
B.style.cssText="display:block;text-align:"+G+";position:"+(A?"absolute;":"relative;");f&&(B.className=f+(Y?w+1:""));ba.push(B);K=S.length;for(C=0;C<K;C++)"BR"!==S[C].nodeName&&(u=S[C],B.appendChild(u),da&&(u._wordEnd||y)&&B.appendChild(H.createTextNode(" ")),A&&(0===C&&(B.style.top=u._y+"px",B.style.left=X+M+"px"),u.style.top="0px",M&&(u.style.left=u._x-M+"px")));0===K&&(B.innerHTML="&nbsp;");y||n||(B.innerHTML=E(B).split(String.fromCharCode(160)).join(" "));A&&(B.style.width=ca,B.style.height=u._h+
"px");d.appendChild(B)}d.style.cssText=F}A&&(N>d.clientHeight&&(d.style.height=N-J+"px",d.clientHeight<N&&(d.style.height=N+ea+"px")),Q>d.clientWidth&&(d.style.width=Q-T+"px",d.clientWidth<Q&&(d.style.width=Q+P+"px")));p(g,V);p(h,aa);p(m,ba)}this.chars.reverse();this.words.reverse();this.lines.reverse();this.isSplit=!0;return this};n.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var a=this._originals.length;-1<--a;)this.elements[a].innerHTML=this._originals[a];
this.chars=[];this.words=[];this.lines=[];this.isSplit=!1;return this};h.selector=g.$||g.jQuery||function(a){var b=g.$||g.jQuery;return b?(h.selector=b,b(a)):"undefined"===typeof document?a:document.querySelectorAll?document.querySelectorAll(a):document.getElementById("#"===a.charAt(0)?a.substr(1):a)};h.version="0.3.3"})(_gsScope);
(function(g){var y=function(){return(_gsScope.GreenSockGlobals||_gsScope)[g]};"function"===typeof define&&define.amd?define(["TweenLite"],y):"undefined"!==typeof module&&module.exports&&(module.exports=y())})("SplitText");
