/*!
 * VERSION: 0.20.0
 * DATE: 17-Aug-2015
 * UPDATES AND DOCS AT: https://prostyle.io/plus/
 * 
 * This file is part of ProStyle Plus, a set of premium extensions for ProStyle. It may be
 * used for free for personal projects or licensed per website domain name for commercial use.
 * 
 * @copyright - Copyright (c) 2013-2015, Pro Graphics, Inc. All rights reserved. 
 * @license - This work is subject to the terms at https://prostyle.io/plus/license/
 * @author: Gary Chamberlain, gary@pro.graphics.
 * 
 **/

var __extends=this&&this.__extends||function(c,b){function m(){this.constructor=c}for(var k in b)b.hasOwnProperty(k)&&(c[k]=b[k]);m.prototype=b.prototype;c.prototype=new m},ProStyle;
(function(c){(function(b){(function(b){(function(b){var e=function(b){function d(a,d,c,e,h,k){b.call(this,a,d,c,h,e,k)}__extends(d,b);d.prototype.scrubValue=function(a){var d=[];if("number"===typeof a)return[[void 0,a]];"string"===typeof a?a.split(",").forEach(function(a){d.push([0,c.Util.convertToNumber(a.trim())])}):a instanceof Array&&a.forEach(function(a){a instanceof Array?d.push([0<a.length?c.Util.convertToNumber(a[0]):0,1<a.length?c.Util.convertToNumber(a[1]):0]):d.push([0,c.Util.convertToNumber(a)])});
return d};d.prototype.writeCssBucket=function(a,d,c,b,h){a=b.element.proCache||{};b.element.proCache=a;b=b.elementIndex;a=a.data=[0,0];h.length>b&&(h=h[b],0<h.length&&(a[0]=h[0]),1<h.length&&(a[1]=h[1]))};return d}(c.Models.Properties.Variables.VariableType);b.BarDataVariableType=e})(b.BarChart||(b.BarChart={}))})(b.Items||(b.Items={}))})(c.Extensions||(c.Extensions={}))})(ProStyle||(ProStyle={}));
(function(c){(function(b){(function(b){(function(b){var e=c.Models.Properties,f=function(d){function a(){var a=[];a.push(new b.BarDataVariableType("values",["values"],"dummy",[],"",!0));d.call(this,"data",["data"],a)}__extends(a,d);a.prototype.createPropertyFromBoolean=function(a){return d.prototype.createPropertyFromBoolean.call(this,!1)};a.prototype.createProperty=function(a){var d=new e.Property(this);d.values.setValue(a);return d};a.prototype.createPropertyFromNumber=function(a){return this.createProperty(a)};
a.prototype.createPropertyFromString=function(a){return this.createProperty(a)};a.prototype.createPropertyFromArray=function(a){return this.createProperty(a)};a.prototype.renderLabel=function(a){return this.renderVariables(a,!1,!0)};return a}(e.PropertyType);b.BarDataPropertyType=f})(b.BarChart||(b.BarChart={}))})(b.Items||(b.Items={}))})(c.Extensions||(c.Extensions={}))})(ProStyle||(ProStyle={}));
(function(c){(function(b){(function(b){(function(b){var e=c.Models.Properties,f=function(){function d(){}d.cacheProperties=function(){d._propertyTypes=[];d._barPropertyTypes=[];var a=d._propertyTypes;a.push(e.Cache.ANIMATION);a.push(e.Cache.CROP_SVG);a.push(e.Cache.OPACITY);a.push(e.Cache.POSITION);a.push(e.Cache.ROTATION);a.push(e.Cache.SCALE);a.push(e.Cache.SKEW);a=d._barPropertyTypes;a.push(e.Cache.ANIMATION);a.push(new e.SvgFillPropertyType("rgba(0,0,0,0.5)"));a.push(e.Cache.OPACITY);a.push(e.Cache.SKEW);
a.push(new b.BarDataPropertyType)};d.get=function(){void 0===d._propertyTypes&&d.cacheProperties();return d._propertyTypes};d.getForBars=function(){void 0===d._barPropertyTypes&&d.cacheProperties();return d._barPropertyTypes};d._propertyTypes=void 0;d._barPropertyTypes=void 0;return d}();b.BarChartPropertyTypes=f})(b.BarChart||(b.BarChart={}))})(b.Items||(b.Items={}))})(c.Extensions||(c.Extensions={}))})(ProStyle||(ProStyle={}));
(function(c){(function(b){(function(b){(function(b){b.serialize=function(b){return{}}})(b.BarChart||(b.BarChart={}))})(b.Items||(b.Items={}))})(c.Extensions||(c.Extensions={}))})(ProStyle||(ProStyle={}));
(function(c){(function(b){(function(b){(function(b){var e=c.Util,f=function(b){function a(a,c){b.call(this,a,c,e.createChildSvgElement(c.div,"svg",{"class":"prostyle"}));this.model=a;this.barDivs=[];this.rangeBase=this.domainBase=this.domain=this.minDomain=this.maxDomain=this.barWidth=this.margin=this.height=this.width=0;this.g=e.createChildSvgElement(this.element,"g");for(var f=0;f<a.bars;f++)this.barDivs.push(e.createChildSvgElement(this.g,"rect"));this.maxDomain=a.maxDomainValue;this.minDomain=
a.minDomainValue;this.domain=Math.abs(this.maxDomain-this.minDomain);this.domainBase=0>this.maxDomain?this.maxDomain:0<this.minDomain?this.minDomain:0}__extends(a,b);a.prototype.initializeItem=function(a,b){var d=this.model.itemModelSet.flow.story,c=b.getContainedSize(this.model.itemModelSet.flow.pageAspectRatio);this.width=this.model.width/100*c.width;this.height=this.model.height/100*c.height;this.margin=this.model.margin/100*this.width;this.margin*(this.model.bars+1)>this.width?this.margin=this.width/
(this.model.bars+1):this.barWidth=(this.width-this.margin*this.model.bars)/this.model.bars;this.rangeBase=Math.abs(this.model.maxDomainValue-this.domainBase)/this.domain*this.height;var e={width:this.width,height:this.height};this.initializeProperties(d,[this.element],c,a,this.model.init,!0,e);e={};this.initializeProperties(d,this.barDivs,c,a,this.model.barsInit,!1,e,this.afterBarCssProperties.bind(this))};a.prototype.generateStepActions=function(a,b,d,c,e){this.generateActionsForStep(a,[this.element],
b,d,c,e,this.model.scriptSet);this.generateActionsForStep(a,this.barDivs,b,d,c,e,this.model.barsScriptSet,this.afterBarCssProperties.bind(this))};a.prototype.afterBarCssProperties=function(a,b,d){var c=this;0>=this.domain||b.forEach(function(a,b){var d=e.convertToNumber(a.element.proCache.data[0],c.domainBase),f=e.convertToNumber(a.element.proCache.data[1],c.domainBase),k=(c.maxDomain-Math.max(d,f))/c.domain*c.height,d=(c.maxDomain-Math.min(d,f))/c.domain*c.height-k,f=c.barWidth/8;a.attr={x:c.margin/
2+b*(c.margin+c.barWidth),width:c.barWidth,y:k,height:d,rx:f,ry:f}})};return a}(c.Views.Items.ItemView);b.BarChartItemView=f})(b.BarChart||(b.BarChart={}))})(b.Items||(b.Items={}))})(c.Extensions||(c.Extensions={}))})(ProStyle||(ProStyle={}));
(function(c){(function(b){(function(b){(function(b){var e=function(c){function d(a,b,d,e,k,n,l,g,q,p,m){c.call(this,a,"barChart","BarChart",[g,p],[q,m]);this.bars=b;this.width=d;this.height=e;this.margin=k;this.minDomainValue=n;this.maxDomainValue=l;this.barsInit=p;this.barsScriptSet=m}__extends(d,c);d.prototype.serialize=function(){return b.serialize(this)};d.prototype.createView=function(a){return new b.BarChartItemView(this,a)};return d}(c.Models.Items.ItemModel);b.BarChartItemModel=e})(b.BarChart||
(b.BarChart={}))})(b.Items||(b.Items={}))})(c.Extensions||(c.Extensions={}))})(ProStyle||(ProStyle={}));
(function(c){(function(b){(function(b){(function(b){var e=c.Serialization,f=c.Util;b.deserialize=function(c,a){var m=Math.max(1,Math.min(f.convertToNumber(f.getSetup(a,"bars")),100)),r=Math.max(0,f.convertToNumber(f.getSetup(a,"width"),50)),t=Math.max(0,f.convertToNumber(f.getSetup(a,"height"),50)),h=Math.max(0,f.convertToNumber(f.getSetup(a,"margin"),1)),n=0,l=0,g=f.getSetup(a,"domain");"number"===typeof g?l=g:g instanceof Array&&(n=0<g.length?f.convertToNumber(g[0]):0,l=1<g.length?f.convertToNumber(g[1]):
0);l<n&&(g=l,l=n,n=g);var q=b.BarChartPropertyTypes.get(),p=b.BarChartPropertyTypes.getForBars(),g=e.PropertyListReader.read(c.story,a.init,q),u=e.PropertyListReader.read(c.story,a.barInit||a.barsInit,p),q=e.ScriptSetReader.readJson(c,"Chart",a,[""],q),p=e.ScriptSetReader.readJson(c,"Bars",a,["bar","bars"],p);return new b.BarChartItemModel(c,m,r,t,h,n,l,g,q,u,p)}})(b.BarChart||(b.BarChart={}))})(b.Items||(b.Items={}))})(c.Extensions||(c.Extensions={}))})(ProStyle||(ProStyle={}));
