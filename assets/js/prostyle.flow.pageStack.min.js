/*!
 * @license: MIT License - See https://github.com/GaryChamberlain/prostyle-flow-pageStack/LICENSE
 * @author: Gary Chamberlain, gary@pro.graphics.
 **/

var __extends=this.__extends||function(b,a){function l(){this.constructor=b}for(var f in a)a.hasOwnProperty(f)&&(b[f]=a[f]);l.prototype=a.prototype;b.prototype=new l},ProStyle;
(function(b){(function(a){(function(a){(function(a){var d=function(a){function b(m,n,c,g,e){a.call(this,m,"pageStack",n,c,g,"pageStackPage");this.stacks=e}__extends(b,a);b.defaultStacksJson={current:{position:[0,0,0],rotation:[0,0,0],scale:100,opacity:100},future:{position:[140,0,-200],rotation:[0,-10,5],scale:100,opacity:80,offset:{position:[130,80,-200],rotation:[0,-5,2],scale:100,opacity:50}},past:{position:[-140,0,-200],rotation:[0,10,-5],scale:100,opacity:80,offset:{position:[-130,80,-200],rotation:[0,
5,-2],scale:100,opacity:50}}};return b}(b.Models.Flows.PlacementFlow);a.Extension=d})(a.pageStack||(a.pageStack={}))})(a.Flows||(a.Flows={}))})(b.Extensions||(b.Extensions={}))})(ProStyle||(ProStyle={}));
(function(b){(function(a){(function(a){(function(a){var d=function(a){function b(m,n,c){a.call(this,m,n,c);this.pageStackFlow=m}__extends(b,a);b.prototype.initializePages=function(a){var b=this,c=this.cameraElem.size.getContainedSize(this.pageStackFlow.pageAspectRatio);this.pageElems.forEach(function(g,e){a.set(b.pageElems[e].div,{width:c.width,height:c.height,perspective:1E4},"initialize")})};b.prototype.generatePageMovement=function(a,b,c){var g=this.pageStackFlow.stacks.current,e=this.pageStackFlow.stacks.future,
d=this.pageStackFlow.stacks.futureOffset,f=this.pageStackFlow.stacks.past,l=this.pageStackFlow.stacks.pastOffset,h=this.cameraElem.size.getContainedSize(this.pageStackFlow.pageAspectRatio),g=g.renderCss(h);this.applyCss(a,this.pageElems[c].div,b,1,g,Expo.easeOut);for(var f=f.duplicate(),k=c-1;0<=k;k--)g=f.renderCss(h),this.applyCss(a,this.pageElems[k].div,b,1,g,Expo.easeOut),f.adjust(l);e=e.duplicate();for(k=c+1;k<this.pageElems.length;k++)g=e.renderCss(h),this.applyCss(a,this.pageElems[k].div,b,
1,g,Expo.easeOut),e.adjust(d)};b.prototype.applyCss=function(a,b,c,f,e,d){"initialize"===c?a.set(b,e,c):(e.ease=d,a.to(b,f,e,c))};return b}(b.Render.Flows.PlacementFlow);a.Renderer=d})(a.pageStack||(a.pageStack={}))})(a.Flows||(a.Flows={}))})(b.Extensions||(b.Extensions={}))})(ProStyle||(ProStyle={}));
(function(b){(function(a){(function(a){(function(a){var d=b.Util;a.readJson=function(l,h){var m=b.Types.Placement.fromJson(d.getSetup(h,"placement")),n=d.convertToNumber(d.getSetup(h,"pageAspectRatio"),4/3),c=b.Types.Stacks.fromJson(d.getSetup(h,"stacks")||a.Extension.defaultStacksJson);return new a.Extension(l,m,d.getSetup(h,"defaultPageClass"),n,c)};a.writeJson=function(a,b){}})(a.pageStack||(a.pageStack={}))})(a.Flows||(a.Flows={}))})(b.Extensions||(b.Extensions={}))})(ProStyle||(ProStyle={}));
